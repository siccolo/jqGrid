!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(I){I.ui=I.ui||{},I.ui.version="1.12.1";var e,t,i,o,r=0,n=Array.prototype.slice;I.cleanData=(o=I.cleanData,function(e){var t,i,r;for(r=0;null!=(i=e[r]);r++)try{(t=I._data(i,"events"))&&t.remove&&I(i).triggerHandler("remove")}catch(e){}o(e)}),I.widget=function(e,i,t){var r,o,a,s={},n=e.split(".")[0],l=n+"-"+(e=e.split(".")[1]);return t||(t=i,i=I.Widget),I.isArray(t)&&(t=I.extend.apply(null,[{}].concat(t))),I.expr[":"][l.toLowerCase()]=function(e){return!!I.data(e,l)},I[n]=I[n]||{},r=I[n][e],o=I[n][e]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},I.extend(o,r,{version:t.version,_proto:I.extend({},t),_childConstructors:[]}),(a=new i).options=I.widget.extend({},a.options),I.each(t,function(t,a){return I.isFunction(a)?void(s[t]=function(){function r(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var e,t=this._super,i=this._superApply;return this._super=r,this._superApply=o,e=a.apply(this,arguments),this._super=t,this._superApply=i,e}}()):void(s[t]=a)}),o.prototype=I.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||e},s,{constructor:o,namespace:n,widgetName:e,widgetFullName:l}),r?(I.each(r._childConstructors,function(e,t){var i=t.prototype;I.widget(i.namespace+"."+i.widgetName,o,t._proto)}),delete r._childConstructors):i._childConstructors.push(o),I.widget.bridge(e,o),o},I.widget.extend=function(e){for(var t,i,r=n.call(arguments,1),o=0,a=r.length;o<a;o++)for(t in r[o])i=r[o][t],r[o].hasOwnProperty(t)&&void 0!==i&&(e[t]=I.isPlainObject(i)?I.isPlainObject(e[t])?I.widget.extend({},e[t],i):I.widget.extend({},i):i);return e},I.widget.bridge=function(a,t){var s=t.prototype.widgetFullName||a;I.fn[a]=function(i){var e="string"==typeof i,r=n.call(arguments,1),o=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=I.data(this,s);return"instance"===i?(o=t,!1):t?I.isFunction(t[i])&&"_"!==i.charAt(0)?(e=t[i].apply(t,r))!==t&&void 0!==e?(o=e&&e.jquery?o.pushStack(e.get()):e,!1):void 0:I.error("no such method '"+i+"' for "+a+" widget instance"):I.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+i+"'")}):o=void 0:(r.length&&(i=I.widget.extend.apply(null,[i].concat(r))),this.each(function(){var e=I.data(this,s);e?(e.option(i||{}),e._init&&e._init()):I.data(this,s,new t(i,this))})),o}},I.Widget=function(){},I.Widget._childConstructors=[],I.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=I(t||this.defaultElement||this)[0],this.element=I(t),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=I(),this.hoverable=I(),this.focusable=I(),this.classesElementLookup={},t!==this&&(I.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=I(t.style?t.ownerDocument:t.document||t),this.window=I(this.document[0].defaultView||this.document[0].parentWindow)),this.options=I.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:I.noop,_create:I.noop,_init:I.noop,destroy:function(){var i=this;this._destroy(),I.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:I.noop,widget:function(){return this.element},option:function(e,t){var i,r,o,a=e;if(0===arguments.length)return I.widget.extend({},this.options);if("string"==typeof e)if(a={},e=(i=e.split(".")).shift(),i.length){for(r=a[e]=I.widget.extend({},this.options[e]),o=0;i.length-1>o;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=t}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,r;for(t in e)r=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&r&&r.length&&(i=I(r.get()),this._removeClass(r,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){function e(e,t){var i,r;for(r=0;e.length>r;r++)i=s.classesElementLookup[e[r]]||I(),i=o.add?I(I.unique(i.get().concat(o.element.get()))):I(i.not(o.element).get()),s.classesElementLookup[e[r]]=i,a.push(e[r]),t&&o.classes[e[r]]&&a.push(o.classes[e[r]])}var a=[],s=this;return o=I.extend({element:this.element,classes:this.options.classes||{}},o),this._on(o.element,{remove:"_untrackClassesElement"}),o.keys&&e(o.keys.match(/\S+/g)||[],!0),o.extra&&e(o.extra.match(/\S+/g)||[]),a.join(" ")},_untrackClassesElement:function(i){var r=this;I.each(r.classesElementLookup,function(e,t){-1!==I.inArray(i.target,t)&&(r.classesElementLookup[e]=I(t.not(i.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,r){r="boolean"==typeof r?r:i;var o="string"==typeof e||null===e,a={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:r};return a.element.toggleClass(this._classes(a),r),this},_on:function(s,n,e){var l,d=this;"boolean"!=typeof s&&(e=n,n=s,s=!1),e?(n=l=I(n),this.bindings=this.bindings.add(n)):(e=n,n=this.element,l=this.widget()),I.each(e,function(e,t){function i(){return s||!0!==d.options.disabled&&!I(this).hasClass("ui-state-disabled")?("string"==typeof t?d[t]:t).apply(d,arguments):void 0}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||I.guid++);var r=e.match(/^([\w:-]*)\s*(.*)$/),o=r[1]+d.eventNamespace,a=r[2];a?l.on(o,a,i):n.on(o,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=I(this.bindings.not(e).get()),this.focusable=I(this.focusable.not(e).get()),this.hoverable=I(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(I(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(I(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(I(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(I(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var r,o,a=this.options[e];if(i=i||{},(t=I.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],o=t.originalEvent)for(r in o)r in t||(t[r]=o[r]);return this.element.trigger(t,i),!(I.isFunction(a)&&!1===a.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},I.each({show:"fadeIn",hide:"fadeOut"},function(a,s){I.Widget.prototype["_"+a]=function(t,e,i){"string"==typeof e&&(e={effect:e});var r,o=e?!0===e||"number"==typeof e?s:e.effect||s:a;"number"==typeof(e=e||{})&&(e={duration:e}),r=!I.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),r&&I.effects&&I.effects.effect[o]?t[a](e):o!==a&&t[o]?t[o](e.duration,e.easing,i):t.queue(function(e){I(this)[a](),i&&i.call(t[0]),e()})}}),I.widget,function(){function $(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function C(e,t){return parseInt(I.css(e,t),10)||0}var o,_=Math.max,j=Math.abs,r=/left|center|right/,a=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,l=/%$/,d=I.fn.position;I.position={scrollbarWidth:function(){if(void 0!==o)return o;var e,t,i=I("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=i.children()[0];return I("body").append(i),e=r.offsetWidth,i.css("overflow","scroll"),e===(t=r.offsetWidth)&&(t=i[0].clientWidth),i.remove(),o=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?I.position.scrollbarWidth():0,height:r?I.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=I(e||window),i=I.isWindow(t[0]),r=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:i,isDocument:r,offset:!i&&!r?I(e).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},I.fn.position=function(u){if(!u||!u.of)return d.apply(this,arguments);u=I.extend({},u);var h,p,f,g,m,e,t,i,v=I(u.of),b=I.position.getWithinInfo(u.within),y=I.position.getScrollInfo(b),w=(u.collision||"flip").split(" "),x={};return e=9===(i=(t=v)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:I.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()},v[0].preventDefault&&(u.at="left top"),p=e.width,f=e.height,g=e.offset,m=I.extend({},g),I.each(["my","at"],function(){var e,t,i=(u[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",e=s.exec(i[0]),t=s.exec(i[1]),x[this]=[e?e[0]:0,t?t[0]:0],u[this]=[n.exec(i[0])[0],n.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===u.at[0]?m.left+=p:"center"===u.at[0]&&(m.left+=p/2),"bottom"===u.at[1]?m.top+=f:"center"===u.at[1]&&(m.top+=f/2),h=$(x.at,p,f),m.left+=h[0],m.top+=h[1],this.each(function(){var i,e,s=I(this),n=s.outerWidth(),l=s.outerHeight(),t=C(this,"marginLeft"),r=C(this,"marginTop"),o=n+t+C(this,"marginRight")+y.width,a=l+r+C(this,"marginBottom")+y.height,d=I.extend({},m),c=$(x.my,s.outerWidth(),s.outerHeight());"right"===u.my[0]?d.left-=n:"center"===u.my[0]&&(d.left-=n/2),"bottom"===u.my[1]?d.top-=l:"center"===u.my[1]&&(d.top-=l/2),d.left+=c[0],d.top+=c[1],i={marginLeft:t,marginTop:r},I.each(["left","top"],function(e,t){I.ui.position[w[e]]&&I.ui.position[w[e]][t](d,{targetWidth:p,targetHeight:f,elemWidth:n,elemHeight:l,collisionPosition:i,collisionWidth:o,collisionHeight:a,offset:[h[0]+c[0],h[1]+c[1]],my:u.my,at:u.at,within:b,elem:s})}),u.using&&(e=function(e){var t=g.left-d.left,i=t+p-n,r=g.top-d.top,o=r+f-l,a={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:s,left:d.left,top:d.top,width:n,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:o<0?"top":0<r?"bottom":"middle"};p<n&&p>j(t+i)&&(a.horizontal="center"),f<l&&f>j(r+o)&&(a.vertical="middle"),a.important=_(j(t),j(i))>_(j(r),j(o))?"horizontal":"vertical",u.using.call(this,e,a)}),s.offset(I.extend(d,{using:e}))})},I.ui.position={fit:{left:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,s=e.left-t.collisionPosition.marginLeft,n=o-s,l=s+t.collisionWidth-a-o;t.collisionWidth>a?0<n&&l<=0?(i=e.left+n+t.collisionWidth-a-o,e.left+=n-i):e.left=0<l&&n<=0?o:l<n?o+a-t.collisionWidth:o:0<n?e.left+=n:0<l?e.left-=l:e.left=_(e.left-s,e.left)},top:function(e,t){var i,r=t.within,o=r.isWindow?r.scrollTop:r.offset.top,a=t.within.height,s=e.top-t.collisionPosition.marginTop,n=o-s,l=s+t.collisionHeight-a-o;t.collisionHeight>a?0<n&&l<=0?(i=e.top+n+t.collisionHeight-a-o,e.top+=n-i):e.top=0<l&&n<=0?o:l<n?o+a-t.collisionHeight:o:0<n?e.top+=n:0<l?e.top-=l:e.top=_(e.top-s,e.top)}},flip:{left:function(e,t){var i,r,o=t.within,a=o.offset.left+o.scrollLeft,s=o.width,n=o.isWindow?o.scrollLeft:o.offset.left,l=e.left-t.collisionPosition.marginLeft,d=l-n,c=l+t.collisionWidth-s-n,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,h="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];d<0?((i=e.left+u+h+p+t.collisionWidth-s-a)<0||j(d)>i)&&(e.left+=u+h+p):0<c&&((0<(r=e.left-t.collisionPosition.marginLeft+u+h+p-n)||c>j(r))&&(e.left+=u+h+p))},top:function(e,t){var i,r,o=t.within,a=o.offset.top+o.scrollTop,s=o.height,n=o.isWindow?o.scrollTop:o.offset.top,l=e.top-t.collisionPosition.marginTop,d=l-n,c=l+t.collisionHeight-s-n,u="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];d<0?((r=e.top+u+h+p+t.collisionHeight-s-a)<0||j(d)>r)&&(e.top+=u+h+p):0<c&&((0<(i=e.top-t.collisionPosition.marginTop+u+h+p-n)||c>j(i))&&(e.top+=u+h+p))}},flipfit:{left:function(){I.ui.position.flip.left.apply(this,arguments),I.ui.position.fit.left.apply(this,arguments)},top:function(){I.ui.position.flip.top.apply(this,arguments),I.ui.position.fit.top.apply(this,arguments)}}}}(),I.ui.position,I.extend(I.expr[":"],{data:I.expr.createPseudo?I.expr.createPseudo(function(t){return function(e){return!!I.data(e,t)}}):function(e,t,i){return!!I.data(e,i[3])}}),I.fn.extend({disableSelection:(i="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(i+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),I.ui.focusable=function(e,t){var i,r,o,a,s,n=e.nodeName.toLowerCase();return"area"===n?(r=(i=e.parentNode).name,!(!e.href||!r||"map"!==i.nodeName.toLowerCase())&&(0<(o=I("img[usemap='#"+r+"']")).length&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(n)?(a=!e.disabled)&&((s=I(e).closest("fieldset")[0])&&(a=!s.disabled)):a="a"===n&&e.href||t,a&&I(e).is(":visible")&&function(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}(I(e)))},I.extend(I.expr[":"],{focusable:function(e){return I.ui.focusable(e,null!=I.attr(e,"tabindex"))}}),I.ui.focusable,I.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):I(this[0].form)},I.ui.formResetMixin={_formResetHandler:function(){var t=I(this);setTimeout(function(){var e=t.data("ui-form-reset-instances");I.each(e,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var e=this.form.data("ui-form-reset-instances");e.splice(I.inArray(this,e),1),e.length?this.form.data("ui-form-reset-instances",e):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},I.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},I.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")}),I.fn.labels=function(){var e,t,i,r,o;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),(i=this.attr("id"))&&(o=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),t="label[for='"+I.ui.escapeSelector(i)+"']",r=r.add(o.find(t).addBack(t))),this.pushStack(r))},I.fn.scrollParent=function(e){var t=this.css("position"),i="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=I(this);return(!i||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&o.length?o:I(this[0].ownerDocument||document)},I.extend(I.expr[":"],{tabbable:function(e){var t=I.attr(e,"tabindex"),i=null!=t;return(!i||0<=t)&&I.ui.focusable(e,i)}}),I.fn.extend({uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&I(this).removeAttr("id")})}}),I.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var a=!1;I(document).on("mouseup",function(){a=!1}),I.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){return!0===I.data(e.target,t.widgetName+".preventClickEvent")?(I.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!a){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,i=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&I(e.target).closest(this.options.cancel).length;return i&&!r&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?e.preventDefault():(!0===I.data(e.target,this.widgetName+".preventClickEvent")&&I.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),a=!0)),!0}},_mouseMove:function(e){if(this._mouseMoved){if(I.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&I.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,a=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),I.ui.plugin={add:function(e,t,i){var r,o=I.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([t,i[r]])},call:function(e,t,i,r){var o,a=e.plugins[t];if(a&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;a.length>o;o++)e.options[a[o][0]]&&a[o][1].apply(e.element,i)}},I.ui.safeActiveElement=function(t){var i;try{i=t.activeElement}catch(e){i=t.body}return i||(i=t.body),i.nodeName||(i=t.body),i},I.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&I(e).trigger("blur")},I.widget("ui.draggable",I.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<I(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=I(this);return I("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=I.ui.safeActiveElement(this.document[0]);I(e.target).closest(t).length||I.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),I.ui.ddmanager&&(I.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===I(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),I.ui.ddmanager&&!t.dropBehaviour&&I.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),I.ui.ddmanager&&I.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new I.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",I.ui.ddmanager&&I.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,i=!1;return I.ui.ddmanager&&!this.options.dropBehaviour&&(i=I.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||I.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?I(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),I.ui.ddmanager&&I.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),I.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new I.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!I(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,i=I.isFunction(t.helper),r=i?I(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),I.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&I.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[I(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,I(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,I(window).scrollLeft()+I(window).width()-this.helperProportions.width-this.margins.left,I(window).scrollTop()+(I(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,I(o).width()-this.helperProportions.width-this.margins.left,(I(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),void((i=(t=I(r.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,r,o,a,s=this.options,n=this._isRootNode(this.scrollParent[0]),l=e.pageX,d=e.pageY;return n&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),i=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(d=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(d=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((d-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,d=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,a=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-s.grid[0]:a+s.grid[0]:a),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(d=this.originalPageY)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,i){return i=i||this._uiHash(),I.ui.plugin.call(this,e,[t,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),I.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),I.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,i){var r=I.extend({},e,{item:i.element});i.sortables=[],I(i.options.connectToSortable).each(function(){var e=I(this).sortable("instance");e&&!e.options.disabled&&(i.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,r))})},stop:function(t,e,i){var r=I.extend({},e,{item:i.element});i.cancelHelperRemoval=!1,I.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(i,r,o){I.each(o.sortables,function(){var e=!1,t=this;t.positionAbs=o.positionAbs,t.helperProportions=o.helperProportions,t.offset.click=o.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,I.each(o.sortables,function(){return this.positionAbs=o.positionAbs,this.helperProportions=o.helperProportions,this.offset.click=o.offset.click,this!==t&&this._intersectsWith(this.containerCache)&&I.contains(t.element[0],this.element[0])&&(e=!1),e})),e?(t.isOver||(t.isOver=1,o._parent=r.helper.parent(),t.currentItem=r.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return r.helper[0]},i.target=t.currentItem[0],t._mouseCapture(i,!0),t._mouseStart(i,!0,!0),t.offset.click.top=o.offset.click.top,t.offset.click.left=o.offset.click.left,t.offset.parent.left-=o.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=o.offset.parent.top-t.offset.parent.top,o._trigger("toSortable",i),o.dropped=t.element,I.each(o.sortables,function(){this.refreshPositions()}),o.currentItem=o.element,t.fromOutside=o),t.currentItem&&(t._mouseDrag(i),r.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",i,t._uiHash(t)),t._mouseStop(i,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),r.helper.appendTo(o._parent),o._refreshOffsets(i),r.position=o._generatePosition(i,!0),o._trigger("fromSortable",i),o.dropped=!1,I.each(o.sortables,function(){this.refreshPositions()}))})}}),I.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var r=I("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,t,i){var r=i.options;r._cursor&&I("body").css("cursor",r._cursor)}}),I.ui.plugin.add("draggable","opacity",{start:function(e,t,i){var r=I(t.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,t,i){var r=i.options;r._opacity&&I(t.helper).css("opacity",r._opacity)}}),I.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,t,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-e.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-e.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-I(s).scrollTop()<r.scrollSensitivity?o=I(s).scrollTop(I(s).scrollTop()-r.scrollSpeed):I(window).height()-(e.pageY-I(s).scrollTop())<r.scrollSensitivity&&(o=I(s).scrollTop(I(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-I(s).scrollLeft()<r.scrollSensitivity?o=I(s).scrollLeft(I(s).scrollLeft()-r.scrollSpeed):I(window).width()-(e.pageX-I(s).scrollLeft())<r.scrollSensitivity&&(o=I(s).scrollLeft(I(s).scrollLeft()+r.scrollSpeed)))),!1!==o&&I.ui.ddmanager&&!r.dropBehaviour&&I.ui.ddmanager.prepareOffsets(i,e)}}),I.ui.plugin.add("draggable","snap",{start:function(e,t,i){var r=i.options;i.snapElements=[],I(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=I(this),t=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,i){var r,o,a,s,n,l,d,c,u,h,p=i.options,f=p.snapTolerance,g=t.offset.left,m=g+i.helperProportions.width,v=t.offset.top,b=v+i.helperProportions.height;for(u=i.snapElements.length-1;0<=u;u--)l=(n=i.snapElements[u].left-i.margins.left)+i.snapElements[u].width,c=(d=i.snapElements[u].top-i.margins.top)+i.snapElements[u].height,m<n-f||l+f<g||b<d-f||c+f<v||!I.contains(i.snapElements[u].item.ownerDocument,i.snapElements[u].item)?(i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,I.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1):("inner"!==p.snapMode&&(r=f>=Math.abs(d-b),o=f>=Math.abs(c-v),a=f>=Math.abs(n-m),s=f>=Math.abs(l-g),r&&(t.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),o&&(t.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),a&&(t.position.left=i._convertPositionTo("relative",{top:0,left:n-i.helperProportions.width}).left),s&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),h=r||o||a||s,"outer"!==p.snapMode&&(r=f>=Math.abs(d-v),o=f>=Math.abs(c-b),a=f>=Math.abs(n-g),s=f>=Math.abs(l-m),r&&(t.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),o&&(t.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),a&&(t.position.left=i._convertPositionTo("relative",{top:0,left:n}).left),s&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[u].snapping&&(r||o||a||s||h)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,I.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=r||o||a||s||h)}}),I.ui.plugin.add("draggable","stack",{start:function(e,t,i){var r,o=i.options,a=I.makeArray(I(o.stack)).sort(function(e,t){return(parseInt(I(e).css("zIndex"),10)||0)-(parseInt(I(t).css("zIndex"),10)||0)});a.length&&(r=parseInt(I(a[0]).css("zIndex"),10)||0,I(a).each(function(e){I(this).css("zIndex",r+e)}),this.css("zIndex",r+a.length))}}),I.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){var r=I(t.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,t,i){var r=i.options;r._zIndex&&I(t.helper).css("zIndex",r._zIndex)}}),I.ui.draggable,I.widget("ui.resizable",I.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(e,t){if("hidden"===I(e).css("overflow"))return!1;var i=t&&"left"===t?"scrollLeft":"scrollTop",r=!1;return 0<e[i]||(e[i]=1,r=0<e[i],e[i]=0,r)},_create:function(){var e,t=this.options,i=this;this._addClass("ui-resizable"),I.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(I("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),t.autoHide&&I(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,t=function(e){I(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,t,i,r,o,a=this.options,s=this;if(this.handles=a.handles||(I(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=I(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},t=0;i.length>t;t++)r="ui-resizable-"+(e=I.trim(i[t])),o=I("<div>"),this._addClass(o,"ui-resizable-handle "+r),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var t,i,r,o;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=I(this.handles[t]),this._on(this.handles[t],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=I(this.handles[t],this.element),o=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(r,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var t,i,r=!1;for(t in this.handles)((i=I(this.handles[t])[0])===e.target||I.contains(i,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var t,i,r,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),o.containment&&(t+=I(o.containment).scrollLeft()||0,i+=I(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:t,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=I(".ui-resizable-"+this.axis).css("cursor"),I("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t,i,r=this.originalMousePosition,o=this.axis,a=e.pageX-r.left||0,s=e.pageY-r.top||0,n=this._change[o];return this._updatePrevProperties(),n&&(t=n.apply(this,[e,a,s]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),I.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,i,r,o,a,s,n,l=this.options,d=this;return this._helper&&(r=(i=(t=this._proportionallyResizeElements).length&&/textarea/i.test(t[0].nodeName))&&this._hasScroll(t[0],"left")?0:d.sizeDiff.height,o=i?0:d.sizeDiff.width,a={width:d.helper.width()-o,height:d.helper.height()-r},s=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,n=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null,l.animate||this.element.css(I.extend(a,{top:n,left:s})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!l.animate&&this._proportionallyResize()),I("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,r,o,a,s=this.options;a={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>o&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,n=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,d=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),s&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),a&&d&&(e.left=n-t.minWidth),r&&d&&(e.left=n-t.maxWidth),s&&c&&(e.top=l-t.minHeight),o&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(r[t])||0,i[t]+=parseFloat(o[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||I("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var r=this.originalSize;return{top:this.originalPosition.top+i,height:r.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return I.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return I.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return I.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return I.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){I.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),I.ui.plugin.add("resizable","animate",{stop:function(t){var i=I(this).resizable("instance"),e=i.options,r=i._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,s=o?0:i.sizeDiff.width,n={width:i.size.width-s,height:i.size.height-a},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,d=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(I.extend(n,d&&l?{top:d,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&I(r[0]).css({width:e.width,height:e.height}),i._updateCache(e),i._propagate("resize",t)}})}}),I.ui.plugin.add("resizable","containment",{start:function(){var i,r,e,t,o,a,s,n=I(this).resizable("instance"),l=n.options,d=n.element,c=l.containment,u=c instanceof I?c.get(0):/parent/.test(c)?d.parent().get(0):c;u&&(n.containerElement=I(u),/document/.test(c)||c===document?(n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:I(document),left:0,top:0,width:I(document).width(),height:I(document).height()||document.body.parentNode.scrollHeight}):(i=I(u),r=[],I(["Top","Right","Left","Bottom"]).each(function(e,t){r[e]=n._num(i.css("padding"+t))}),n.containerOffset=i.offset(),n.containerPosition=i.position(),n.containerSize={height:i.innerHeight()-r[3],width:i.innerWidth()-r[1]},e=n.containerOffset,t=n.containerSize.height,o=n.containerSize.width,a=n._hasScroll(u,"left")?u.scrollWidth:o,s=n._hasScroll(u)?u.scrollHeight:t,n.parentData={element:u,left:e.left,top:e.top,width:a,height:s}))},resize:function(e){var t,i,r,o,a=I(this).resizable("instance"),s=a.options,n=a.containerOffset,l=a.position,d=a._aspectRatio||e.shiftKey,c={top:0,left:0},u=a.containerElement,h=!0;u[0]!==document&&/static/.test(u.css("position"))&&(c=n),l.left<(a._helper?n.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-n.left:a.position.left-c.left),d&&(a.size.height=a.size.width/a.aspectRatio,h=!1),a.position.left=s.helper?n.left:0),l.top<(a._helper?n.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-n.top:a.position.top),d&&(a.size.width=a.size.height*a.aspectRatio,h=!1),a.position.top=a._helper?n.top:0),r=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),r&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),t=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-c.left:a.offset.left-n.left)),i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-c.top:a.offset.top-n.top)),t+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-t,d&&(a.size.height=a.size.width/a.aspectRatio,h=!1)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,d&&(a.size.width=a.size.height*a.aspectRatio,h=!1)),h||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=I(this).resizable("instance"),t=e.options,i=e.containerOffset,r=e.containerPosition,o=e.containerElement,a=I(e.helper),s=a.offset(),n=a.outerWidth()-e.sizeDiff.width,l=a.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(o.css("position"))&&I(this).css({left:s.left-r.left-i.left,width:n,height:l}),e._helper&&!t.animate&&/static/.test(o.css("position"))&&I(this).css({left:s.left-r.left-i.left,width:n,height:l})}}),I.ui.plugin.add("resizable","alsoResize",{start:function(){var e=I(this).resizable("instance").options;I(e.alsoResize).each(function(){var e=I(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var t=I(this).resizable("instance"),r=t.options,o=t.originalSize,a=t.originalPosition,s={height:t.size.height-o.height||0,width:t.size.width-o.width||0,top:t.position.top-a.top||0,left:t.position.left-a.left||0};I(r.alsoResize).each(function(){var e=I(this),r=I(this).data("ui-resizable-alsoresize"),o={},t=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];I.each(t,function(e,t){var i=(r[t]||0)+(s[t]||0);i&&0<=i&&(o[t]=i||null)}),e.css(o)})},stop:function(){I(this).removeData("ui-resizable-alsoresize")}}),I.ui.plugin.add("resizable","ghost",{start:function(){var e=I(this).resizable("instance"),t=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:t.height,width:t.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==I.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=I(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=I(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),I.ui.plugin.add("resizable","grid",{resize:function(){var e,t=I(this).resizable("instance"),i=t.options,r=t.size,o=t.originalSize,a=t.originalPosition,s=t.axis,n="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=n[0]||1,d=n[1]||1,c=Math.round((r.width-o.width)/l)*l,u=Math.round((r.height-o.height)/d)*d,h=o.width+c,p=o.height+u,f=i.maxWidth&&h>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=n,m&&(h+=l),v&&(p+=d),f&&(h-=l),g&&(p-=d),/^(se|s|e)$/.test(s)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.top=a.top-u):/^(sw)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.left=a.left-c):((p-d<=0||h-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<p-d?(t.size.height=p,t.position.top=a.top-u):(p=d-e.height,t.size.height=p,t.position.top=a.top+o.height-p),0<h-l?(t.size.width=h,t.position.left=a.left-c):(h=l-e.width,t.size.width=h,t.position.left=a.left+o.width-h))}}),I.ui.resizable,I.widget("ui.selectable",I.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var r=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){r.elementPos=I(r.element[0]).offset(),r.selectees=I(r.options.filter,r.element[0]),r._addClass(r.selectees,"ui-selectee"),r.selectees.each(function(){var e=I(this),t=e.offset(),i={left:t.left-r.elementPos.left,top:t.top-r.elementPos.top};I.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=I("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(i){var r=this,e=this.options;this.opos=[i.pageX,i.pageY],this.elementPos=I(this.element[0]).offset(),this.options.disabled||(this.selectees=I(e.filter,this.element[0]),this._trigger("start",i),I(e.appendTo).append(this.helper),this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=I.data(this,"selectable-item");e.startselected=!0,i.metaKey||i.ctrlKey||(r._removeClass(e.$element,"ui-selected"),e.selected=!1,r._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,r._trigger("unselecting",i,{unselecting:e.element}))}),I(i.target).parents().addBack().each(function(){var e,t=I.data(this,"selectable-item");return t?(e=!i.metaKey&&!i.ctrlKey||!t.$element.hasClass("ui-selected"),r._removeClass(t.$element,e?"ui-unselecting":"ui-selected")._addClass(t.$element,e?"ui-selecting":"ui-unselecting"),t.unselecting=!e,t.selecting=e,(t.selected=e)?r._trigger("selecting",i,{selecting:t.element}):r._trigger("unselecting",i,{unselecting:t.element}),!1):void 0}))},_mouseDrag:function(r){if(this.dragged=!0,!this.options.disabled){var e,o=this,a=this.options,s=this.opos[0],n=this.opos[1],l=r.pageX,d=r.pageY;return l<s&&(e=l,l=s,s=e),d<n&&(e=d,d=n,n=e),this.helper.css({left:s,top:n,width:l-s,height:d-n}),this.selectees.each(function(){var e=I.data(this,"selectable-item"),t=!1,i={};e&&e.element!==o.element[0]&&(i.left=e.left+o.elementPos.left,i.right=e.right+o.elementPos.left,i.top=e.top+o.elementPos.top,i.bottom=e.bottom+o.elementPos.top,"touch"===a.tolerance?t=!(i.left>l||s>i.right||i.top>d||n>i.bottom):"fit"===a.tolerance&&(t=i.left>s&&l>i.right&&i.top>n&&d>i.bottom),t?(e.selected&&(o._removeClass(e.$element,"ui-selected"),e.selected=!1),e.unselecting&&(o._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1),e.selecting||(o._addClass(e.$element,"ui-selecting"),e.selecting=!0,o._trigger("selecting",r,{selecting:e.element}))):(e.selecting&&((r.metaKey||r.ctrlKey)&&e.startselected?(o._removeClass(e.$element,"ui-selecting"),e.selecting=!1,o._addClass(e.$element,"ui-selected"),e.selected=!0):(o._removeClass(e.$element,"ui-selecting"),e.selecting=!1,e.startselected&&(o._addClass(e.$element,"ui-unselecting"),e.unselecting=!0),o._trigger("unselecting",r,{unselecting:e.element}))),e.selected&&(r.metaKey||r.ctrlKey||e.startselected||(o._removeClass(e.$element,"ui-selected"),e.selected=!1,o._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,o._trigger("unselecting",r,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,I(".ui-unselecting",this.element[0]).each(function(){var e=I.data(this,"selectable-item");i._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1,e.startselected=!1,i._trigger("unselected",t,{unselected:e.element})}),I(".ui-selecting",this.element[0]).each(function(){var e=I.data(this,"selectable-item");i._removeClass(e.$element,"ui-selecting")._addClass(e.$element,"ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,i._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),I.widget("ui.sortable",I.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return t<=e&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),I.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var i=null,r=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),I(e.target).parents().each(function(){return I.data(this,o.widgetName+"-item")===o?(i=I(this),!1):void 0}),I.data(e.target,o.widgetName+"-item")===o&&(i=I(e.target)),!!i&&(!(this.options.handle&&!t&&(I(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(r=!0)}),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,t,i){var r,o,a=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},I.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=I("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;0<=r;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return I.ui.ddmanager&&(I.ui.ddmanager.current=this),I.ui.ddmanager&&!a.dropBehaviour&&I.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),!1!==s&&I.ui.ddmanager&&!a.dropBehaviour&&I.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(r=(i=this.items[t]).item[0],(o=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!I.contains(this.placeholder[0],r)&&("semi-dynamic"!==this.options.type||!I.contains(this.element[0],r))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),I.ui.ddmanager&&I.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(I.ui.ddmanager&&!this.options.dropBehaviour&&I.ui.ddmanager.drop(this,e),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,I(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new I.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),I.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?I(this.domPosition.prev).after(this.currentItem):I(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},I(e).each(function(){var e=(I(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(I(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,r=this.positionAbs.top,o=r+this.helperProportions.height,a=e.left,s=a+e.width,n=e.top,l=n+e.height,d=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||n<r+d&&r+d<l,h="y"===this.options.axis||a<t+c&&t+c<s,p=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&s>i-this.helperProportions.width/2&&r+this.helperProportions.height/2>n&&l>o-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t,i,r="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!!(r&&o)&&(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){function t(){s.push(this)}var i,r,o,a,s=[],n=[],l=this._connectWith();if(l&&e)for(i=l.length-1;0<=i;i--)for(r=(o=I(l[i],this.document[0])).length-1;0<=r;r--)(a=I.data(o[r],this.widgetFullName))&&a!==this&&!a.options.disabled&&n.push([I.isFunction(a.options.items)?a.options.items.call(a.element):I(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(n.push([I.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):I(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=n.length-1;0<=i;i--)n[i][0].each(t);return I(s)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=I.grep(this.items,function(e){for(var t=0;i.length>t;t++)if(i[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,i,r,o,a,s,n,l,d=this.items,c=[[I.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):I(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(t=u.length-1;0<=t;t--)for(i=(r=I(u[t],this.document[0])).length-1;0<=i;i--)(o=I.data(r[i],this.widgetFullName))&&o!==this&&!o.options.disabled&&(c.push([I.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):I(o.options.items,o.element),o]),this.containers.push(o));for(t=c.length-1;0<=t;t--)for(a=c[t][1],i=0,l=(s=c[t][0]).length;i<l;i++)(n=I(s[i])).data(this.widgetName+"-item",a),d.push({item:n,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,i,r,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(i=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?I(this.options.toleranceElement,i.item):i.item,e||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)o=this.containers[t].element.offset(),this.containers[t].containerCache.left=o.left,this.containers[t].containerCache.top=o.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(i){var r,o=(i=i||this).options;o.placeholder&&o.placeholder.constructor!==String||(r=o.placeholder,o.placeholder={element:function(){var e=i.currentItem[0].nodeName.toLowerCase(),t=I("<"+e+">",i.document[0]);return i._addClass(t,"ui-sortable-placeholder",r||i.currentItem[0].className)._removeClass(t,"ui-sortable-helper"),"tbody"===e?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),I("<tr>",i.document[0]).appendTo(t)):"tr"===e?i._createTrPlaceholder(i.currentItem,t):"img"===e&&t.attr("src",i.currentItem.attr("src")),r||t.css("visibility","hidden"),t},update:function(e,t){(!r||o.forcePlaceholderSize)&&(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=I(o.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),o.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(e,t){var i=this;e.children().each(function(){I("<td>&#160;</td>",i.document[0]).attr("colspan",I(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){var t,i,r,o,a,s,n,l,d,c,u=null,h=null;for(t=this.containers.length-1;0<=t;t--)if(!I.contains(this.currentItem[0],this.containers[t].element[0]))if(this._intersectsWith(this.containers[t].containerCache)){if(u&&I.contains(this.containers[t].element[0],u.element[0]))continue;u=this.containers[t],h=t}else this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",e,this._uiHash(this)),this.containers[t].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",e,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(r=1e4,o=null,a=(d=u.floating||this._isFloating(this.currentItem))?"left":"top",s=d?"width":"height",c=d?"pageX":"pageY",i=this.items.length-1;0<=i;i--)I.contains(this.containers[h].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(n=this.items[i].item.offset()[a],l=!1,e[c]-n>this.items[i][s]/2&&(l=!0),r>Math.abs(e[c]-n)&&(r=Math.abs(e[c]-n),o=this.items[i],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[h].element,!0),this._trigger("change",e,this._uiHash()),this.containers[h]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",e,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(e){var t=this.options,i=I.isFunction(t.helper)?I(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||I("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||t.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||t.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),I.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&I.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&I.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=I(r.containment)[0],t=I(r.containment).offset(),i="hidden"!==I(e).css("overflow"),this.containment=[t.left+(parseInt(I(e).css("borderLeftWidth"),10)||0)+(parseInt(I(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(I(e).css("borderTopWidth"),10)||0)+(parseInt(I(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(I(e).css("borderLeftWidth"),10)||0)-(parseInt(I(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(I(e).css("borderTopWidth"),10)||0)-(parseInt(I(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&I.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(e){var t,i,r=this.options,o=e.pageX,a=e.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&I.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(t=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-r.grid[1]:t+r.grid[1]:t,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_rearrange:function(e,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function i(t,i,r){return function(e){r._trigger(t,e,i._uiHash(i))}}this.reverting=!1;var r,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;0<=r;r--)t||o.push(i("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(o.push(i("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;o.length>r;r++)o[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===I.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||I([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}});var s,l=/ui-corner-([a-z]){2,6}/g;I.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var s=this,n=[];I.each(this.options.items,function(o,e){var t,a={};return e?"controlgroupLabel"===o?((t=s.element.find(e)).each(function(){var e=I(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),s._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(t.get()))):void(I.fn[o]&&(a=s["_"+o+"Options"]?s["_"+o+"Options"]("middle"):{classes:{}},s.element.find(e).each(function(){var e=I(this),t=e[o]("instance"),i=I.widget.extend({},a);if("button"!==o||!e.parent(".ui-spinner").length){t||(t=e[o]()[o]("instance")),t&&(i.classes=s._resolveClassesValues(i.classes,t)),e[o](i);var r=e[o]("widget");I.data(r[0],"ui-controlgroup-data",t||e[o]("instance")),n.push(r[0])}}))):void 0}),this.childWidgets=I(I.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=I(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,r={classes:{}};return r.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],r},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,r){var o={};return I.each(i,function(e){var t=r.options.classes[e]||"";t=I.trim(t.replace(l,"")),o[e]=(t+" "+i[e]).replace(/\s+/g," ")}),o},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var o,a=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,this.options.onlyVisible&&(o=o.filter(":visible")),o.length&&(I.each(["first","last"],function(e,t){var i=o[t]().data("ui-controlgroup-data");if(i&&a["_"+i.widgetName+"Options"]){var r=a["_"+i.widgetName+"Options"](1===o.length?"only":t);r.classes=a._resolveClassesValues(r.classes,i),i.element[i.widgetName](r)}else a._updateCornerClass(o[t](),t)}),this._callChildMethod("refresh"))}}),I.widget("ui.checkboxradio",[I.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var e,t,i=this,r=this._super()||{};return this._readType(),t=this.element.labels(),this.label=I(t[t.length-1]),this.label.length||I.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?I(this).text():this.outerHTML}),this.originalLabel&&(r.label=this.originalLabel),null!=(e=this.element[0].disabled)&&(r.disabled=e),r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var e=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===e&&/radio|checkbox/.test(this.type)||I.error("Can't create checkboxradio on element.nodeName="+e+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var e=this.element[0].name,t="input[name='"+I.ui.escapeSelector(e)+"']";return e?(this.form.length?I(this.form[0].elements).filter(t):I(t).filter(function(){return 0===I(this).form().length})).not(this.element):I([])},_toggleClasses:function(){var e=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",e)._toggleClass(this.icon,null,"ui-icon-blank",!e),"radio"===this.type&&this._getRadioGroup().each(function(){var e=I(this).checkboxradio("instance");e&&e._removeClass(e.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){return"label"!==e||t?(this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()):void 0},_updateIcon:function(e){var t="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=I("<span>"),this.iconSpace=I("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(t+=e?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,e?"ui-icon-blank":"ui-icon-check")):t+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",t),e||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),I.ui.checkboxradio,I.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===I.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,t){var i="iconPosition"!==e,r=i?this.options.iconPosition:t,o="top"===r||"bottom"===r;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=I("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,t),this._attachIcon(r),o?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=I("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,i=void 0===e.icon?this.options.icon:e.icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),(this.element[0].disabled=t)&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==I.uiBackCompat&&(I.widget("ui.button",I.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),I.fn.button=(s=I.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?s.apply(this,arguments):(I.ui.checkboxradio||I.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),I.fn.buttonset=function(){return I.ui.controlgroup||I.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),I.ui.button,I.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=I(this).css(e).offset().top;t<0&&I(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&I.fn.draggable&&this._makeDraggable(),this.options.resizable&&I.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?I(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:I.noop,enable:I.noop,close:function(e){var t=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||I.ui.safeBlur(I.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){t._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+I(this).css("z-index")}).get(),o=Math.max.apply(null,r);return o>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",o+1),i=!0),i&&!t&&this._trigger("focus",e),i},open:function(){var e=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=I(I.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(e){function t(){var e=I.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||I.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),t.call(this),this._delay(t)},_createWrapper:function(){this.uiDialog=I("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===I.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===I.ui.keyCode.TAB&&!e.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),i=t.filter(":first"),r=t.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){r.trigger("focus")}),e.preventDefault()):(this._delay(function(){i.trigger("focus")}),e.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=I("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){I(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=I("<button type='button'></button>").button({label:I("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=I("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=I("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=I("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,e=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),I.isEmptyObject(e)||I.isArray(e)&&!e.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(I.each(e,function(e,t){var i,r;t=I.isFunction(t)?{click:t,text:e}:t,t=I.extend({type:"button"},t),i=t.click,r={icon:t.icon,iconPosition:t.iconPosition,showLabel:t.showLabel,icons:t.icons,text:t.text},delete t.click,delete t.icon,delete t.iconPosition,delete t.showLabel,delete t.icons,"boolean"==typeof t.text&&delete t.text,I("<button></button>",t).button(r).appendTo(o.uiButtonSet).on("click",function(){i.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function o(e){return{position:e.position,offset:e.offset}}var a=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){a._addClass(I(this),"ui-dialog-dragging"),a._blockFrames(),a._trigger("dragStart",e,o(t))},drag:function(e,t){a._trigger("drag",e,o(t))},stop:function(e,t){var i=t.offset.left-a.document.scrollLeft(),r=t.offset.top-a.document.scrollTop();s.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=r?"+":"")+r,of:a.window},a._removeClass(I(this),"ui-dialog-dragging"),a._unblockFrames(),a._trigger("dragStop",e,o(t))}})},_makeResizable:function(){function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var s=this,n=this.options,e=n.resizable,t=this.uiDialog.css("position"),i="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:i,start:function(e,t){s._addClass(I(this),"ui-dialog-resizing"),s._blockFrames(),s._trigger("resizeStart",e,a(t))},resize:function(e,t){s._trigger("resize",e,a(t))},stop:function(e,t){var i=s.uiDialog.offset(),r=i.left-s.document.scrollLeft(),o=i.top-s.document.scrollTop();n.height=s.uiDialog.height(),n.width=s.uiDialog.width(),n.position={my:"left top",at:"left"+(0<=r?"+":"")+r+" top"+(0<=o?"+":"")+o,of:s.window},s._removeClass(I(this),"ui-dialog-resizing"),s._unblockFrames(),s._trigger("resizeStop",e,a(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=I(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=I.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var i=this,r=!1,o={};I.each(e,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(r=!0),e in i.resizableRelatedOptions&&(o[e]=t)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,r,o=this.uiDialog;"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:I("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((i=o.is(":data(ui-draggable)"))&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((r=o.is(":data(ui-resizable)"))&&!t&&o.resizable("destroy"),r&&"string"==typeof t&&o.resizable("option","handles",t),r||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),i="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=I(this);return I("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!I(e.target).closest(".ui-dialog").length||!!I(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=I("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==I.uiBackCompat&&I.widget("ui.dialog",I.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),I.ui.dialog}),function(d){d.widget("ui.multiselect",{_init:function(){this.element.hide(),this.id=this.element.attr("id"),this.container=d('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element),this.count=0,this.selectedContainer=d('<div class="selected"></div>').appendTo(this.container),this.availableContainer=d('<div class="available"></div>').appendTo(this.container),this.selectedActions=d('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+d.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+d.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer),this.availableActions=d('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+d.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer),this.selectedList=d('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer),this.availableList=d('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var i=this;this.container.width(this.element.width()+1),this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation)),this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation))),this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1)),this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1)),this.options.animated||(this.options.show="show",this.options.hide="hide"),this._populateLists(this.element.find("option")),this.options.sortable&&d("ul.selected").sortable({placeholder:"ui-state-highlight",axis:"y",update:function(e,t){i.selectedList.find("li").each(function(){d(this).data("optionLink")&&d(this).data("optionLink").remove().appendTo(i.element)})},receive:function(e,t){t.item.data("optionLink").attr("selected",!0),i.count+=1,i._updateCount(),i.selectedList.children(".ui-draggable").each(function(){d(this).removeClass("ui-draggable"),d(this).data("optionLink",t.item.data("optionLink")),d(this).data("idx",t.item.data("idx")),i._applyItemState(d(this),!0)}),setTimeout(function(){t.item.remove()},1)}}),this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):d(".search").hide(),d(".remove-all").click(function(){return i._populateLists(i.element.find("option").removeAttr("selected")),!1}),d(".add-all").click(function(){return i._populateLists(i.element.find("option").attr("selected","selected")),!1})},destroy:function(){this.element.show(),this.container.remove(),d.widget.prototype.destroy.apply(this,arguments)},_populateLists:function(e){this.selectedList.children(".ui-element").remove(),this.availableList.children(".ui-element").remove(),this.count=0;var i=this;d(e.map(function(e){var t=i._getOptionNode(this).appendTo(this.selected?i.selectedList:i.availableList).show();return this.selected&&(i.count+=1),i._applyItemState(t,this.selected),t.data("idx",e),t[0]}));this._updateCount()},_updateCount:function(){this.selectedContainer.find("span.count").text(this.count+" "+d.ui.multiselect.locale.itemsCount)},_getOptionNode:function(e){e=d(e);var t=d('<li class="ui-state-default ui-element" title="'+e.text()+'"><span class="ui-icon"/><div class="ui-li-text">'+e.text()+'</div><a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();return t.data("optionLink",e),t},_cloneWithData:function(e){var t=e.clone();return t.data("optionLink",e.data("optionLink")),t.data("idx",e.data("idx")),t},_setSelected:function(e,t){if(e.data("optionLink").attr("selected",t),t){var i=this._cloneWithData(e);return e[this.options.hide](this.options.animated,function(){d(this).remove()}),i.appendTo(this.selectedList).hide()[this.options.show](this.options.animated),this._applyItemState(i,!0),i}var r=this.availableList.find("li"),o=this.options.nodeComparator,a=null,s=e.data("idx"),n=o(e,d(r[s]));if(n){for(;0<=s&&s<r.length;)if(0<n?s++:s--,n!=o(e,d(r[s]))){a=r[0<n?s:s+1];break}}else a=r[s];var l=this._cloneWithData(e);return a?l.insertBefore(d(a)):l.appendTo(this.availableList),e[this.options.hide](this.options.animated,function(){d(this).remove()}),l.hide()[this.options.show](this.options.animated),this._applyItemState(l,!1),l},_applyItemState:function(e,t){t?(this.options.sortable?e.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):e.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),e.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(e.find("a.action"))):(e.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),e.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(e.find("a.action"))),this._registerHoverEvents(e)},_filter:function(e){var t=d(this),i=e.children("li"),r=i.map(function(){return d(this).text().toLowerCase()}),o=d.trim(t.val().toLowerCase()),a=[];o?(i.hide(),r.each(function(e){-1<this.indexOf(o)&&a.push(e)}),d.each(a,function(){d(i[this]).show()})):i.show()},_registerHoverEvents:function(e){e.removeClass("ui-state-hover"),e.mouseover(function(){d(this).addClass("ui-state-hover")}),e.mouseout(function(){d(this).removeClass("ui-state-hover")})},_registerAddEvents:function(e){var t=this;e.click(function(){t._setSelected(d(this).parent(),!0);return t.count+=1,t._updateCount(),!1}).each(function(){d(this).parent().draggable({connectToSortable:"ul.selected",helper:function(){var e=t._cloneWithData(d(this)).width(d(this).width()-50);return e.width(d(this).width()),e},appendTo:".ui-multiselect",containment:".ui-multiselect",revert:"invalid"})})},_registerRemoveEvents:function(e){var t=this;e.click(function(){return t._setSelected(d(this).parent(),!1),t.count-=1,t._updateCount(),!1})},_registerSearchEvents:function(e){var t=this;e.focus(function(){d(this).addClass("ui-state-active")}).blur(function(){d(this).removeClass("ui-state-active")}).keypress(function(e){if(13==e.keyCode)return!1}).keyup(function(){t._filter.apply(this,[t.availableList])})}}),d.extend(d.ui.multiselect,{defaults:{sortable:!0,searchable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,nodeComparator:function(e,t){var i=e.text(),r=t.text();return i==r?0:i<r?-1:1}},locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})}(jQuery),function(t,i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return i(e,t.document)}):"object"==typeof module&&module.exports?module.exports=function(e,t){return e||(e=window),void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t,e.document),t}:i(jQuery,t.document)}("undefined"!=typeof window?window:this,function($,document){"use strict";var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){return e<11||13<e?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{};var jgrid=$.jgrid;jgrid.locales=jgrid.locales||{};var locales=jgrid.locales,COMPONENT_NAMES={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};(null==jgrid.defaults||$.isEmptyObject(locales)||void 0===locales["en-US"])&&(void 0===locales["en-US"]&&$.extend(!0,jgrid,{locales:{"en-US":englishLanguageDefaults}}),jgrid.defaults=jgrid.defaults||{},void 0===jgrid.defaults.locale&&(jgrid.defaults.locale="en-US")),jgrid.defaults=jgrid.defaults||{};var defaults=jgrid.defaults;$.extend(!0,jgrid,{version:"4.15.4",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-caret-1-sw",openRtl:"ui-icon-caret-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui ui-menu ui-widget ui-widget-content ui-corner-all",menuItem:"ui-menu-item",menuItemButton:"ui-corner-all",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"ui-corner-all",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"d-none",closeButton:"btn btn-xs btn-outline-primary",fmButton:"btn btn-outline-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-outline-primary",actionsDiv:"",actionsButton:"btn btn-xs btn-outline-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"dropdown-item",operButton:"btn btn-xs btn-outline-secondary",clearButton:"btn btn-xs btn-outline-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldEncodePostedData:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldDecodePostedData:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},clearArray:function(e){for(;0<e.length;)e.pop()},format:function(e){var i=$.makeArray(arguments).slice(1);return null==e&&(e=""),e.replace(/\{(\d+)\}/g,function(e,t){return i[t]})},template:function(e){var o,a=$.makeArray(arguments).slice(1),s=a.length;return null==e&&(e=""),e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(e,t){var i,r;if(!isNaN(parseInt(t,10)))return a[parseInt(t,10)];for(o=0;o<s;o++)if($.isArray(a[o]))for(r=(i=a[o]).length;r--;)if(t===i[r].nm)return i[r].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName?null!=(e=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&3===e.length&&(t=parseFloat(e[2]||-1)):"Netscape"===navigator.appName&&null!=(e=/rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&2===e.length&&(t=parseFloat(e[1]||-1)),t},fixMaxHeightOfDiv:function(e){return"Microsoft Internet Explorer"===navigator.appName?Math.min(e,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(e,17895696):e},getRelativeRect:function(e){var t,i,r=e instanceof $&&0<e.length?e[0]:e,o=$(r).outerHeight(),a=$(this).closest(".ui-jqgrid")[0];return a?(t=null!=r.getBoundingClientRect?r.getBoundingClientRect():$(r).offset(),i=null!=a.getBoundingClientRect?a.getBoundingClientRect():$(a).offset(),{top:t.top+o-i.top,left:t.left-i.left}):{top:0,left:0}},getCellIndex:function(e){var t=$(e);return t.is("tr")?-1:null==(t=(t.is("td")||t.is("th")?t:t.closest("td,th"))[0])?-1:jgrid.msie?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(e){return(e=String(e))?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/"/g,"'"):"":e},stripPref:function(e,t){var i=$.type(e);return"string"!==i&&"number"!==i||(t=""!==(e=String(e))?String(t).replace(String(e),""):t),t},getRes:function(e,t){var i,r=t.split("."),o=r.length;if(null!=e){for(i=0;i<o;i++){if(!r[i])return null;if(void 0===(e=e[r[i]]))break;if("string"==typeof e)return e}return e}},parseDate:function(e,t,i,r){var o,a,s,n=0,l=0,d="string"==typeof t?t.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,c=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},u={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};if(void 0===(r=function(e,t){var i,r,o=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],a=t||{},s=(jgrid.formatter||{}).date||{},n=((locales[(e||$.jgrid.defaults).locale]||{}).formatter||{}).date,l=o.length,d={};for(i=0;i<l;i++)void 0!==a[r=o[i]]?d[r]=a[r]:void 0!==s[r]?d[r]=s[r]:void 0!==n[r]&&(d[r]=n[r]);return d}(this.p,r)).parseRe&&(r.parseRe=/[#%\\\/:_;.,\t\s\-]/),r.masks.hasOwnProperty(e)&&(e=r.masks[e]),t&&null!=t)if(isNaN(t)||"u"!==String(e).toLowerCase())if(isNaN(t)||"u1000"!==String(e).toLowerCase())if(t.constructor===Date)n=t;else if(null!==d)n=new Date(parseInt(d[1],10)),d[3]&&(l=60*Number(d[5])+Number(d[6]),l*="-"===d[4]?1:-1,l-=n.getTimezoneOffset(),n.setTime(Number(Number(n)+60*l*1e3)));else{for("ISO8601Long"===r.srcformat&&"Z"===t.charAt(t.length-1)&&(l-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),a=0,s=Math.min(e.length,t.length);a<s;a++){switch(e[a]){case"M":-1!==(o=$.inArray(t[a],r.monthNames))&&o<12&&(t[a]=o+1,u.m=t[a]);break;case"F":-1!==(o=$.inArray(t[a],r.monthNames,12))&&11<o&&(t[a]=o+1-12,u.m=t[a]);break;case"n":u.m=parseInt(t[a],10);break;case"j":u.d=parseInt(t[a],10);break;case"g":u.h=parseInt(t[a],10);break;case"a":-1!==(o=$.inArray(t[a],r.AmPm))&&o<2&&t[a]===r.AmPm[o]&&(t[a]=o,u.h=h(t[a],u.h));break;case"A":-1!==(o=$.inArray(t[a],r.AmPm))&&1<o&&t[a]===r.AmPm[o]&&(t[a]=o-2,u.h=h(t[a],u.h))}void 0!==t[a]&&(u[e[a].toLowerCase()]=parseInt(t[a],10))}if(u.f&&(u.m=u.f),0===u.m&&0===u.y&&0===u.d)return"&#160;";u.m=parseInt(u.m,10)-1;var p=u.y;70<=p&&p<=99?u.y=1900+u.y:0<=p&&p<=69&&(u.y=2e3+u.y),n=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u),0!==l&&n.setTime(Number(Number(n)+60*l*1e3))}else n=new Date(parseFloat(t));else n=new Date(1e3*parseFloat(t));else n=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);if(r.userLocalTime&&0===l&&0!==(l-=(new Date).getTimezoneOffset())&&n.setTime(Number(Number(n)+60*l*1e3)),void 0===i)return n;if(r.masks.hasOwnProperty(i)?i=r.masks[i]:i||(i="Y-m-d"),"u1000"===i.toLowerCase())return n.getTime();var f=n.getHours(),g=n.getMinutes(),m=n.getDate(),v=n.getMonth()+1,b=n.getTimezoneOffset(),y=n.getSeconds(),w=n.getMilliseconds(),x=n.getDay(),C=n.getFullYear(),_=(x+6)%7+1,j=(new Date(C,v-1,m)-new Date(C,0,1))/864e5,I=_<5?Math.floor((j+_-1)/7)+1:Math.floor((j+_-1)/7)||((new Date(C-1,0,1).getDay()+6)%7<4?53:52),S={d:c(m),D:r.dayNames[x],j:m,l:r.dayNames[x+7],N:_,S:r.S(m),w:x,z:j,W:I,F:r.monthNames[v-1+12],m:c(v),M:r.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:C,y:String(C).substring(2),a:f<12?r.AmPm[0]:r.AmPm[1],A:f<12?r.AmPm[2]:r.AmPm[3],B:"?",g:f%12||12,G:f,h:c(f%12||12),H:c(f),i:c(g),s:c(y),u:w,e:"?",I:"?",O:(0<b?"-":"+")+c(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),P:"?",T:(String(n).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g)||[""]).pop().replace(/[^\-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(n/1e3)};return i.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return S.hasOwnProperty(e)?S[e]:e.substring(1)})},parseDateToNumber:function(e,t){var i=jgrid.parseDate.call(this,e,t);return i instanceof Date?i.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){if(null==this.p||!this.p.id)return"";var t=this.p.id;switch(e){case COMPONENT_NAMES.GRID:return t;case COMPONENT_NAMES.GRID_BOX_DIV:return"gbox_"+t;case COMPONENT_NAMES.GRID_VIEW_DIV:return"gview_"+t;case COMPONENT_NAMES.DIALOG_ALERT_DIV:return"alertmod_"+t;case COMPONENT_NAMES.COLUMN_RESIZER_DIV:return"rs_m"+t;case COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+t;case COMPONENT_NAMES.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){var t=jgrid.getGridComponentId.call(this,e);return t?"#"+jgrid.jqID(t):""},isHTMLElement:function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:null!=e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},getGridComponent:function(e,t){var i;if(t instanceof $||0<t.length)i=t[0];else{if(!jgrid.isHTMLElement(t))return $();t=$(i=t)}switch(e){case COMPONENT_NAMES.BODY_TABLE:return t.hasClass("ui-jqgrid-bdiv")?t.children("div").children(".ui-jqgrid-btable"):$();case COMPONENT_NAMES.HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children("div").children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children("div").children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.FROZEN_HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FROZEN_FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.BODY_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=i.grid?$(i.grid.bDiv):$();case COMPONENT_NAMES.HEADER_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=i.grid?$(i.grid.hDiv):$();case COMPONENT_NAMES.FOOTER_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=i.grid?$(i.grid.sDiv):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var e=this.grid;if(e){var i=this.p,r=e.bDiv,t=function(e){var t=$(e).children("div").first();t.css(t.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",i.scrollOffset),e.scrollLeft=r.scrollLeft};0<$(r).width()&&(i.scrollOffset=r.offsetWidth-r.clientWidth,t(e.hDiv),e.sDiv&&t(e.sDiv))}},mergeCssClasses:function(){var e,t,i,r,o=$.makeArray(arguments),a={},s=[];for(e=0;e<o.length;e++)for(i=String(o[e]).replace(/[\t\r\n\f]/g," ").split(" "),t=0;t<i.length;t++)""===(r=i[t])||a.hasOwnProperty(r)||(a[r]=!0,s.push(r));return s.join(" ")},hasOneFromClasses:function(e,t){var i,r=$(e),o=String(t).replace(/[\t\r\n\f]/g," ").split(" "),a=o.length;for(i=0;i<a;i++)if(r.hasClass(o[i]))return!0;return!1},hasAllClasses:function(e,t){var i,r=$(e),o=String(t).replace(/[\t\r\n\f]/g," ").split(" "),a=o.length;for(i=0;i<a;i++)if(!r.hasClass(o[i]))return!1;return!0},detectRowEditing:function(e){return this.grid&&null!=this.p&&null!=this.p.editingInfo&&null!=this.p.editingInfo[e]?this.p.editingInfo[e]:null},getCell:function(e,t){var i,r,o=this.grid,a=this.p;return o&&a?((e instanceof $||0<e.length)&&(e=e[0]),("object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&e instanceof HTMLTableRowElement&&null!=e.cells?(r=$(e.cells[t]),null!=(i=o.fbRows)&&t<i[0].cells.length?r.add(i[e.rowIndex].cells[t]):r):$()):$()},getDataFieldOfCell:function(e,t){var i,r=this.p,o=jgrid.getCell.call(this,e,t);return r.treeGrid&&0<o.children("div.tree-wrap").length&&(o=o.children("span.cell-wrapperleaf,span.cell-wrapper")),r.colModel[t].autoResizable?0===(i=o.children("span."+r.autoResizing.wrapperClassName)).length&&(i=o):i=o,i},enumEditableCells:function(e,t,i){var r=this,o=r.grid,a=r.rows,s=r.p;if(null==o||null==a||null==s||null==e||null==e.rowIndex||!e.id||!$.isFunction(i))return null;var n,l,d,c,u,h,p,f,g,m,v,b=s.colModel,y=b.length,w=e.rowIndex,x=o.fbRows,C=null!=x,_=C?x[w]:null;for(C&&(e=r.rows[w]),n=0;n<y&&("cb"===(d=(l=b[n]).name)||"subgrid"===d||"rn"===d||(C&&!l.frozen&&(C=!1),g=(C?_:e).cells[n],(m=$(g)).hasClass("not-editable-cell")||(v=m.width(),!0===s.treeGrid&&d===s.ExpandColumn?(v-=m.children("div.tree-wrap").outerWidth(),m=m.children("span.cell-wrapperleaf,span.cell-wrapper").first()):v=0,u=stripPref(s.idPrefix,e.id),c={rowid:e.id,id:u,iCol:n,iRow:w,cmName:d,cm:l,mode:t,td:g,tr:e,trFrozen:_,dataElement:m[0],dataWidth:v},"local"===s.datatype&&(p=null!=(h=s._index[u])?s.data[h]:void 0)&&(c.item=p),l.edittype||(l.edittype="text"),((s.editingInfo[e.id]||{}).editable||{}).hasOwnProperty(d)?f=s.editingInfo[e.id].editable[d]:(f=l.editable,f=$.isFunction(f)?f.call(r,c):f),!0!==f&&"hidden"!==f||(c.editable=f,!1!==i.call(r,c)))));n++);},getEditedValue:function(e,t,i,r){var o,a,s,n,l,d,c=t.formatoptions||{},u=t.editoptions||{},h=u.custom_value,p="[name="+jgrid.jqID(t.name)+"]",f=this,g=$(f);if("hidden"===r||"readonly"===r)return $(f).jqGrid("getCell",e.closest("tr.jqgrow").attr("id"),t.name);switch(t.edittype){case"checkbox":a=["Yes","No"],"string"==typeof u.value&&(a=u.value.split(":")),o=e.find("input[type=checkbox]").is(":checked")?a[0]:a[1];break;case"text":case"password":case"textarea":case"button":o=(n=e.find("input"+p+",textarea"+p)).val(),"date"===n.prop("type")&&3===String(o).split("-").length&&(s=c.newformat||g.jqGrid("getGridRes","formatter.date.newformat"),o=jgrid.parseDate.call(f,"Y-m-d",o,s));break;case"select":n=e.find("select option:selected"),u.multiple?(l=[],d=[],n.each(function(){l.push($(this).val()),d.push($(this).text())}),o=l.join(","),i.text=d.join(",")):(o=n.val(),i.text=n.text()),i.value=o;break;case"custom":try{if(!$.isFunction(h))throw"e1";if(void 0===(o=h.call(f,e.find(".customelement"),"get")))throw"e2"}catch(e){var m,v=jgrid.info_dialog,b=function(e){g.jqGrid("getGridRes",e)};switch(String(e)){case"e1":m="function 'custom_value' "+b("edit.msg.nodefined");break;case"e2":break;default:m=e.message}v&&$.isFunction(v)?v.call(f,b("errors.errcap"),m,b("edit.bClose")):($.isFunction(defaults.fatalError)?defaults.fatalError:alert)(m)}break;default:o=e.find("*"+p).text()}return o},guid:1,uidPref:"jqg",randId:function(e){return(e||jgrid.uidPref)+jgrid.guid++},getAccessor:function(e,t){var i,r,o,a=[];if($.isFunction(t))return t(e);if(null!=e&&e.hasOwnProperty(t))return e[t];try{if("string"==typeof t&&(a=t.split(".")),o=a.length)for(i=e;null!=i&&o--;)r=a.shift(),i=i.hasOwnProperty(r)?i[r]:void 0}catch(e){}return i},getXmlData:function(e,t,i){var r="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;if($.isFunction(t))return t(e);if(r&&r[2])return r[1]?$(r[1],e).attr(r[2]):$(e).attr(r[2]);if(void 0!==e){var o=$(e).find(t);return i?o:0<o.length?$(o).text():void 0}},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),t=e.appendTo("body").find("td").width();return e.remove(),.1<Math.abs(t-5)},isCellClassHidden:function(e){if(null==e||""===e)return!1;var t=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(e||"")+"'></td></tr></table></div></div></div>"),i=t.appendTo("body").find("td").is(":hidden");return t.remove(),i},cell_width:!0,ajaxOptions:{},from:function(source){var context=this,QueryObject=function(d,q){var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],toString=Object.prototype.toString;if("object"!=typeof d||!d.push)throw"data provides is not an array";if(0<d.length&&"object"!=typeof d[0])throw"data items are not objects";return this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+" || '')"),_trim&&t.push(")"),_usecase||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"'),_usecase?e:e.toUpperCase()},this._funcLoop=function(i){var r=[];return $.each(_data,function(e,t){r.push(i(t))}),r},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_lastCommand(_lastField,e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,i){return void 0===i&&(i=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:("[object Date]"===toString.call(e)&&"[object Date]"===toString.call(t)||_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-i:t<e?i:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var i=_sorting[t].by,r=_sorting[t].dir,o=_sorting[t].type,a=_sorting[t].datefmt,s=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,i,r,o,a,s);t++;var n,l,d,c=self._getGroup(e,i,r,o,a),u=[];for(n=0;n<c.length;n++)for(d=self._doSort(c[n].items,t),l=0;l<d.length;l++)u.push(d[l]);return u},this._getOrder=function(e,i,t,r,o,a){var s,n,l,d=[],c=[],u="a"===t?1:-1;void 0===r&&(r="text"),l="float"===r||"number"===r||"currency"===r||"numeric"===r?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===r||"integer"===r?function(e){return null!=e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===r||"datetime"===r?function(e){return jgrid.parseDateToNumber.call(context,o,e)}:$.isFunction(r)?r:function(e){return e=null!=e?$.trim(String(e)):"",_usecase?e:e.toUpperCase()},$.each(e,function(e,t){void 0===(n=""!==i?jgrid.getAccessor(t,i):t)&&(n=""),n=l.call(context,n,t),c.push({vSort:n,data:t,index:e})}),$.isFunction(a)?c.sort(function(e,t){return a.call(context,e.vSort,t.vSort,u,e.data,t.data)}):c.sort(function(e,t){return self._compare(e.vSort,t.vSort,u)});for(var h=0,p=e.length;h<p;)s=c[h].index,d.push(e[s]),h++;return d},this._getGroup=function(e,r,t,i,o){var a=[],s=null,n=null;return $.each(self._getOrder(e,r,t,i,o),function(e,t){var i=jgrid.getAccessor(t,r);null==i&&(i=""),self._equals(n,i)||(n=i,null!==s&&a.push(s),s=self._group(r,i)),s.items.push(t)}),null!==s&&a.push(s),a},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match||($.each(_data,function(){(function(){var localMath='(function (context) {\nvar yesObject = { 1: 1, x: 1, "true": 1, yes: 1, y: 1, on: 1 },noObject = { 0: 1, "false": 1, no: 1, n: 1, off: 1 },normilizeBoolean = function (v) {\nif (typeof v === "string") {\nif (noObject[v.toLowerCase()]) { return false; } else if (yesObject[v.toLowerCase()]) { return true; } }\nreturn !!v;\n},intFunc = function (jQuery, self) { return '+match+"; }; return intFunc.call(context.item, context.jQuery, context.context); }(this))";eval(localMath)&&results.push(this.item)}).call({item:this,jQuery:$,context:context})}),_data=results),self},this.data=function(){return _data},this.select=function(i){if(self.execute(),$.isFunction(i)){var r=[];return $.each(_data,function(e,t){r.push(i(t))}),r}return self._hasData()?(self._performSort(),_data):[]},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),0<_data.length)},this.andNot=function(e,t,i){return _negate=!_negate,self.and(e,t,i)},this.orNot=function(e,t,i){return _negate=!_negate,self.or(e,t,i)},this.not=function(e,t,i){return self.andNot(e,t,i)},this.and=function(e,t,i){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,i)},this.or=function(e,t,i){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,i)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,i,r,o){var a=t;void 0===i&&(i=null);var s=i,n=void 0===o.stype?"text":o.stype;if(null!==i)switch(n){case"int":case"integer":s=String(s).replace(_stripNum,""),s=isNaN(Number(s))||""===s?"0":Number(s),a="parseInt("+a+"||0,10)",s=String(parseInt(s,10));break;case"boolean":a="normilizeBoolean("+a+")",s="normilizeBoolean("+String(s)+")";break;case"float":case"number":case"currency":case"numeric":s=String(s).replace(_stripNum,""),s=isNaN(Number(s))||""===s?"0":Number(s),a="parseFloat("+a+"||0)",s=String(s);break;case"date":case"datetime":s=String(jgrid.parseDateToNumber.call(context,o.newfmt||"Y-m-d",s)),a='jQuery.jgrid.parseDateToNumber.call(self,"'+o.srcfmt+'",'+a+")";break;default:a=self._getStr(a),s=self._getStr('"'+self._toStr(s)+'"')}return self._append(a+" "+r+" "+s),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,i){return self._compareValues(self.equals,e,t,"==",i)},this.notEquals=function(e,t,i){return self._compareValues(self.equals,e,t,"!==",i)},this.isNull=function(e,t,i){return self._compareValues(self.equals,e,null,"===",i)},this.greater=function(e,t,i){return self._compareValues(self.greater,e,t,">",i)},this.less=function(e,t,i){return self._compareValues(self.less,e,t,"<",i)},this.greaterOrEquals=function(e,t,i){return self._compareValues(self.greaterOrEquals,e,t,">=",i)},this.lessOrEquals=function(e,t,i){return self._compareValues(self.lessOrEquals,e,t,"<=",i)},this.startsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return self._append(self._getStr(e)+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(t)+'"')),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return self._append(self._getStr(e)+".substr("+self._getStr(e)+".length-"+r+","+r+') == "'+self._toStr(t)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return self._append(self._getStr(e)+'.indexOf("'+self._toStr(t)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,i,r){return self._hasData()?self._getGroup(_data,e,t,i,r):null},this.orderBy=function(e,t,i,r,o){return null==i&&(i="text"),null==r&&(r="Y-m-d"),null==o&&(o=!1),"desc"!==(t=null==t?"a":$.trim(t.toString().toLowerCase()))&&"descending"!==t||(t="d"),"asc"!==t&&"ascending"!==t||(t="a"),_sorting.push({by:e,dir:t,type:i,datefmt:r,sfunc:o}),self},this.inSet=function(e,t,i){var r=void 0===t?null:t,o=void 0===i.stype?"text":i.stype;return r=self._getStr('"'+self._toStr(r)+'"'),"text"!==o?self._compareValues(self.equals,e,t,"==",i):(self._append("jQuery.inArray("+self._getStr(e)+","+r+".split('"+(context.p.inFilterSeparator||",")+"')) >= 0"),self._setCommand(self.inSet,e),self._resetNegate(),self)},this.custom=function(e,t,i){return self._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",iCol:self.p.iColByName["'+t+'"]>=0 ? self.p.iColByName["'+t+'"] : self.p.iPropByName["'+t+'"],isAddProp:self.p.iColByName["'+t+'"]<0,searchValue:"'+i+'"})'),self._setCommand(self.custom,t),self._resetNegate(),self},self};return new QueryObject(source,null)},serializeFeedback:function(e,t,i){var r,o=this;return o instanceof $&&0<o.length&&(o=o[0]),"string"==typeof i?i:"string"==typeof(r=$(o).triggerHandler(t,i))?r:(null!=r&&"object"==typeof r||(r=i),$.isFunction(e)?e.call(o,r):r)},fullBoolFeedback:function(e,t){var i=$.makeArray(arguments).slice(2),r=$(this).triggerHandler(t,i);if(r=!1!==r&&"stop"!==r,$.isFunction(e)){var o=e.apply(this,i);!1!==o&&"stop"!==o||(r=!1)}return r},feedback:function(e,t,i,r){var o=this;if(o instanceof $&&0<o.length&&(o=o[0]),null==e||"string"!=typeof r||r.length<2)return null;var a="on"===r.substring(0,2)?"jqGrid"+t+r.charAt(2).toUpperCase()+r.substring(3):"jqGrid"+t+r.charAt(0).toUpperCase()+r.substring(1),s=$.makeArray(arguments).slice(4),n=e[r+i];return s.unshift(a),s.unshift(n),jgrid.fullBoolFeedback.apply(o,s)},builderSortIcons:function(o){var a=this,s=a.p,n=$(a),l=n.jqGrid("getGuiStyles","states.disabled"),e=function(e){var t=s.colModel[o],i=null!=t&&$.isFunction(t.sortIconName)?t.sortIconName:s.sortIconName,r=$.isFunction(i)?i.call(a,{order:e,iCol:o,cm:t}):n.jqGrid("getIconRes","sort."+e);return jgrid.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+e,"horizontal"===s.viewsortcols[1]?"ui-i-"+e:"",l,r,"ui-sort-"+s.direction)};return"<span class='s-ico"+(s.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+e("asc")+"'></span><span class='"+e("desc")+"'></span></span>"},builderFmButon:function(e,t,i,r,o){var a=this.p,s=$(this),n=function(e){return s.jqGrid("getGuiStyles","dialog."+e)};return null==a?"":"<a id='"+e+"' class='"+jgrid.mergeCssClasses("fm-button",n("fmButton"),n("right"===o?"rightCorner":"left"===o?"leftCorner":"defaultCorner"),"right"===r?"fm-button-icon-right":"left"===r?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(i?"<span class='fm-button-icon "+(s.jqGrid("getIconRes",i)||i)+"'></span>":"")+(t?"<span class='fm-button-text'>"+t+"</span>":"")+"</a>"},convertOnSaveLocally:function(e,t,i,r,o,a){if(null==this.p)return e;if($.isFunction(t.convertOnSave))return t.convertOnSave.call(this,{newValue:e,cm:t,oldValue:i,id:r,item:o,iCol:a});if("boolean"!=typeof i&&"number"!=typeof i)return e;if("boolean"!=typeof i||"checkbox"!==t.edittype&&"checkbox"!==t.formatter)"number"!=typeof i||isNaN(e)||("number"===t.formatter||"currency"===t.formatter?e=parseFloat(e):"integer"===t.formatter&&(e=parseInt(e,10)));else{var s=String(e).toLowerCase(),n=null!=t.editoptions&&"string"==typeof t.editoptions.value?t.editoptions.value.split(":"):["yes","no"];0<=$.inArray(s,["1","true",n[0].toLowerCase()])?e=!0:0<=$.inArray(s,["0","false",n[1].toLowerCase()])&&(e=!1)}return e},parseDataToHtml:function(e,t,i,r,o,a,s){var n,l,d,c,u,h,p,f,g,m,v,b,y,w,x,C,_,j,I,S,D,F,k,R,O,q,N,G,T=this,E=T.p,P=$(T),A=!1,z=[],M=[],B=!0!==E.altRows||P.jqGrid("isBootstrapGuiStyle")?"":E.altclass,H=E.groupingView,L=!1,V=parseInt(E.rowNum,10),W=$.fn.jqGrid,U=!0===E.treeGrid&&-1<E.treeANode?T.rows[E.treeANode].rowIndex+1:T.rows.length,X=T.formatCol;for(U<=1&&(E.rowIndexes={}),("local"===E.datatype&&!E.deselectAfterSort||E.multiPageSelection)&&(A=!0),a&&(V*=a+1),n=0;n<Math.min(e,V);n++){for(u=t[n],h=i[n],p=null!=r?r[n]:h,d=((1===o?0:o)+n)%2==1?B:"",A?E.multiselect?(c=-1!==$.inArray(u,E.selarrrow))&&null===E.selrow&&(E.selrow=u):c=u===E.selrow:c=!1,f=z.length,z.push(""),l=0;l<E.colModel.length;l++)switch(g=E.colModel[l].name){case"rn":z.push((R=l,O=n,q=E.page,N=E.rowNum,void 0,G=(parseInt(q,10)-1)*parseInt(N,10)+1+O,"<td role='gridcell' class='"+W.getGuiStyles.call(P,"rowNum","jqgrid-rownum")+"' "+X(R,O,G,null,O,!0)+">"+G+"</td>"));break;case"cb":z.push((D=void 0,D="&nbsp;",F=!(F=void 0),k={rowid:_=u,iRow:I=n,iCol:j=l,data:h,checked:S=c},$.isFunction(E.hasMultiselectCheckBox)&&(F=E.hasMultiselectCheckBox.call(T,k)),F&&(D=$.isFunction(E.checkboxHtml)?E.checkboxHtml.call(T,k):"<input type='checkbox' id='jqg_"+E.id+"_"+_+"' class='cbox' name='jqg_"+E.id+"_"+_+"'"+(S?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+X(j,I,"",null,_,!0)+">"+D+"</td>"));break;case"subgrid":z.push(W.addSubGridCell.call(P,l,n+o,u,h));break;default:z.push((m=u,v=h[g],b=l,y=n+o,w=p,x=h,void 0,C=T.formatter(m,v,b,w,"add",x),"<td role='gridcell' "+X(b,y,C,w,m,x)+">"+C+"</td>"))}E.grouping&&(W.groupingPrepare&&!H._locgr&&W.groupingPrepare.call(P,h,n),L=$.isFunction(H.groupCollapse)?H.groupCollapse.call(T,{group:H.groups[H.groups.length-1],rowid:u,data:h}):H.groupCollapse),z[f]=T.constructTr(u,L,d,h,p,c),z.push("</tr>"),E.rowIndexes[u]=U,U++,E.grouping&&(M.push(z),z=[]),z.length>E.maxItemsToJoin&&(z=[z.join("")])}return E.grouping&&W.groupingRender&&(s&&(H._locgr=!0),z=[W.groupingRender.call(P,M,V)],jgrid.clearArray(M)),z},fillSelectOptions:function(e,t,i,r,o,a){var s,n,l,d,c,u,h,p,f=[],g=!1,m=function(e,t){if(0<t)return e};if(t){if("function"==typeof t&&(t=t()),"string"==typeof t)for(n=t.split(r),s=0;s<n.length;s++)2<(l=n[s].split(i)).length&&(l[1]=$.map(l,m).join(i)),f.push({value:l[0],innerHtml:l[1],selectValue:$.trim(l[0]),selectText:$.trim(l[1]),selected:!1}),""===l[0]&&(g=!0);else if("object"==typeof t)for(h in t)t.hasOwnProperty(h)&&f.push({value:h,innerHtml:t[h],selectValue:$.trim(h),selectText:$.trim(t[h]),selected:!1}),""===h&&(g=!0);if("string"==typeof a){for(p=o?$.map(a.split(","),function(e){return $.trim(e)}):[$.trim(a)],a=$.trim(a),s=0;s<f.length;s++)c=f[s],o||c.selectValue!==a||(u=c.selected=!0),o&&-1<$.inArray(c.selectValue,p)&&(u=c.selected=!0);if(!u)for(s=0;s<f.length;s++)c=f[s],o||c.selectText!==a||(c.selected=!0),o&&-1<$.inArray(c.selectText,p)&&(c.selected=!0)}for(s=0;s<f.length;s++)c=f[s],(d=document.createElement("option")).value=c.value,d.innerHTML=c.innerHtml,c.selected&&(d.selected=!0),e.appendChild(d);return g}},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)}});var clearArray=jgrid.clearArray,jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,mergeCssClasses=jgrid.mergeCssClasses,hasOneFromClasses=jgrid.hasOneFromClasses,feedback=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)};$.fn.jqGrid=function(Ue){var e,Xe=$.fn.jqGrid;if("string"==typeof Ue){if(!(e=Xe[Ue]))throw"jqGrid - No such method: "+Ue;return e.apply(this,$.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var e,t,j=this,f=$(j),J=$.isFunction,Z=$.isArray,I=$.extend,b=$.inArray,i=$.trim,S=$.each,g=Xe.setSelection,r=Xe.getGridRes,D=J(defaults.fatalError)?defaults.fatalError:alert,o=Ue.locale||defaults.locale||"en-US",a=null!=locales[o]&&"boolean"==typeof locales[o].isRTL&&locales[o].isRTL?"rtl":"ltr",s=Ue.iconSet||defaults.iconSet||("bootstrap"===(Ue.guiStyle||defaults.guiStyle)||"bootstrapPrimary"===(Ue.guiStyle||defaults.guiStyle)?"glyph":"jQueryUI"),n=Ue.guiStyle||defaults.guiStyle||"jQueryUI",F=function(e){return Xe.getIconRes.call(j,e)},k=function(e,t){return f.jqGrid("getGuiStyles",e,t)};null==Ue&&(Ue={datatype:"local"}),void 0!==Ue.datastr&&Z(Ue.datastr)&&(t=Ue.datastr,Ue.datastr=[]),void 0!==Ue.data&&(e=Ue.data,Ue.data=[]),null!=jgrid.formatter&&null!=jgrid.formatter.unused||D("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===Ue.datatype&&void 0!==Ue.dataType&&(Ue.datatype=Ue.dataType,delete Ue.dataType),void 0===Ue.mtype&&void 0!==Ue.type&&(Ue.mtype=Ue.type,delete Ue.type),j.p={iconSet:s};var ee=I(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],editingInfo:{},shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",selectOnContextMenu:!0,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:function(e,t,i){if("abort"!==t&&"abort"!==i){var r=e.getResponseHeader("Content-Type"),o=e.responseText||"",a=function(e){try{var t,i=$.parseJSON(e),r=[];for(t in i)i.hasOwnProperty(t)&&"StackTrace"!==t&&r.push(t+": "+i[t]);e=r.join("<br />")}catch(e){}return e};"text/html"===r?o=function(e){var t,i,r,o=document.createElement("div");for(r=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(e),o.innerHTML=null!=r&&2===r.length?r[1]:e,i=(t=o.getElementsByTagName("script")).length;i--;)t[i].parentNode.removeChild(t[i]);e=o.innerHTML;try{""===$.trim($(e).text())&&(e="")}catch(e){}return e}(o):"application/json"===r?o=a(o):"text/plain"===r&&(o=a(o)),500!==e.status&&0!==e.status&&(o=(t||i)+(i&&i!==t?": "+i:"")+" "+e.status+" "+e.statusText+(""!==o?"<hr />":"")+o),f.jqGrid("displayErrorMessage",o||t||i)}},loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",filters:"filters",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,resetPageAfterSort:!0,multiPageSelection:!1,selectAllMode:"filtered",scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!0,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:a,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:F("grouping.common"),plusicon:F("grouping.plus"),minusicon:F("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:s,guiStyle:n,locale:o,multiSort:!1,showSortOrder:!0,sortOrderPosition:"afterSortIcons",multiSortOrder:"lastClickedFirstSorted",maxSortColumns:3,treeIcons:{commonIconClass:F("treeGrid.common"),plusLtr:F("treeGrid.plusLtr"),plusRtl:F("treeGrid.plusRtl"),minus:F("treeGrid.minus"),leaf:F("treeGrid.leaf")}},defaults,{navOptions:I(!0,{commonIconClass:F("nav.common"),editicon:F("nav.edit"),addicon:F("nav.add"),delicon:F("nav.del"),searchicon:F("nav.search"),refreshicon:F("nav.refresh"),viewicon:F("nav.view"),saveicon:F("nav.save"),cancelicon:F("nav.cancel"),buttonicon:F("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:I(!0,{commonIconClass:F("actions.common"),editicon:F("actions.edit"),delicon:F("actions.del"),saveicon:F("actions.save"),cancelicon:F("actions.cancel")},jgrid.actionsNav||{}),formEditing:I(!0,{commonIconClass:F("form.common"),prevIcon:F("form.prev"),nextIcon:F("form.next"),saveicon:[!0,"left",F("form.save")],closeicon:[!0,"left",F("form.undo")]},jgrid.edit||{}),searching:I(!0,{commonIconClass:F("search.common"),findDialogIcon:F("search.search"),resetDialogIcon:F("search.reset"),queryDialogIcon:F("search.query")},jgrid.search||{}),formViewing:I(!0,{commonIconClass:F("form.common"),prevIcon:F("form.prev"),nextIcon:F("form.next"),closeicon:[!0,"left",F("form.cancel")]},jgrid.view||{}),formDeleting:I(!0,{commonIconClass:F("form.common"),delicon:[!0,"left",F("form.del")],cancelicon:[!0,"left",F("form.cancel")]},jgrid.del||{})},Ue||{}),R=function(e){return r.call(f,e)},O=function(e){var t=jgrid.getRes(ee,e);return void 0!==t?t:r.call(f,"defaults."+e)};if(ee.recordpos=ee.recordpos||("rtl"===ee.direction?"left":"right"),ee.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==ee.autoResizing.widthOfVisiblePartOfSortIcon?ee.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===ee.iconSet?13:12,ee.datatype=void 0!==ee.datatype?ee.datatype:void 0!==e||null==ee.url?"local":null!=ee.jsonReader&&"object"==typeof ee.jsonReader?"json":"xml",ee.jsonReader=ee.jsonReader||{},ee.url=ee.url||"",ee.cellsubmit=void 0!==ee.cellsubmit?ee.cellsubmit:void 0===ee.cellurl?"clientArray":"remote",ee.gridview=void 0!==ee.gridview?ee.gridview:null==ee.afterInsertRow,void 0!==e&&(ee.data=e,Ue.data=e),void 0!==t&&(ee.datastr=t,Ue.datastr=t),"TABLE"===j.tagName.toUpperCase())if(""===j.id&&f.attr("id",randId()),void 0!==document.documentMode&&document.documentMode<=5)D("Grid can not be used in this ('quirks') mode!");else{f.empty().attr("tabindex","0"),(j.p=ee).id=j.id,ee.idSel="#"+jqID(j.id),ee.gBoxId=getGridComponentId.call(j,COMPONENT_NAMES.GRID_BOX_DIV),ee.gBox=getGridComponentIdSelector.call(j,COMPONENT_NAMES.GRID_BOX_DIV),ee.gViewId=getGridComponentId.call(j,COMPONENT_NAMES.GRID_VIEW_DIV),ee.gView=getGridComponentIdSelector.call(j,COMPONENT_NAMES.GRID_VIEW_DIV),ee.rsId=getGridComponentId.call(j,COMPONENT_NAMES.COLUMN_RESIZER_DIV),ee.rs=getGridComponentIdSelector.call(j,COMPONENT_NAMES.COLUMN_RESIZER_DIV),ee.cbId=getGridComponentId.call(j,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX),ee.cb=getGridComponentIdSelector.call(j,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);var q=jgrid.fixScrollOffsetAndhBoxPadding,l=function(e){var t,i={},r=e.length;for(t=0;t<r;t++)i[e[t].name]=t;return i},d=function(){var e,t,i={},r=ee.colModel,o=r.length;for(e=0;e<o;e++)((t=r[e]).createColumnIndex||ee.createColumnIndex&&!1!==t.createColumnIndex||"select"===t.stype&&(t.searchoptions||{}).generateValue||"select"===t.edittype&&(t.editoptions||{}).generateValue)&&(i[r[e].name]={});return i},c=function(e){var t,i,r={},o=e.length;for(t=0;t<o;t++)r["string"==typeof(i=e[t])?i:i.name]=t;return r},te=function(){var e,t,i={};for(this.p.rowIndexes=i,t=0;t<this.rows.length;t++)e=this.rows[t],$(e).hasClass("jqgrow")&&(i[e.id]=e.rowIndex)},u=function(e){var t=$(this).data("pageX");t?(t=(t=String(t).split(";"))[t.length-1],$(this).data("pageX",t+";"+e.pageX)):$(this).data("pageX",e.pageX)},ie=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},re={headers:[],cols:[],footers:[],dragStart:function(e,t,i,r){var o=this,a=$(o.bDiv),s=a.closest(ee.gBox).offset(),n=r.offset().left+("rtl"===ee.direction?0:o.headers[e].width+(jgrid.cell_width?0:ie(ee.cellLayout,0))-2);o.resizing={idx:e,startX:n,sOL:n,moved:!1,delta:n-t.pageX},o.curGbox=$(ee.rs),o.curGbox.prependTo("body"),o.curGbox.css({display:"block",left:n,top:i[1]+s.top+1,height:i[2]}),o.curGbox.css("height",i[2]-(o.curGbox.outerHeight()-o.curGbox.height())+"px"),o.curGbox.data("idx",e),o.curGbox.data("delta",n-t.pageX),u.call(this.curGbox,t),feedback.call(getGridComponent(COMPONENT_NAMES.BODY_TABLE,a)[0],"resizeStart",t,e),document.onselectstart=function(){return!1},$(document).on("mousemove.jqGrid",function(e){if(re.resizing)return re.dragMove(e),!1}).on("mouseup.jqGrid"+ee.id,function(){if(re.resizing)return re.dragEnd(),!1})},dragMove:function(e){var t=this,i=t.resizing;if(i){var r,o,a=e.pageX+i.delta-i.startX,s=t.headers,n=s[i.idx],l="ltr"===ee.direction?n.width+a:n.width-a,d=((ee.colModel[i.idx]||{}).autoResizing||{}).minColWidth||ee.minResizingWidth;i.moved=!0,d<l&&(null==t.curGbox&&(t.curGbox=$(ee.rs)),t.curGbox.css({left:i.sOL+a}),!0===ee.forceFit?(r=s[i.idx+ee.nv],(o="ltr"===ee.direction?r.width-a:r.width+a)>ee.autoResizing.minColWidth&&(n.newWidth=l,r.newWidth=o)):(t.newWidth="ltr"===ee.direction?ee.tblwidth+a:ee.tblwidth-a,n.newWidth=l))}},resizeColumn:function(e,t,i){var r,o=this,a=o.headers,s=o.footers,n=a[e],l=n.newWidth||n.width,d=getGridComponent(COMPONENT_NAMES.BODY_TABLE,o.bDiv),c=getGridComponent(COMPONENT_NAMES.HEADER_TABLE,o.hDiv).children("thead").children("tr").first()[0].cells;l=parseInt(l,10),ee.colModel[e].width=l,n.width=l,c[e].style.width=l+"px",o.cols[e].style.width=l+"px",o.fbRows&&($(o.fbRows[0].cells[e]).css("width",l),$(getGridComponent(COMPONENT_NAMES.FROZEN_HEADER_TABLE,o.fhDiv)[0].rows[0].cells[e]).css("width",l),ee.footerrow&&$(getGridComponent(COMPONENT_NAMES.FROZEN_FOOTER_TABLE,o.fsDiv)[0].rows[0].cells[e]).css("width",l)),0<s.length&&(s[e].style.width=l+"px"),!0!==i&&q.call(d[0]),!0===ee.forceFit?(l=(r=a[e+ee.nv]).newWidth||r.width,r.width=l,c[e+ee.nv].style.width=l+"px",o.cols[e+ee.nv].style.width=l+"px",0<s.length&&(s[e+ee.nv].style.width=l+"px"),ee.colModel[e+ee.nv].width=l):(ee.tblwidth=o.newWidth||ee.tblwidth,!0!==i&&(o.hDiv.scrollLeft=o.bDiv.scrollLeft,ee.footerrow&&(o.sDiv.scrollLeft=o.bDiv.scrollLeft))),ee.autowidth||void 0!==ee.widthOrg&&"auto"!==ee.widthOrg&&"100%"!==ee.widthOrg||!0===i||Xe.setGridWidth.call(d,o.newWidth+ee.scrollOffset,!1),t||feedback.call(d[0],"resizeStop",l,e)},dragEnd:function(){var e=this;e.hDiv.style.cursor="default",e.resizing&&(null!==e.resizing&&!0===e.resizing.moved&&($(e.headers[e.resizing.idx].el).removeData("autoResized"),e.resizeColumn(e.resizing.idx,!1)),$(ee.rs).removeData("pageX"),e.resizing=!1,setTimeout(function(){$(ee.rs).css("display","none").prependTo(ee.gBox)},ee.doubleClickSensitivity)),e.curGbox=null,document.onselectstart=function(){return!0},$(document).off("mousemove.jqGrid mouseup.jqGrid"+ee.id)},populateVisible:function(){var e=this,t=$(e),i=e.grid,r=i.bDiv,o=$(r);i.timer&&clearTimeout(i.timer),i.timer=null;var a=o.height();if(a){var s,n;if(e.rows.length)try{n=(s=e.rows[1])&&$(s).outerHeight()||i.prevRowHeight}catch(e){n=i.prevRowHeight}if(n){i.prevRowHeight=n;var l=ee.rowNum;i.scrollTop=r.scrollTop;var d,c,u,h=i.scrollTop,p=Math.round(t.position().top)-h,f=p+t.height(),g=n*l;if(f<a&&p<=0&&(void 0===ee.lastpage||(parseInt((f+h+g-1)/g,10)||0)<=ee.lastpage)&&(c=parseInt((a-f+g-1)/g,10)||1,0<=f||c<2||!0===ee.scroll?(d=(Math.round((f+h)/g)||0)+1,p=-1):p=1),0<p&&(d=(parseInt(h/g,10)||0)+1,c=(parseInt((h+a)/g,10)||0)+2-d,u=!0),c){if(ee.lastpage&&(d>ee.lastpage||1===ee.lastpage||d===ee.page&&d===ee.lastpage))return;i.hDiv.loading?i.timer=setTimeout(function(){i.populateVisible.call(e)},ee.scrollTimeout):(ee.page=d,u&&(i.selectionPreserver.call(e),i.emptyRows.call(e,!1,!1)),i.populate.call(e,c))}}}},scrollGrid:function(){if(ee.scroll){var e=this.scrollTop;void 0===re.scrollTop&&(re.scrollTop=0),e!==re.scrollTop&&(re.scrollTop=e,re.timer&&clearTimeout(re.timer),re.timer=setTimeout(function(){re.populateVisible.call(j)},ee.scrollTimeout))}return re.hDiv.scrollLeft=this.scrollLeft,ee.footerrow&&(re.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var t=$(this),i=ee.selrow,r=ee.selarrrow?$.makeArray(ee.selarrrow):null,o=this.grid.bDiv,a=o.scrollLeft,s=function(){var e;if(ee.selrow=null,!ee.multiPageSelection){if(clearArray(ee.selarrrow),ee.multiselect&&r&&0<r.length)for(e=0;e<r.length;e++)r[e]!==i&&g.call(t,r[e],!1,null);i&&g.call(t,i,!1,null)}o.scrollLeft=a,t.off(".selectionPreserver",s)};t.on("jqGridGridComplete.selectionPreserver",s)}};j.grid=re,feedback.call(j,"beforeInitGrid"),ee.iColByName=l(ee.colModel),ee.iPropByName=c(ee.additionalProperties),jgrid.msie=0<jgrid.msiever();var N,h=$("<div class='"+k("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!ee.multiselect+"'></div>"),p=jgrid.msie;ee.direction=i(ee.direction.toLowerCase()),-1===b(ee.direction,["ltr","rtl"])&&(ee.direction="ltr"),N=ee.direction,$(h).insertBefore(j),f.removeClass("scroll").appendTo(h);var m=$("<div class='"+k("gBox","ui-jqgrid")+"'></div>");$(m).attr({id:ee.gBoxId,dir:N}).insertBefore(h),$(h).attr("id",ee.gViewId).appendTo(m),$("<div class='"+k("overlay","jqgrid-overlay")+"' id='lui_"+ee.id+"'></div>").insertBefore(h),$("<div class='"+k("loading","loading")+"' id='load_"+ee.id+"'>"+O("loadtext")+"</div>").insertBefore(h),f.attr({role:"presentation","aria-labelledby":"gbox_"+j.id});var v,y=function(e,t,i,r,o,a){var s,n,l,d,c,u,h,p=ee.colModel[e],f=i,g=p.classes,m=p.align?"text-align:"+p.align+";":"",v=function(e){return"string"==typeof e?e.replace(/'/g,"&#39;"):e},b=" aria-describedby='"+ee.id+"_"+p.name+"'";if(!0===p.hidden&&(m+="display:none;"),0===t)m+="width: "+re.headers[e].width+"px;";else if((J(p.cellattr)||"string"==typeof p.cellattr&&null!=jgrid.cellattr&&J(jgrid.cellattr[p.cellattr]))&&(s=J(p.cellattr)?p.cellattr:jgrid.cellattr[p.cellattr],ee.useUnformattedDataForCellAttr&&null!=a?f=a[p.name]:p.autoResizable&&(n="<span class='"+ee.autoResizing.wrapperClassName+"'>",f=i.substring(n.length,i.length-"</span>".length)),"string"==typeof(d=s.call(j,o,f,r,p,a))))for(d=d.replace(/\n/g,"&#xA;");;){if(null===(c=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(d))||c.length<5)return!h&&p.title&&(h=f),b+" style='"+v(m)+"'"+(g?" class='"+v(g)+"'":"")+(h?" title='"+v(h)+"'":"");switch(u=c[3],d=c[4],c[1].toLowerCase()){case"class":g?g+=" "+u:g=u;break;case"title":h=u;break;case"style":m+=u;break;default:b+=" "+c[1]+"="+c[2]+u+c[2]}}return l=""!==m?"style='"+m+"'":"",l+=(void 0!==g?" class='"+g+"'":"")+(p.title&&f?" title='"+stripHtml(i).replace(/'/g,"&apos;")+"'":""),l+=b},w=function(e){return null==e||""===e?"&#160;":ee.autoencode?htmlEncode(e):String(e)},oe=function(e){var t=ee.treeReader,i=t.loaded,r=t.leaf_field,o=t.expanded_field,a=function(e){return!0===e||"true"===e||"1"===e};if("nested"===ee.treeGridModel&&!e[r]){var s=parseInt(e[t.left_field],10),n=parseInt(e[t.right_field],10);e[r]=n===s+1}void 0!==e[i]&&(e[i]=a(e[i])),e[r]=a(e[r]),e[o]=a(e[o])},ae=function(e,t){var i,r;for(i in ee.indexByColumnData)ee.indexByColumnData.hasOwnProperty(i)&&(r=e[i],e.hasOwnProperty(i)&&void 0!==r&&""!==r&&(ee.ignoreCase&&(r=String(r).toLowerCase()),void 0===ee.indexByColumnData[i][r]&&(ee.indexByColumnData[i][r]={}),ee.indexByColumnData[i][r][t]=e[i],void 0===ee.dataIndexById[t]&&(ee.dataIndexById[t]={}),void 0===ee.dataIndexById[t][i]&&(ee.dataIndexById[t][i]={}),ee.dataIndexById[t][i][r]=ee.indexByColumnData[i][r]))},x=function(){var e,t,i,r,o,a,s,n,l,d,c,u,h=ee.data,p=h.length,f=ee.localReader,g=ee.additionalProperties,m=f.cell,v=ee.arrayReaderInfos;if("local"===ee.datatype&&!0===f.repeatitems)for(r=!1===ee.keyName?J(f.id)?f.id.call(j,h):f.id:ee.keyName,isNaN(r)?J(r)||null!=ee.arrayReaderInfos[r]&&(o=ee.arrayReaderInfos[r].order):o=Number(r),e=0;e<p;e++){for(l in t=h[e],i=m&&getAccessor(t,m)||t,d=Z(i),s={},v)v.hasOwnProperty(l)&&(u=v[l],a=getAccessor(i,d?u.order:u.name),1===u.type&&null!=(c=g[u.index])&&J(c.convert)&&(a=c.convert(a,i)),void 0!==a&&(s[l]=a));void 0!==s[r]?n=void 0!==s[r]?s[r]:randId():(void 0===(n=getAccessor(t,Z(t)?o:r))&&(n=getAccessor(i,Z(i)?o:r)),void 0===n&&(n=randId())),n=String(n),s[f.id]=n,ee.treeGrid&&oe(s),I(h[e],s)}else if(ee.treeGrid)for(e=0;e<p;e++)oe(h[e])},C=function(){var e,t,i,r,o=ee.data.length;for(e=!1===ee.keyName||ee.loadonce&&ee.dataTypeOrg?ee.localReader.id:ee.keyName,ee._index={},ee.dataIndexById={},ee.indexByColumnData=d(),t=0;t<o;t++)r=ee.data[t],void 0===(i=getAccessor(r,e))&&(i=String(randId()),void 0===r[e]&&(r[e]=i)),ee._index[i]=t,ae.call(this,r,i)},se=function(e,t){var i,r,o,a=ee.colModel,s=a.length,n=function(e){return null==e||""===e?"&#160;":htmlEncode(e)},l=function(e){return null==e||""===e?"&#160;":String(e)};for(i=0;i<s;i++)(r=a[i]).cellBuilder=null,e||(o={colModel:r,gid:ee.id,pos:i},void 0===r.formatter?r.cellBuilder=ee.autoencode?n:l:"string"==typeof r.formatter&&null!=$.fn.fmatter&&J($.fn.fmatter.getCellBuilder)?r.cellBuilder=$.fn.fmatter.getCellBuilder.call(j,r.formatter,o,t||"add"):J(r.getCellBuilder)&&(r.cellBuilder=r.getCellBuilder.call(j,o,t||"add")))},G=function(e,t,i,r){var o=this,a=$(o),s=new Date,n=ee.datatype,l="local"!==n&&ee.loadonce||"xmlstring"===n||"jsonstring"===n,d=("xmlstring"===n||"xml"===n)&&$.isXMLDoc(e),c="_id_",u=ee.localReader,h=getAccessor;if(e&&("xml"!==n||d)){switch(-1!==ee.treeANode||ee.scroll?t=1<t?t:1:(re.emptyRows.call(o,!1,!0),t=1),l&&(clearArray(ee.data),clearArray(ee.lastSelectedData),ee._index={},ee.grouping&&null!=ee.groupingView&&(ee.groupingView.groups=[],ee.groupingView._locgr=!1),ee.localReader.id=c),ee.reccount=0,n){case"xml":case"xmlstring":u=ee.xmlReader,h=jgrid.getXmlData;break;case"json":case"jsonp":case"jsonstring":u=ee.jsonReader}var p,f,g,m,v,b,y,w,x,C,_,j,I,S={},D=ee.colModel,F=D.length,k=ee.arrayReaderInfos,R={},O=function(i){return function(e){var t=null!=e&&J(e.getAttribute)?e.getAttribute(i):null;return null!==t?t:void 0}},q=function(i){return function(){var e,t=R[i];if(null!=t)return 0<(e=t.childNodes).length?e[0].nodeValue:void 0}};ee.page=ie(h(e,u.page),ee.page),ee.lastpage=ie(h(e,u.total),1),ee.records=ie(h(e,u.records)),J(u.userdata)?ee.userData=u.userdata.call(o,e)||{}:d?h(e,u.userdata,!0).each(function(){ee.userData[this.getAttribute("name")]=$(this).text()}):ee.userData=h(e,u.userdata)||{},se();var N,G,T,E,P={},A=ee.additionalProperties,z=function(e,t){d&&"string"==typeof t&&(/^\w+$/.test(t)?P[e]=q(t):/^\[\w+\]$/.test(t)&&(P[e]=O(t.substring(1,t.length-1))))},M=function(e){var t=e.name,i=d?e.xmlmap||t:("local"===n&&!ee.dataTypeOrg||"jsonstring"===n||"json"===n||"jsonp"===n)&&e.jsonmap||t;!1!==ee.keyName&&!0===e.key&&(ee.keyName=t),("string"==typeof i||J(i))&&(P[t]=i),J(i)||z(t,i)};for(p=0;p<F;p++)M(D[p]);for(F=A.length,p=0;p<F;p++)"object"==typeof(T=A[p])&&null!=T?M(T):z(T,T);if(v=!1===ee.keyName?J(u.id)?u.id.call(o,e):u.id:ee.keyName,isNaN(v)?J(v)||(k[v]&&(b=k[v].order),d&&!1===ee.keyName&&("string"==typeof v&&/^\[\w+\]$/.test(v)?v=O(v.substring(1,v.length-1)):"string"==typeof v&&/^\w+$/.test(v)&&(v=q(v)))):b=Number(v),m=h(e,u.root,!0),u.row)if(1===m.length&&"string"==typeof u.row&&/^\w+$/.test(u.row)){for(E=[],_=(C=m[0].childNodes).length,x=0;x<_;x++)1===(j=C[x]).nodeType&&j.nodeName===u.row&&E.push(j);m=E}else m=h(m,u.row,!0);null==m&&Z(e)&&(m=e),m||(m=[]),0<(g=m.length)&&ee.page<=0&&(ee.page=1);var B=parseInt(ee.rowNum,10);r&&(B*=r+1);var H,L,V=[],W=[];for(E=[],p=0;p<g;p++){if(L=m[p],f=u.repeatitems&&u.cell&&h(L,u.cell,!0)||L,N=u.repeatitems&&(d||Z(f)),S={},R={},d&&!N&&null!=f)for(_=(C=f.childNodes).length,x=0;x<_;x++)1===(j=C[x]).nodeType&&(R[j.nodeName]=j);for(w in k)k.hasOwnProperty(w)&&(I=k[w],N?(G=f[I.order],d&&null!=G&&(G=G.textContent||G.text)):G=null!=P[w]&&"string"!=typeof P[w]?P[w].call(o,f,{cmName:w,iItem:p}):h(f,"string"==typeof P[w]?P[w]:I.name),1===I.type&&null!=(T=A[I.index])&&J(T.convert)&&(G=T.convert(G,f)),void 0!==G&&(S[w]=G));if(void 0!==S[v]?H=void 0!==S[v]?S[v]:randId():(void 0===(H=h(L,Z(L)?b:v))&&(H=h(f,Z(f)?b:v)),void 0===H&&(H=randId())),void 0===S[v]&&(S[v]=H),H=String(H),y=ee.idPrefix+H,ee.treeGrid&&oe(S),p<B)W.push(y),V.push(f),E.push(S);else if(!l)break;(l||!0===ee.treeGrid)&&(S[c]=H,ee.data.push(S),ae(S,H),ee._index[S[c]]=ee.data.length-1)}if(l&&!0!==ee.treeGrid){if(ee.forceClientSorting)return;ee.lastSelectedData=ee.data.slice()}var U=jgrid.parseDataToHtml.call(o,g,W,E,V,t,r,l);se(!0);var X=-1<ee.treeANode?ee.treeANode:0,Y=$(o.tBodies[0]);if(!0===ee.treeGrid&&0<X?$(o.rows[X]).after(U.join("")):ee.scroll?Y.append(U.join("")):(null==o.firstElementChild||void 0!==document.documentMode&&document.documentMode<=9?Y.html(Y.html()+U.join("")):o.firstElementChild.innerHTML+=U.join(""),o.grid.cols=o.rows[0].cells),ee.grouping){te.call(o);var Q,K=function(e){var t=$(this).closest("tr.jqgroup").attr("id");return a.jqGrid("groupingToggle",t,this,e),!1};for(p=0;p<o.rows.length;p++)(Q=$(o.rows[p])).hasClass("jqgroup")&&Q.children("td").children("span.tree-wrap").click(K)}if(!0===ee.subGrid)try{Xe.addSubGrid.call(a,ee.iColByName.subgrid)}catch(e){}if(!1===ee.gridview||J(ee.afterInsertRow))for(p=0;p<Math.min(g,B);p++)feedback.call(o,"afterInsertRow",W[p],E[p],V[p]);if(ee.totaltime=new Date-s,0<p&&0===ee.records&&(ee.records=g),clearArray(U),!0===ee.treeGrid)try{Xe.setTreeNode.call(a,X+1,p+X+1)}catch(e){}ee.reccount=Math.min(g,B),ee.treeANode=-1,ee.userDataOnFooter&&Xe.footerData.call(a,"set",ee.userData,!0),l&&(ee.records=g,ee.lastpage=Math.ceil(g/B)),i||o.updatepager(!1,!0),function(){var e,t,i=$.fn.fmatter;for(e=0;e<ee.colModel.length;e++)"string"==typeof(t=ee.colModel[e].formatter)&&null!=i&&J(i[t])&&J(i[t].pageFinalization)&&i[t].pageFinalization.call(this,e)}.call(o)}},T=function(e){var t,i=e.outerWidth();return i<=0&&(t=$(this).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='"+k("gBox","ui-jqgrid")+"' style='font-size:"+t+";visibility:hidden;margin:0;padding:0;' ></div>"),$(e).clone().appendTo("#testpg"),i=$("#testpg>.ui-pg-table").width(),$("#testpg").remove()),0<i&&e.parent().width(i),i},E=function(){this.grid.hDiv.loading=!0,ee.hiddengrid||Xe.progressBar.call($(this),{method:"show",loadtype:ee.loadui,htmlcontent:O("loadtext")})},P=function(){this.grid.hDiv.loading=!1,Xe.progressBar.call($(this),{method:"hide",loadtype:ee.loadui})},A=function(r){var o=this,t=$(o),i=o.grid;if(!i.hDiv.loading){var e,a,s=ee.scroll&&!1===r,n={},l=ee.prmNames;ee.page<=0&&(ee.page=Math.min(1,ee.lastpage)),null!==l.search&&(n[l.search]=ee.search),null!==l.nd&&(n[l.nd]=(new Date).getTime()),(isNaN(parseInt(ee.rowNum,10))||parseInt(ee.rowNum,10)<=0)&&(ee.rowNum=ee.maxRowNum),null!==l.rows&&(n[l.rows]=ee.rowNum),null!==l.page&&(n[l.page]=ee.page),null!==l.sort&&(n[l.sort]=ee.sortname),null!==l.order&&(n[l.order]=ee.sortorder),null!==ee.rowTotal&&null!==l.totalrows&&(n[l.totalrows]=ee.rowTotal);var d=J(ee.loadComplete),c=d?ee.loadComplete:null,u=0;if(1<(r=r||1)?null!==l.npage?(n[l.npage]=r,u=r-1,r=1):c=function(e){ee.page++,i.hDiv.loading=!1,d&&ee.loadComplete.call(o,e),A.call(o,r-1)}:null!==l.npage&&delete ee.postData[l.npage],ee.grouping&&Xe.groupingSetup){Xe.groupingSetup.call(t);var h,p,f,g,m=ee.groupingView,v="";for(h=0;h<m.groupField.length;h++){for(p=m.groupField[h],f=0;f<ee.colModel.length;f++)(g=ee.colModel[f]).name===p&&g.index&&(p=g.index);v+=p+" "+m.groupOrder[h]+", "}n[l.sort]=v+n[l.sort]}I(ee.postData,n);var b=ee.scroll?o.rows.length-1:1,y=function(){q.call(o),ee.autowidth||void 0!==ee.widthOrg&&"auto"!==ee.widthOrg&&"100%"!==ee.widthOrg||Xe.setGridWidth.call(t,ee.tblwidth+ee.scrollOffset,!1)},w=function(){var e;if(ee.autoresizeOnLoad)Xe.autoResizeAllColumns.call(t),clearArray(ee.columnsToReResizing),ee.autowidth&&Xe.setGridWidth.call(t,t.closest(".ui-jqgrid").parent().width(),!0);else{for(e=0;e<ee.columnsToReResizing.length;e++)Xe.autoResizeColumn.call(t,ee.columnsToReResizing[e]);clearArray(ee.columnsToReResizing)}},x=function(){feedback.call(o,"loadComplete",a),w(),t.triggerHandler("jqGridAfterLoadComplete",[a]),P.call(o),ee.datatype="local",ee.datastr=null,y()},C=function(e){t.triggerHandler("jqGridLoadComplete",[e]),c&&c.call(o,e),w(),t.triggerHandler("jqGridAfterLoadComplete",[e]),s&&i.populateVisible.call(o),1===r&&P.call(o),y()},_=function(){var e=function(){var e=$(this),n=ee.multiSort?[]:"",t={},l=!1,c={},d=[],u=[],h=R("formatter.date.srcformat"),p=R("formatter.date.newformat");if(!Z(ee.data))return{};ee.multiSort&&M(n,t);var f,g,m=!!ee.grouping&&ee.groupingView,i=function(e,t,i){var r,o,a=e.index||e.name,s=e.sorttype||"text";if(c[e.name]={reader:ee.dataTypeOrg?e.name:e.jsonmap||e.name,iCol:t,stype:s,srcfmt:"",newfmt:"",sfunc:e.sortfunc||null,isAddProp:!0===i},"date"!==s&&"datetime"!==s||(e.formatter&&"string"==typeof e.formatter&&"date"===e.formatter?(r=e.formatoptions&&e.formatoptions.srcformat?e.formatoptions.srcformat:h,o=e.formatoptions&&e.formatoptions.newformat?e.formatoptions.newformat:p):r=o=e.datefmt||"Y-m-d",c[e.name].srcfmt=r,c[e.name].newfmt=o),ee.grouping)for(g=0,f=m.groupField.length;g<f;g++)e.name===m.groupField[g]&&(d[g]=c[a],u[g]=a);ee.multiSort||l||e.index!==ee.sortname&&e.name!==ee.sortname||(n=e.name,l=!0)};if(S(ee.colModel,function(e){i(this,e)}),S(ee.additionalProperties,function(e){i("string"==typeof this?{name:this}:this,e,!0)}),ee.treeGrid)return Xe.SortTree.call(e,n,ee.sortorder,null!=c[n]&&c[n].stype?c[n].stype:"text",null!=c[n]&&c[n].srcfmt?c[n].srcfmt:""),!1;var v={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().inSet:e.andNot().inSet},in:function(e){return e.inSet},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},b=jgrid.from.call(this,ee.data);if(ee.ignoreCase&&(b=b.ignoreCase()),!0===ee.search){var r=ee.postData[(ee.searching||{}).sFilter||ee.prmNames.filters];if(r)"string"==typeof r&&(r=$.parseJSON(r)),function e(t){var i,r,o,a,s,n,l,d=0;if(null!=t.groups){for((r=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase())&&b.orBegin(),i=0;i<t.groups.length;i++){0<d&&r&&b.or();try{e(t.groups[i])}catch(e){D(e)}d++}r&&b.orEnd()}if(null!=t.rules)try{for((o=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase())&&b.orBegin(),i=0;i<t.rules.length;i++)s=t.rules[i],a=t.groupOp.toString().toUpperCase(),v[s.op]&&s.field?(0<d&&a&&"OR"===a&&(b=b.or()),null!=(l=c[s.field])&&(n=l.reader,b=v[s.op](b,a)(J(n)?'jQuery.jgrid.getAccessor(this,jQuery("'+ee.idSel+'")[0].p.colModel['+l.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+n+"')",s.data,c[s.field]))):null!=ee.customSortOperations&&null!=ee.customSortOperations[s.op]&&J(ee.customSortOperations[s.op].filter)&&(b=b.custom(s.op,s.field,s.data)),d++;o&&b.orEnd()}catch(e){D(e)}}(r);else try{var o=c[ee.postData.searchField];b=v[ee.postData.searchOper](b)(J(o.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+ee.idSel+'")[0].p.colModel['+o.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+o.reader+"')",ee.postData.searchString,c[ee.postData.searchField])}catch(e){}}if(ee.grouping)for(g=0;g<f&&g<u.length&&g<d.length;g++)b.orderBy(u[g],m.groupOrder[g],d[g].stype,d[g].srcfmt);ee.multiSort?S(n,function(){b.orderBy(this,t[this],c[this].stype,c[this].srcfmt,c[this].sfunc)}):n&&ee.sortorder&&l&&b.orderBy(ee.sortname,"DESC"===ee.sortorder.toUpperCase()?"d":"a",c[n].stype,c[n].srcfmt,c[n].sfunc),ee.lastSelectedData=b.select();var a=parseInt(ee.rowNum,10),s=ee.lastSelectedData.length,y=parseInt(ee.page,10),w=Math.ceil(s/a),x={};if(ee.grouping&&ee.groupingView._locgr){var C,_,j;if(ee.groupingView.groups=[],ee.footerrow&&ee.userDataOnFooter){for(_ in ee.userData)ee.userData.hasOwnProperty(_)&&(ee.userData[_]=0);j=!0}for(C=0;C<s;C++){if(j)for(_ in ee.userData)ee.userData.hasOwnProperty(_)&&(ee.userData[_]+=parseFloat(ee.lastSelectedData[C][_]||0));Xe.groupingPrepare.call(e,ee.lastSelectedData[C],C,a)}}c=b=null;var I=ee.localReader;return x[I.total]=w,x[I.page]=y,x[I.records]=s,x[I.root]=ee.lastSelectedData.slice((y-1)*a,y*a),x[I.userdata]=ee.userData,x}.call(o);G.call(o,e,b,1<r,u),C(e)};if(!feedback.call(o,"beforeRequest"))return;if(J(ee.datatype))return void ee.datatype.call(o,ee.postData,"load_"+ee.id,b,r,u);switch(e=ee.datatype.toLowerCase(),$(re.eDiv).hide(),e){case"json":case"jsonp":case"xml":case"script":$.ajax(I({url:ee.url,type:ee.mtype,dataType:e,data:jgrid.serializeFeedback.call(j,ee.serializeGridData,"jqGridSerializeGridData",ee.postData),success:function(e,t,i){ee.jqXhr=null,$(re.eDiv).hide(),J(ee.beforeProcessing)&&!1===ee.beforeProcessing.call(o,e,t,i)?P.call(o):(G.call(o,e,b,1<r,u),C(e),(ee.loadonce||ee.treeGrid)&&(ee.dataTypeOrg=ee.datatype,ee.datatype="local",ee.forceClientSorting&&_()))},error:function(e,t,i){ee.jqXhr=null,J(ee.loadError)&&ee.loadError.call(o,e,t,i),1===r&&P.call(o)},beforeSend:function(e,t){var i=!0;if(J(ee.loadBeforeSend)&&(i=ee.loadBeforeSend.call(o,e,t)),void 0===i&&(i=!0),!1===i)return!1;ee.jqXhr=e,E.call(o)}},jgrid.ajaxOptions,ee.ajaxGridOptions));break;case"xmlstring":E.call(o),a="string"==typeof ee.datastr?$.parseXML(ee.datastr):ee.datastr,G.call(o,a),x(),ee.forceClientSorting&&_();break;case"jsonstring":E.call(o),a=ee.datastr&&"string"==typeof ee.datastr?$.parseJSON(ee.datastr):ee.datastr,G.call(o,a),x(),ee.forceClientSorting&&_();break;case"local":case"clientside":E.call(o),ee.datatype="local",_()}}},z=function(e){var t=this.grid;$(ee.cb,t.hDiv).prop("checked",e),ee.frozenColumns&&$(ee.cb,t.fhDiv).prop("checked",e)},_=function(e,d){var t,i,r,o,a,s,n,l,c,u=k("states.hover"),h=k("states.disabled"),p="<td class='ui-pg-button "+h+"'><span class='ui-separator'></span></td>",f="",g="<table style='table-layout:auto;white-space: pre;"+("left"===ee.pagerpos?"margin-right:auto;":"right"===ee.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",m="",v=function(e,t,i){return!!feedback.call(j,"onPaging",e,{newPage:t,currentPage:ie(ee.page,1),lastPage:ie(ee.lastpage,1),currentRowNum:ie(ee.rowNum,10),newRowNum:i})&&(ee.selrow=null,ee.multiselect&&(ee.multiPageSelection||clearArray(ee.selarrrow),z.call(j,!1)),clearArray(ee.savedRow),ee.editingInfo={},!0)};if(d+="_"+e,t="pg_"+e,i=e+"_left",r=e+"_center",o=e+"_right",$("#"+jqID(e)).append("<div id='"+t+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+i+"' class='ui-jqgrid-pg-left'"+(void 0!==ee.pagerLeftWidth?" style='width:"+ee.pagerLeftWidth+"px;'":"")+"></td><td id='"+r+"' class='ui-jqgrid-pg-center'"+(void 0!==ee.pagerCenterWidth?" style='width:"+ee.pagerCenterWidth+"px;'":"")+"></td><td id='"+o+"' class='ui-jqgrid-pg-right'"+(void 0!==ee.pagerRightWidth?" style='width:"+ee.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),t="#"+jqID(t),0<ee.rowList.length){m="<td dir='"+N+"'>";var b,y=O("pgrecs");for(m+="<select class='"+k("pager.pagerSelect","ui-pg-selbox")+"' "+(y?"title='"+y+"'":"")+">",s=0;s<ee.rowList.length;s++)1===(b=ee.rowList[s].toString().split(":")).length&&(b[1]=b[0]),m+="<option value='"+b[0]+"'"+(ie(ee.rowNum,0)===ie(b[0],0)?" selected='selected'":"")+">"+b[1]+"</option>";m+="</select></td>"}if("rtl"===N&&(g+=m),!0===ee.pginput&&(f="<td dir='"+N+"'>"+jgrid.format(O("pgtext")||"","<input aria-label='Page No.' class='"+k("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+e+"'>0</span>")+"</td>"),e="#"+jqID(e),!0===ee.pgbuttons){var w=["first","prev","next","last"],x=w.slice(),C=k("pager.pagerButton","ui-pg-button");for("rtl"===N&&w.reverse(),s=0;s<w.length;s++)g+=(n=w[s],l=x[s],void 0,c=O("pg"+n),"<td role='button' tabindex='0' id='"+n+d+"' class='"+C+"' "+(c?"title='"+c+"'":"")+"><span class='"+F("pager."+l)+"'></span></td>"),1===s&&(g+=""!==f?p+f+p:"")}else""!==f&&(g+=f);"ltr"===N&&(g+=m),g+="</tr></tbody></table>",!0===ee.viewrecords&&$("td"+e+"_"+ee.recordpos,t).append("<span dir='"+N+"' style='text-align:"+ee.recordpos+"' class='ui-paging-info'></span>");var _=$("td"+e+"_"+ee.pagerpos,t);_.append(g),a=T.call(this,_.children(".ui-pg-table")),ee._nvtd=[],ee._nvtd[0]=a?Math.floor((ee.width-a)/2):Math.floor(ee.width/3),ee._nvtd[1]=0,g=null,$(".ui-pg-selbox",t).on("change",function(){var e=ie(this.value,10),t=Math.round(ee.rowNum*(ee.page-1)/e-.5)+1;return v("records",t,e)&&(ee.page=t,ee.rowNum=e,ee.pager&&$(".ui-pg-selbox",ee.pager).val(e),ee.toppager&&$(".ui-pg-selbox",ee.toppager).val(e),A.call(j)),!1}),!0===ee.pgbuttons&&($(".ui-pg-button",t).hover(function(){hasOneFromClasses(this,h)?this.style.cursor="default":($(this).addClass(u),this.style.cursor="pointer")},function(){hasOneFromClasses(this,h)||($(this).removeClass(u),this.style.cursor="default")}),$("#first"+jqID(d)+", #prev"+jqID(d)+", #next"+jqID(d)+", #last"+jqID(d)).click(function(){if(hasOneFromClasses(this,h))return!1;var e=ie(ee.page,1),t=e,i=this.id,r=ie(ee.lastpage,1),o=!1,a=!0,s=!0,n=!0,l=!0;return 0===r||1===r?(e<=1&&(s=a=!1),l=n=!1):1<r&&1<=e?1===e?s=a=!1:e===r&&(l=n=!1):1<r&&0===e&&(l=n=!1,e=r-1),this.id==="first"+d&&a&&(i="first",t=1,o=!0),this.id==="prev"+d&&s&&(i="prev",t=e-1,o=!0),this.id==="next"+d&&n&&(i="next",t=e+1,o=!0),this.id==="last"+d&&l&&(i="last",t=r,o=!0),v(i,t,ie(ee.rowNum,10))&&(ee.page=t,o&&A.call(j)),!1})),!0===ee.pginput&&$("input.ui-pg-input",t).on("keypress.jqGrid",function(e){var t=e.charCode||e.keyCode||0,i=ie($(this).val(),1);return 13===t?(v("user",i,ie(ee.rowNum,10))&&($(this).val(i),ee.page=0<$(this).val()?$(this).val():ee.page,A.call(j)),!1):this}),_.children(".ui-pg-table").on("keydown.jqGrid",function(e){var t;13===e.which&&0<(t=_.find(":focus")).length&&t.trigger("click")})},M=function(i,r,e){if(S((ee.sortname+" "+ee.sortorder).split(","),function(){var e=$.trim(this).split(" ");2===e.length&&i.push(e[0])}),null!=e){var t=$.inArray(e.index||e.name,i);""!==e.lso&&t<0?i.push(e.index||e.name):""===e.lso&&0<=t&&i.splice(t,1)}S(ee.colModel,function(){var e,t=this.index||this.name;this.lso&&(e=this.lso.split("-"),$.inArray(t,i)<0&&i.push(t),r[t]=e[e.length-1])})},B=function(e,t,i,r,o,a){var s=this,n=s.grid,l=ee.colModel[t],d=k("states.disabled");if(null!=l&&l.sortable&&!(0<ee.savedRow.length)){if(ee.lastsort===t&&""!==ee.sortname?"asc"===ee.sortorder?ee.sortorder="desc":"desc"===ee.sortorder?ee.sortorder="asc":ee.sortorder=l.firstsortorder||"asc":ee.sortorder=l.firstsortorder||"asc",l.lso?"asc"===l.lso?l.lso+="-desc":"desc"===l.lso?l.lso+="-asc":"asc-desc"!==l.lso&&"desc-asc"!==l.lso||!ee.threeStateSort&&!ee.multiSort||(l.lso=""):l.lso=l.firstsortorder||"asc",!i&&ee.resetPageAfterSort&&(ee.page=1),ee.multiSort)!function(e,t){var i,r="",o=ee.colModel[e],a=k("states.disabled"),s=ee.frozenColumns?$(j.grid.headers[e].el).add($(t)):$(j.grid.headers[e].el),n=s.find("span.s-ico"),l=n.children("span.ui-icon-asc"),d=n.children("span.ui-icon-desc"),c=l,u=d,h=[],p={};if(s.find("span.ui-grid-ico-sort").addClass(a),s.attr("aria-selected","false"),o.lso?(n.show(),"desc"===(i=(i=o.lso.split("-"))[i.length-1])&&(c=d,u=l),c.removeClass(a).css("display",""),ee.showOneSortIcon&&u.hide(),s.attr("aria-selected","true")):ee.viewsortcols[0]||n.hide(),M(h,p,o),"string"==typeof ee.sortname&&""!==ee.sortname&&ee.sortname.split(",").length<h.length){var f=function(r){S(ee.colModel,function(){var e,t="#jqgh_"+jgrid.jqID(ee.id+"_"+this.name),i=$(t);if(this.lso&&(this.index||this.name)===r){if("function"==typeof h.indexOf)e=h.indexOf(r);else{for(e=0;e<h.length&&h[e]!==r;e++);e===h.length&&(e=-1)}0<=e&&(h.splice(e,1),this.lso="")}ee.frozenColumns&&(i=i.add($(re.fhDiv).find(t))),i.children(".s-ico")[this.lso?"show":"hide"]()})};if("lastClickedFirstSorted"===ee.multiSortOrder&&1<h.length)for(h.unshift(h[h.length-1]),h.pop();h.length>ee.maxSortColumns;)f(h[h.length-1]);else J(ee.multiSortOrder)&&(h=ee.multiSortOrder.call(j,{sortNames:h,cm:o,sortDirs:p,removeSorting:f})||h)}S(h,function(){0<r.length&&(r+=", "),r+=this+" "+p[this],ee.sortorder=p[this]}),ee.sortname=r.substring(0,r.length-ee.sortorder.length-1),ee.showSortOrder&&S(ee.colModel,function(){if(this.sortable){var e=b(this.name,h),t="#jqgh_"+jgrid.jqID(ee.id+"_"+this.name),i=$(t);ee.frozenColumns&&(i=i.add($(re.fhDiv).find(t))),i.children(".ui-jqgrid-sort-order").html(e<0?"&nbsp;":J(ee.formatSortOrder)?ee.formatSortOrder.call(j,{cm:this,sortIndex:e}):e+1)}})}(t,o);else{if(r){if(ee.lastsort===t&&ee.sortorder===r&&!i)return;ee.sortorder=r}var c=n.headers,u=n.fhDiv,h=c[ee.lastsort]?$(c[ee.lastsort].el):$(),p=ee.frozenColumns?$(o):$(c[t].el),f=p.find("span.s-ico"),g=f.children("span.ui-icon-"+ee.sortorder),m=f.children("span.ui-icon-"+("asc"===ee.sortorder?"desc":"asc"));l=ee.colModel[ee.lastsort],h.find("span.ui-grid-ico-sort").addClass(d),h.attr("aria-selected","false"),ee.frozenColumns&&(u.find("span.ui-grid-ico-sort").addClass(d),u.find("th").attr("aria-selected","false")),ee.viewsortcols[0]||(ee.lastsort!==t?(ee.frozenColumns&&u.find("span.s-ico").hide(),h.find("span.s-ico").hide(),f.show()):""===ee.sortname&&f.show()),ee.lastsort!==t&&"true"===h.data("autoResized")&&(null!=l&&null!=l.autoResizing&&l.autoResizing.compact||ee.autoResizing.compact)&&ee.columnsToReResizing.push(ee.lastsort),l=ee.colModel[t],f.css("display",""),""!==l.lso?(g.removeClass(d).css("display",""),ee.showOneSortIcon&&m.removeClass(d).hide(),p.attr("aria-selected","true")):(p.attr("aria-selected","false"),ee.threeStateSort&&(ee.sortorder="",ee.viewsortcols[0]||f.hide())),ee.lastsort!==t&&"true"===p.data("autoResized")&&(null!=l&&null!=l.autoResizing&&l.autoResizing.compact||ee.autoResizing.compact)&&ee.columnsToReResizing.push(t),ee.sortname=l.index||e}if(feedback.call(s,"onSortCol",ee.sortname,t,ee.sortorder,a||{})){if("local"===ee.datatype?ee.deselectAfterSort&&!ee.multiPageSelection&&Xe.resetSelection.call($(s)):ee.multiPageSelection||(ee.selrow=null,ee.multiselect&&(z.call(s,!1),clearArray(ee.selarrrow))),clearArray(ee.savedRow),ee.editingInfo={},ee.scroll){var v=n.bDiv.scrollLeft;re.emptyRows.call(s,!0,!1),n.hDiv.scrollLeft=v}ee.subGrid&&"local"===ee.datatype&&$("td.sgexpanded","#"+jqID(ee.id)).each(function(){$(this).trigger("click")}),A.call(s),ee.lastsort=t,ee.sortname!==e&&t&&(ee.lastsort=t)}else ee.lastsort=t}},H=function(e){return ee.iColByName[(e.id||"").substring(ee.id.length+1)]};-1===b(ee.multikey,["shiftKey","altKey","ctrlKey"])&&(ee.multikey=!1),ee.keyName=!1,ee.sortorder=ee.sortorder.toLowerCase(),jgrid.cell_width=jgrid.cellWidth();var L,V,W=jgrid.cmTemplate;for(L=0;L<ee.colModel.length;L++)v="string"==typeof(V=ee.colModel[L]).template?null==W||"object"!=typeof W[V.template]&&!J(W[V.template])?{}:W[V.template]:V.template,J(v)&&(v=v.call(j,{cm:V,iCol:L})),V=I(!0,{},ee.cmTemplate,v||{},V),!1===ee.keyName&&!0===V.key&&(ee.keyName=V.name),ee.colModel[L]=V;for(ee.indexByColumnData=d(),L=0;L<ee.additionalProperties.length;L++)V=ee.additionalProperties[L],!1===ee.keyName&&!0===V.key&&(ee.keyName=V.name);if(0===ee.colNames.length)for(L=0;L<ee.colModel.length;L++)ee.colNames[L]=void 0!==ee.colModel[L].label?ee.colModel[L].label:ee.colModel[L].name;if(ee.colNames.length===ee.colModel.length){if(!0===ee.grouping&&(ee.scroll=!1,ee.rownumbers=!1,ee.treeGrid=!1,ee.gridview=!0),ee.subGrid&&J(Xe.setSubGrid))try{Xe.setSubGrid.call(f)}catch(e){}if(ee.multiselect&&("left"===ee.multiselectPosition||"right"===ee.multiselectPosition)){var U="left"===ee.multiselectPosition?"unshift":"push";ee.colNames[U]("<input id='"+ee.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),ee.colModel[U]({name:"cb",width:jgrid.cell_width?ee.multiselectWidth+ee.cellLayout:ee.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})}if(ee.rownumbers&&(ee.colNames.unshift(""),ee.colModel.unshift({name:"rn",width:jgrid.cell_width?ee.rownumWidth+ee.cellLayout:ee.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),ee.iColByName=l(ee.colModel),ee.xmlReader=I(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},ee.xmlReader),ee.jsonReader=I(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},ee.jsonReader),ee.localReader=I(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},ee.localReader),ee.scroll&&(ee.pgbuttons=!1,ee.pginput=!1,ee.rowList=[]),!0===ee.treeGrid){try{Xe.setTreeGrid.call(f)}catch(e){}"local"!==ee.datatype&&(ee.localReader={id:"_id_"}),ee.iPropByName=c(ee.additionalProperties)}if(function(){var e,t,i,r=ee.remapColumns,o=ee.colModel,a=o.length,s=[];for(e=0;e<a;e++)i=o[e].name,b(i,ee.reservedColumnNames)<0&&s.push(i);if(null!=r)for(t=s.slice(),e=0;e<r.length;e++)s[e]=t[r[e]];ee.cmNamesInputOrder=s}(),function(){var e,t,i,r,o,a=ee.colModel,s=ee.cmNamesInputOrder,n=ee.additionalProperties,l=s.length;for(ee.arrayReaderInfos={},t=ee.arrayReaderInfos,o=0;o<l;o++)i=s[o],b(i,ee.reservedColumnNames)<0&&!t.hasOwnProperty(i)&&(void 0!==(r=ee.iColByName[i])?t[i]={name:i,index:r,order:o,type:0}:void 0!==(r=ee.iPropByName[i])?t[i]={name:i,index:r,order:o,type:1}:i===(ee.prmNames.rowidName||"rowid")&&(t[i]={index:r,type:2}));for(l=a.length,e=0;e<l;e++)i=a[e].name,b(i,ee.reservedColumnNames)<0&&!t.hasOwnProperty(i)&&(t[i]={name:i,index:e,order:o,type:0},o++);for(l=n.length,e=0;e<l;e++)null==(i=n[e])||t.hasOwnProperty(i)||("object"==typeof i&&"string"===$.type(i.name)&&(i=i.name),t[i]={name:i,index:e,order:o,type:1},o++)}(),ee.data.length&&(x.call(j),C.call(j)),!0===ee.shrinkToFit&&!0===ee.forceFit)for(L=ee.colModel.length-1;0<=L;L--)if(!0!==ee.colModel[L].hidden){ee.colModel[L].resizable=!1;break}var X,Y,Q,K,ne,le,de,ce,ue,he=[],pe=[],fe=[],ge="<thead><tr class='ui-jqgrid-labels' role='row'>",me="<tbody><tr style='display:none;'>",ve=k("states.hover"),be=k("states.disabled");if(ee.multiSort)for(he=ee.sortname.split(","),ue=0;ue<he.length;ue++)fe=i(he[ue]).split(" "),he[ue]=i(fe[0]),pe[ue]=fe[1]?i(fe[1]):ee.sortorder||"asc";for(L=0;L<ee.colNames.length;L++){switch(V=ee.colModel[L],ne=ee.headertitles||V.headerTitle?" title='"+stripHtml("string"==typeof V.headerTitle?V.headerTitle:ee.colNames[L])+"'":"",ge+="<th id='"+ee.id+"_"+V.name+"' class='"+k("colHeaders","ui-th-column ui-th-"+N+" "+(V.labelClasses||""))+"'"+ne+">",X=V.index||V.name,V.labelAlign){case"left":le="text-align:left;";break;case"right":le="text-align:right;";break;case"likeData":le=void 0===V.align||"left"===V.align?"text-align:left;":"right"===V.align?"text-align:right;":"";break;default:le=""}ge+="<div id='jqgh_"+ee.id+"_"+V.name+"'"+(p?" class='ui-th-div-ie'":"")+(""===le?"":" style='"+le+"'")+" role='columnheader'>",ce=V.autoResizable&&"actions"!==V.formatter||V.rotated?"<span class='"+ee.autoResizing.wrapperClassName+"'>"+ee.colNames[L]+"</span>":ee.colNames[L],ee.sortIconsBeforeText?(ge+=(ee.builderSortIcons||jgrid.builderSortIcons).call(j,L),ge+=ce):(ge+=ce,ge+=(ee.builderSortIcons||jgrid.builderSortIcons).call(j,L)),ge+="</div></th>",me+="<td></td>",V.width=V.width?parseInt(V.width,10):150,"boolean"!=typeof V.title&&(V.title=!0),V.lso="",X===ee.sortname&&(ee.lastsort=L,V.lso=ee.sortorder||V.firstsortorder||"asc"),ee.multiSort&&-1!==(fe=b(X,he))&&(V.lso=pe[fe])}ge+="</tr></thead>",me+="</tr></tbody>";var ye,we,xe,$e,Ce,_e,je,Ie,Se,De,Fe,ke=$("<table class='"+k("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+ee.id+"'>"+ge+me+"</table>");if($(ke[0].tHead).children("tr").children("th").hover(function(){$(this).addClass(ve)},function(){$(this).removeClass(ve)}),ee.multiselect&&$(ee.cb,ke).on("click",function(){var t,e,i,r=k("states.select"),o=[],a=ee.iColByName.cb,s=function(e,t){$(e)[t?"addClass":"removeClass"](r).attr(t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==a&&$(e.cells[a]).find("input.cbox").prop("checked",t)},n=re.fbRows,l=be+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",d=ee._index;if(clearArray(ee.selarrrow),this.checked){if(t=!0,ee.selrow=1<j.rows.length?j.rows[j.rows.length-1].id:null,ee.multiPageSelection&&("local"===ee.datatype||ee.treeGrid))if("filtered"===ee.selectAllMode&&null!=ee.lastSelectedData&&0<ee.lastSelectedData.length)for(ee.selarrrow=[],i=0;i<ee.lastSelectedData.length;i++)ee.lastSelectedData[i].hasOwnProperty(ee.localReader.id)&&ee.selarrrow.push(ee.idPrefix+ee.lastSelectedData[i][ee.localReader.id]);else if(null!=ee.data&&0<ee.data.length&&null!=d)for(e in d)d.hasOwnProperty(e)&&ee.selarrrow.push(ee.idPrefix+e)}else t=!1,ee.selrow=null;var c=t?ee.selarrrow:o;$(j.rows).each(function(e){hasOneFromClasses(this,l)||(s(this,t),$.inArray(this.id,c)<0&&c.push(this.id),n&&s(n[e],t))}),feedback.call(j,"onSelectAll",t?ee.selarrrow:o,t)}),!0===ee.autowidth){var Re=Math.floor($(m).innerWidth());ee.width=0<Re?Re:"nw"}isNaN(ee.width)?isNaN(parseFloat(ee.width))||(ee.width=parseFloat(ee.width)):ee.width=Number(ee.width),ee.widthOrg=ee.width,Ce=0,_e=jgrid.cell_width?0:ie(ee.cellLayout,0),je=0,Ie=ie(ee.scrollOffset,0),Se=!1,De=0,Fe=jgrid.isCellClassHidden,S(ee.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),ee.grouping&&ee.autowidth){var e=b(this.name,ee.groupingView.groupField);0<=e&&ee.groupingView.groupColumnShow.length>e&&(this.hidden=!ee.groupingView.groupColumnShow[e])}this.widthOrg=we=ie(this.width,0),!1!==this.hidden||Fe(this.classes)||(Ce+=we+_e,this.fixed?De+=we+_e:je++)}),isNaN(ee.width)&&(ee.width=Ce+(!1!==ee.shrinkToFit||isNaN(ee.height)?0:Ie)),re.width=ee.width,ee.tblwidth=Ce,!1===ee.shrinkToFit&&!0===ee.forceFit&&(ee.forceFit=!1),!0===ee.shrinkToFit&&0<je&&(xe=re.width-_e*je-De,isNaN(ee.height)||(xe-=Ie,Se=!0),Ce=0,S(ee.colModel,function(e){!1!==this.hidden||Fe(this.classes)||this.fixed||(we=Math.round(xe*this.width/(ee.tblwidth-_e*je-De)),this.width=we,Ce+=we,ye=e)}),$e=0,Se?re.width-De-(Ce+_e*je)!==Ie&&($e=re.width-De-(Ce+_e*je)-Ie):Se||1===Math.abs(re.width-De-(Ce+_e*je))||($e=re.width-De-(Ce+_e*je)),ee.colModel[ye].width+=$e,ee.tblwidth=Ce+$e+_e*je+De,ee.tblwidth>ee.width&&(ee.colModel[ye].width-=ee.tblwidth-parseInt(ee.width,10),ee.tblwidth=ee.width)),$(m).css("width",re.width+"px").append("<div class='"+k("resizer","ui-jqgrid-resize-mark")+"' id='"+ee.rsId+"'>&#160;</div>"),$(ee.rs).on("selectstart",function(){return!1}).click(u).dblclick(function(e){var t=$(this).data("idx"),i=$(this).data("pageX"),r=ee.colModel[t];if(null==i||null==r)return!1;var o=String(i).split(";"),a=parseFloat(o[0]),s=parseFloat(o[1]);return 2===o.length&&(5<Math.abs(a-s)||5<Math.abs(e.pageX-a)||5<Math.abs(e.pageX-s))||(feedback.call(j,"resizeDblClick",t,r,e)&&r.autoResizable&&Xe.autoResizeColumn.call(f,t),feedback.call(j,"afterResizeDblClick",{iCol:t,cm:r,cmName:r.name})),!1}),$(h).css("width",re.width+"px");var Oe="";ee.footerrow&&(Oe+="<table role='presentation' style='width:1px' class='"+k("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+k("rowFooter","footrow footrow-"+N)+"'>");var qe="<tr class='"+k("gridRow","jqgfirstrow ui-row-"+ee.direction)+"' role='row' style='height:auto'>";if(ee.disableClick=!1,$("th",ke[0].tHead.rows[0]).each(function(e){var t=ee.colModel[e],i=t.name,r=$(this),o=r.children("div"),a=o.children("span.s-ico"),s=ee.showOneSortIcon;Y=t.width,void 0===t.resizable&&(t.resizable=!0),t.resizable?(Q=document.createElement("span"),$(Q).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+N).on("selectstart",function(){return!1}),r.addClass(ee.resizeclass)):Q="",r.css("width",Y+"px").prepend(Q);var n="";if(!(Q=null)===t.hidden&&(r.css("display","none"),n="display:none;"),qe+="<td role='gridcell' "+(t.classes?"class='"+t.classes+"' ":"")+"style='height:0;width:"+Y+"px;"+n+"'></td>",re.headers[e]={width:Y,el:this},"boolean"!=typeof(K=t.sortable)&&(t.sortable=!0,K=!0),"cb"!==i&&"subgrid"!==i&&"rn"!==i&&K&&ee.viewsortcols[2]&&o.addClass("ui-jqgrid-sortable"),K)if(ee.multiSort){var l="desc"===t.lso?"asc":"desc";ee.viewsortcols[0]?(a.css("display",""),t.lso&&(a.children("span.ui-icon-"+t.lso).removeClass(be),s&&a.children("span.ui-icon-"+l).hide())):t.lso&&(a.css("display",""),a.children("span.ui-icon-"+t.lso).removeClass(be),s&&a.children("span.ui-icon-"+l).hide()),ee.showSortOrder&&(fe=b(i,he),a["beforeSortIcons"===ee.sortOrderPosition?"before":"after"]("<span class='ui-jqgrid-sort-order'>"+(fe<0?"&nbsp;":J(ee.formatSortOrder)?ee.formatSortOrder.call(j,{cm:this,sortIndex:fe}):fe+1)+"</span>"))}else{var d="desc"===ee.sortorder?"asc":"desc";ee.viewsortcols[0]?(a.css("display",""),e===ee.lastsort&&(a.children("span.ui-icon-"+ee.sortorder).removeClass(be),s&&a.children("span.ui-icon-"+d).hide())):e===ee.lastsort&&""!==t.lso&&(a.css("display",""),a.children("span.ui-icon-"+ee.sortorder).removeClass(be),s&&a.children("span.ui-icon-"+d).hide())}ee.footerrow&&(Oe+="<td role='gridcell' "+y(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){var t,i,r=$(this),o=r.closest(".ui-jqgrid-hdiv").hasClass("frozen-div");if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length)return null!=(t=H(this))&&(!0===ee.forceFit&&(ee.nv=function(e){var t,i=e,r=e;for(t=e+1;t<ee.colModel.length;t++)if(!0!==ee.colModel[t].hidden){r=t;break}return r-i}(t)),re.dragStart(t,e,(i=[r.position().left+r.outerWidth()],"rtl"===ee.direction&&(i[0]=ee.width-i[0]),i[0]-=o?0:re.bDiv.scrollLeft,i.push($(re.hDiv).position().top),i.push($(re.bDiv).offset().top-$(re.hDiv).offset().top+$(re.bDiv).height()+(re.sDiv?$(re.sDiv).height():0)),i),r)),!1}).click(function(e){if(ee.disableClick)return ee.disableClick=!1;var t,i,r="th.ui-th-column>div";ee.viewsortcols[2]?r+=".ui-jqgrid-sortable":r+=">span.s-ico>span.ui-grid-ico-sort";var o=$(e.target).closest(r);if(1===o.length){ee.viewsortcols[2]||(t=!0,i=o.hasClass("ui-icon-desc")?"asc":"desc");var a=H(this);return null!=a&&B.call(j,$("div",this)[0].id.substring(5+ee.id.length+1),a,t,i,this,e),!1}}),ee.sortable&&J(Xe.sortableColumns))try{Xe.sortableColumns.call(f,$(ke[0].tHead.rows[0]))}catch(e){}ee.footerrow&&(Oe+="</tr></tbody></table>"),qe+="</tr>",f.html("<tbody>"+qe+"</tbody>"),f.addClass(k("grid","ui-jqgrid-btable"+(!0===ee.altRows&&f.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var Ne,Ge,Te=!(!ee.caption||!0!==ee.hiddengrid),Ee=$("<div class='ui-jqgrid-hbox"+("rtl"===N?"-rtl":"")+"'></div>"),Pe=k("top"),Ae=k("bottom");if(re.hDiv=document.createElement("div"),$(re.hDiv).css({width:re.width+"px"}).addClass(k("hDiv","ui-jqgrid-hdiv")).append(Ee).scroll(function(){var e=$(this).next(".ui-jqgrid-bdiv")[0];return e&&(e.scrollLeft=this.scrollLeft),!1}),$(Ee).append(ke),ke=null,Te&&$(re.hDiv).hide(),ee.rowNum=parseInt(ee.rowNum,10),(isNaN(ee.rowNum)||ee.rowNum<=0)&&(ee.rowNum=ee.maxRowNum),ee.pager)"string"==typeof ee.pager&&"#"!==ee.pager.substr(0,1)?(Ge=ee.pager,Ne=$("#"+jqID(ee.pager))):!0===ee.pager?(Ge=randId(),(Ne=$("<div id='"+Ge+"'></div>")).appendTo("body"),ee.pager="#"+jqID(Ge)):Ge=(Ne=$(ee.pager)).attr("id"),0<Ne.length?(Ne.css({width:re.width+"px"}).addClass(k("pager.pager","ui-jqgrid-pager "+Ae)).appendTo(m),Te&&Ne.hide(),_.call(j,Ge,""),ee.pager="#"+jqID(Ge)):ee.pager="";!1===ee.cellEdit&&!0===ee.hoverrows&&f.on("mouseover.jqGrid",function(e){de=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(de).attr("class")&&$(de).addClass(ve)}).on("mouseout.jqGrid",function(e){de=$(e.target).closest("tr.jqgrow"),$(de).removeClass(ve)});var ze=function(e){var t,i,r;do{if(0<(t=$(e).closest("td")).length){if(r=(i=t.parent()).parent().parent(),i.is(".jqgrow")&&(r[0]===this||r.is("table.ui-jqgrid-btable")&&(r[0].id||"").replace("_frozen","")===this.id))break;e=t.parent()}}while(0<t.length);return t};f.before(re.hDiv).click(function(e){var r=k("states.select"),t=e.target,i=ze.call(j,t),o=i.parent();if(0!==o.length&&!hasOneFromClasses(o,be)){var a=o[0].id,s=i[0].cellIndex,n=$(t).hasClass("cbox")&&$(t).is(":enabled")&&!hasOneFromClasses(t,be),l=feedback.call(j,"beforeSelectRow",a,e),d=!1,c=jgrid.detectRowEditing.call(j,a),u=null!=c&&"cellEditing"!==c.mode;if("A"!==t.tagName&&(!u||n)){if(feedback.call(j,"onCellSelect",a,s,i.html(),e),!0===ee.cellEdit){if(l&&ee.multiselect&&n){if(g.call(f,a,!0,e),n&&!ee.noCellSelection)return;d=!0}try{Xe.editCell.call(f,o[0].rowIndex,s,!0)}catch(e){}if(!ee.multiselect||!ee.noCellSelection||ee.multiboxonly&&d)return}if(l)if(ee.multikey)e[ee.multikey]&&!d?g.call(f,a,!0,e):ee.multiselect&&n&&(n=$("#jqg_"+jqID(ee.id)+"_"+a).is(":checked"),$("#jqg_"+jqID(ee.id)+"_"+a).prop("checked",!n));else if(ee.multiselect&&ee.multiboxonly)if(n&&!d)g.call(f,a,!0,e);else{var h=ee.frozenColumns?ee.id+"_frozen":"";$(ee.selarrrow).each(function(e,t){var i=Xe.getGridRowById.call(f,t);i&&$(i).removeClass(r),$("#jqg_"+jqID(ee.id)+"_"+jqID(t)).prop("checked",!1),h&&($("#"+jqID(t),"#"+jqID(h)).removeClass(r),$("#jqg_"+jqID(ee.id)+"_"+jqID(t),"#"+jqID(h)).prop("checked",!1))}),clearArray(ee.selarrrow),d||g.call(f,a,!0,e)}else{var p=ee.selrow;d||g.call(f,a,!0,e),"toggle"!==ee.singleSelectClickMode||ee.multiselect||p!==a||(j.grid.fbRows&&(o=o.add(j.grid.fbRows[o[0].rowIndex]===o[0]?j.rows[o[0].rowIndex]:j.grid.fbRows[o[0].rowIndex])),o.removeClass(r).attr({"aria-selected":"false",tabindex:"-1"}),ee.selrow=null)}else n&&$(t).prop("checked",!1)}}}).on("reloadGrid",function(e,t){var i=this,r=i.grid,o=$(this),a=i.p;if(!0===a.treeGrid&&(a.datatype=a.treedatatype),t=I({},defaults.reloadGridOptions||{},a.reloadGridOptions||{},t||{}),"local"===a.datatype&&a.dataTypeOrg&&a.loadonce&&t.fromServer&&(a.datatype=a.dataTypeOrg,delete a.dataTypeOrg),t.current&&r.selectionPreserver.call(i),"local"===a.datatype?(a.multiPageSelection||Xe.resetSelection.call(o),a.data.length&&(x.call(i),C.call(i))):a.treeGrid||a.multiPageSelection||(a.selrow=null,a.multiselect&&(clearArray(a.selarrrow),z.call(i,!1)),clearArray(a.savedRow),a.editingInfo={}),a.iRow=-1,a.iCol=-1,a.scroll&&re.emptyRows.call(i,!0,!1),t.page){var s=parseInt(t.page,10);s>a.lastpage&&(s=a.lastpage),s<1&&(s=1),a.page=s,r.prevRowHeight?r.bDiv.scrollTop=(s-1)*r.prevRowHeight*a.rowNum:r.bDiv.scrollTop=0}return r.prevRowHeight&&a.scroll&&void 0===t.page?(delete a.lastpage,r.populateVisible.call(i)):r.populate.call(i),!0===a._inlinenav&&o.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(e){var t=ze.call(j,e.target),i=t.parent();if(0<t.length&&!feedback.call(j,"ondblClickRow",i.attr("id"),i[0].rowIndex,t[0].cellIndex,e))return!1}).on("contextmenu",function(e){var t=ze.call(j,e.target),i=t.parent(),r=i.attr("id");if(0!==t.length)return ee.multiselect||ee.selrow===r||!0!==ee.selectOnContextMenu||g.call(f,r,!0,e),!!feedback.call(j,"onRightClickRow",r,i[0].rowIndex,t[0].cellIndex,e)&&void 0}),re.bDiv=document.createElement("div"),p&&"auto"===String(ee.height).toLowerCase()&&(ee.height="100%"),$(re.bDiv).append($("<div style='position:relative;'></div>").append("<div></div>").append(j)).addClass("ui-jqgrid-bdiv").css({height:ee.height+(isNaN(ee.height)?"":"px"),width:re.width+"px"}).scroll(re.scrollGrid),ee.maxHeight&&$(re.bDiv).css("max-height",ee.maxHeight+(isNaN(ee.maxHeight)?"":"px")),f.css({width:"1px"}),$.support.tbody||2===$(">tbody",j).length&&$(">tbody:gt(0)",j).remove(),ee.multikey&&$(re.bDiv).on(jgrid.msie?"selectstart":"mousedown",function(){return!1}),Te&&$(re.bDiv).hide(),re.cDiv=document.createElement("div");var Me=F("gridMinimize.visible"),Be=F("gridMinimize.hidden"),He=O("showhide"),Le=!0===ee.hidegrid?$("<a role='link' class='"+k("titleButton","ui-jqgrid-titlebar-close")+"'"+(He?" title='"+He+"'":"")+"/>").hover(function(){Le.addClass(ve)},function(){Le.removeClass(ve)}).append("<span class='"+Me+"'></span>"):"";if($(re.cDiv).append("<span class='ui-jqgrid-title'>"+ee.caption+"</span>").append(Le).addClass(k("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===N?"-rtl ":" ")+Pe)),$(re.cDiv).insertBefore(re.hDiv),ee.toolbar[0]){re.uDiv=document.createElement("div"),"top"===ee.toolbar[1]?$(re.uDiv).insertBefore(re.hDiv):"bottom"===ee.toolbar[1]&&$(re.uDiv).insertAfter(re.hDiv);var Ve=k("toolbarUpper","ui-userdata");"both"===ee.toolbar[1]?(re.ubDiv=document.createElement("div"),$(re.uDiv).addClass(Ve).attr("id","t_"+ee.id).insertBefore(re.hDiv),$(re.ubDiv).addClass(k("toolbarBottom","ui-userdata")).attr("id","tb_"+ee.id).insertAfter(re.hDiv),Te&&$(re.ubDiv).hide()):$(re.uDiv).width(re.width).addClass(Ve).attr("id","t_"+ee.id),Te&&$(re.uDiv).hide()}if("string"==typeof ee.datatype&&(ee.datatype=ee.datatype.toLowerCase()),ee.toppager?(ee.toppager=ee.id+"_toppager",re.topDiv=$("<div id='"+ee.toppager+"'></div>")[0],$(re.topDiv).addClass(k("pager.pager","ui-jqgrid-toppager"+(ee.caption?"":" "+Pe))).css({width:re.width+"px"}).insertBefore(re.hDiv),_.call(j,ee.toppager,"_t"),ee.toppager="#"+jqID(ee.toppager)):""!==ee.pager||ee.scroll||(ee.rowNum=ee.maxRowNum),ee.footerrow&&(re.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],Ee=$("<div class='ui-jqgrid-hbox"+("rtl"===N?"-rtl":"")+"'></div>"),$(re.sDiv).append(Ee).width(re.width).insertAfter(re.hDiv),$(Ee).append(Oe),re.footers=$(".ui-jqgrid-ftable",re.sDiv)[0].rows[0].cells,ee.rownumbers&&(re.footers[0].className=k("rowNum","jqgrid-rownum")),Te&&$(re.sDiv).hide()),Ee=null,ee.caption){var We=ee.datatype;!0===ee.hidegrid&&($(".ui-jqgrid-titlebar-close",re.cDiv).click(function(e){var t=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",i=this;!0===ee.toolbar[0]&&("both"===ee.toolbar[1]&&(t+=",#"+jqID($(re.ubDiv).attr("id"))),t+=",#"+jqID($(re.uDiv).attr("id")));var r=$(t,ee.gView).length;return ee.toppager&&(t+=","+ee.toppager),"visible"===ee.gridstate?$(t,ee.gBox).slideUp("fast",function(){0===--r&&($("span",i).removeClass(Me).addClass(Be),ee.gridstate="hidden",$(ee.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",ee.gBox).hide(),$(re.cDiv).addClass(Ae),Te||feedback.call(j,"onHeaderClick",ee.gridstate,e))}):"hidden"===ee.gridstate&&($(re.cDiv).removeClass(Ae),$(t,ee.gBox).slideDown("fast",function(){0===--r&&($("span",i).removeClass(Be).addClass(Me),Te&&(ee.datatype=We,A.call(j),Te=!1),ee.gridstate="visible",$(ee.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",ee.gBox).show(),Te||feedback.call(j,"onHeaderClick",ee.gridstate,e))})),!1}),Te&&(ee.datatype="local",$(".ui-jqgrid-titlebar-close",re.cDiv).trigger("click")))}else $(re.cDiv).hide(),$(re.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");$(re.hDiv).after(re.bDiv),re.eDiv=$("<div class='"+k("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+N)+"' style='display:none;'><span class='"+k("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],$(re.hDiv).after(re.eDiv),$(m).click(u).dblclick(function(e){var t=$(ee.rs),i=t.offset(),r=t.data("idx"),o=t.data("delta"),a=ee.colModel[r],s=$(this).data("pageX")||t.data("pageX");if(null==s||null==a)return!1;var n=String(s).split(";"),l=parseFloat(n[0]),d=parseFloat(n[1]);return 2===n.length&&(5<Math.abs(l-d)||5<Math.abs(e.pageX-l)||5<Math.abs(e.pageX-d))||(feedback.call(j,"resizeDblClick",r,a)&&i.left-1<=e.pageX+o&&e.pageX+o<=i.left+t.outerWidth()+1&&a.autoResizable&&Xe.autoResizeColumn.call(f,r),feedback.call(j,"afterResizeDblClick",{iCol:r,cm:a,cmName:a.name})),!1}),ee.pager||$(re.cDiv).nextAll("div:visible").filter(":last").addClass(Ae),$(".ui-jqgrid-labels",re.hDiv).on("selectstart",function(){return!1}),j.formatCol=y,j.sortData=B,j.updatepager=function(e,t){var i,r,o,a,s,n,l,d,c=this,u=$(c),h=c.grid,p=ee.pager||"",f=ee.pager?"_"+ee.pager.substr(1):"",g=h.bDiv,m=$.fmatter?$.fmatter.NumberFormat:null,v=ee.toppager?"_"+ee.toppager.substr(1):"",b=k("states.hover"),y=k("states.disabled");if((o=parseInt(ee.page,10)-1)<0&&(o=0),s=(o*=parseInt(ee.rowNum,10))+ee.reccount,ee.scroll){var w=$(getGridComponent(COMPONENT_NAMES.BODY_TABLE,g)[0].rows).slice(1);o=s-w.length,ee.reccount=w.length;var x=w.outerHeight()||h.prevRowHeight;if(x){var C=o*x,_=jgrid.fixMaxHeightOfDiv.call(c,parseInt(ee.records,10)*x);$(g).children("div").first().css({height:_+"px"}).children("div").first().css({height:C+"px",display:""}),0===g.scrollTop&&1<ee.page&&(g.scrollTop=ee.rowNum*(ee.page-1)*x)}g.scrollLeft=h.hDiv.scrollLeft}if(p+=ee.toppager?(p?",":"")+ee.toppager:""){if(l=R("formatter.integer")||{},i=ie(ee.page),r=ie(ee.lastpage),$(".selbox",p).prop("disabled",!1),!0===ee.pginput){var j=$(".ui-pg-input",p),I=String(ee.page).length;j.val(ee.page),j.each(function(){var e=parseInt($(this).attr("size"),10);0<e&&e<I&&$(this).attr("size",I)}),d=ee.toppager?"#sp_1"+f+",#sp_1"+v:"#sp_1"+f,$(d).html($.fmatter?m(ee.lastpage,l):ee.lastpage).closest(".ui-pg-table").each(function(){T.call(c,$(this))})}ee.viewrecords&&(0===ee.reccount?$(".ui-paging-info",p).html(O("emptyrecords")):(a=o+1,n=ee.records,$.fmatter&&(a=m(a,l),s=m(s,l),n=m(n,l)),$(".ui-paging-info",p).html(jgrid.format(O("recordtext"),a,s,n)))),!0===ee.pgbuttons&&(r<=0&&(i=0),i<=0&&(i=r=0),1===i||0===i?($("#first"+f+", #prev"+f).addClass(y).removeClass(b),ee.toppager&&$("#first_t"+v+", #prev_t"+v).addClass(y).removeClass(b)):($("#first"+f+", #prev"+f).removeClass(y),ee.toppager&&$("#first_t"+v+", #prev_t"+v).removeClass(y)),i===r||0===i?($("#next"+f+", #last"+f).addClass(y).removeClass(b),ee.toppager&&$("#next_t"+v+", #last_t"+v).addClass(y).removeClass(b)):($("#next"+f+", #last"+f).removeClass(y),ee.toppager&&$("#next_t"+v+", #last_t"+v).removeClass(y)))}!0===e&&!0===ee.rownumbers&&$(">td.jqgrid-rownum",c.rows).each(function(e){$(this).html(o+1+e)}),t&&ee.jqgdnd&&u.jqGrid("gridDnD","updateDnD"),feedback.call(c,"gridComplete"),u.triggerHandler("jqGridAfterGridComplete")},j.refreshIndex=C,j.addItemDataToColumnIndex=ae,j.removeItemDataFromColumnIndex=function(e){var t,i,r,o=ee.dataIndexById[e];if(null!=o){for(t in o)if(o.hasOwnProperty(t))for(r in i=o[t])i.hasOwnProperty(r)&&(delete ee.indexByColumnData[t][r][e],$.isEmptyObject(ee.indexByColumnData[t][r])&&delete ee.indexByColumnData[t][r]);delete ee.dataIndexById[e]}},j.generateValueFromColumnIndex=function(e,t,i){var r,o,a=$(this).jqGrid("getUniqueValueFromColumnIndex",e),s="";if(null!=a)for(i=i||";",t=t||":",r=0,o=a.length;r<o;r++)""!==s&&(s+=i||";"),s+=a[r]+(t||":")+a[r];return s},j.setHeadCheckBox=z,j.fixScrollOffsetAndhBoxPadding=q,j.constructTr=function(e,t,i,r,o,a){var s,n="-1",l="",d=t?"display:none;":"",c=k("gridRow","jqgrow ui-row-"+ee.direction)+(i?" "+i:"")+(a?" "+k("states.select"):""),u=$(this).triggerHandler("jqGridRowAttr",[r,o,e]);if("object"!=typeof u&&(u=J(ee.rowattr)?ee.rowattr.call(this,r,o,e):"string"==typeof ee.rowattr&&null!=jgrid.rowattr&&J(jgrid.rowattr[ee.rowattr])?jgrid.rowattr[ee.rowattr].call(this,r,o,e):{}),null!=u&&!$.isEmptyObject(u)){u.hasOwnProperty("id")&&(e=u.id,delete u.id),u.hasOwnProperty("tabindex")&&(n=u.tabindex,delete u.tabindex),u.hasOwnProperty("style")&&(d+=u.style,delete u.style),u.hasOwnProperty("class")&&(c+=" "+u.class,delete u.class);try{delete u.role}catch(e){}for(s in u)u.hasOwnProperty(s)&&(l+=" "+s+"="+u[s])}if(ee.treeGrid&&parseInt(r[ee.treeReader.level_field],10)!==parseInt(ee.tree_root_level,10)){var h=Xe.getNodeParent.call($(this),r);!h||!h.hasOwnProperty(ee.treeReader.expanded_field)||h[ee.treeReader.expanded_field]||t||(d+="display:none;")}return"<tr role='row' id='"+e+"' tabindex='"+n+"' class='"+c+"'"+(""===d?"":" style='"+d+"'")+l+">"},j.formatter=function(e,t,i,r,o,a){var s,n,l=ee.colModel[i];if(void 0!==l.formatter){var d={rowId:e=""!==String(ee.idPrefix)?(n=e,stripPref(ee.idPrefix,n)):e,colModel:l,gid:ee.id,pos:i,rowData:a||r};s=J(l.cellBuilder)?l.cellBuilder.call(j,t,d,r,o):J(l.formatter)?l.formatter.call(j,t,d,r,o):$.fmatter?$.fn.fmatter.call(j,l.formatter,t,d,r,o):w(t)}else s=w(t);if(s=l.autoResizable&&"actions"!==l.formatter?"<span class='"+ee.autoResizing.wrapperClassName+"'>"+s+"</span>":s,ee.treeGrid&&"edit"!==o&&(null==ee.ExpandColumn&&0===i||ee.ExpandColumn===l.name)){null==a&&(a=ee.data[ee._index[e]]);var c=parseInt(a[ee.treeReader.level_field]||0,10),u=0===parseInt(ee.tree_root_level,10)?c:c-1,h=a[ee.treeReader.leaf_field],p=a[ee.treeReader.expanded_field],f=a[ee.treeReader.icon_field],g=h?(null!=f&&""!==f?f:ee.treeIcons.leaf)+" tree-leaf":p?ee.treeIcons.minus+" tree-minus":ee.treeIcons.plus+" tree-plus";if(!h&&f&&"string"==typeof f){var m=f.split(",");2===m.length&&(g=p?m[0]:m[1])}s="<div class='tree-wrap' style='width:"+18*(u+1)+"px;'><div class='"+mergeCssClasses(ee.treeIcons.commonIconClass,g,"treeclick")+"' style='"+(!0===ee.ExpandColClick?"cursor:pointer;":"")+("rtl"===ee.direction?"margin-right:":"margin-left:")+18*u+"px;'></div></div><span class='cell-wrapper"+(h?"leaf":"")+"'"+(ee.ExpandColClick?" style='cursor:pointer;'":"")+">"+s+"</span>"}return s},I(re,{populate:A,emptyRows:function(e,t){var i=re.bDiv,r=null!=re.fbDiv?re.fbDiv.children(".ui-jqgrid-btable")[0]:null,o=function(e){if(e){var t=e.rows,i=t[0];if(ee.deepempty)t&&$(t).slice(1).remove();else if(ee.quickEmpty)if("quickest"===ee.quickEmpty)e.replaceChild(document.createElement("tbody"),e.tBodies[0]),e.firstChild.appendChild(i);else for(;1<t.length;)e.deleteRow(t.length-1);else $(e.firstChild).empty().append(i)}};$(this).off(".jqGridFormatter"),o(this),o(r),e&&ee.scroll&&($(i.firstChild).css({height:"auto"}),$(i.firstChild.firstChild).css({height:0,display:"none"}),0!==i.scrollTop&&(i.scrollTop=0)),!0===t&&ee.treeGrid&&(clearArray(ee.data),clearArray(ee.lastSelectedData),ee._index={},ee.dataIndexById={},ee.indexByColumnData={}),ee.rowIndexes={},ee.iRow=-1,ee.iCol=-1},beginReq:E,endReq:P}),j.addXmlData=G,j.addJSONData=G,j.rebuildRowIndexes=te,j.grid.cols=j.rows[0].cells,feedback.call(j,"onInitGrid"),ee.treeGrid&&"local"===ee.datatype&&null!=ee.data&&0<ee.data.length&&(ee.datatype="jsonstring",ee.datastr=ee.data,ee.data=[]),A.call(j),ee.hiddengrid=!1}else D(R("errors.model"))}else D("Element is not a table!")}})};var base=$.fn.jqGrid;jgrid.extend({getGridRes:function(e){var t=this[0];if(!t||!t.grid||!t.p)return null;var i=jgrid.getRes(locales[t.p.locale],e)||jgrid.getRes(locales["en-US"],e),r=jgrid.getRes(jgrid,e);return"object"!=typeof i||null===i||$.isArray(i)?void 0!==r?r:i:$.extend(!0,{},i,r||{})},getGuiStyles:function(e,t){var i=this instanceof $&&0<this.length?this[0]:this;if(!i||!i.grid||!i.p)return"";var r,o=i.p.guiStyle||jgrid.defaults.guiStyle||"jQueryUI",a=jgrid.getRes(jgrid.guiStyles[o],e);return void 0===a&&"string"==typeof(r=jgrid.getRes(jgrid.guiStyles[o],"baseGuiStyle"))&&(a=jgrid.getRes(jgrid.guiStyles[r],e)),jgrid.mergeCssClasses(a||"",t||"")},isBootstrapGuiStyle:function(){return 0<=$.inArray("ui-jqgrid-bootstrap",$(this).jqGrid("getGuiStyles","gBox").split(" "))},displayErrorMessage:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(t&&t.grid&&t.p&&e){var i=$(t.grid.eDiv),r=i.children(".ui-jqgrid-error");r.html(e),i.show(),t.p.errorDisplayTimeout&&setTimeout(function(){r.empty(),i.hide()},t.p.errorDisplayTimeout)}},getIconRes:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(!t||!t.p)return"";var i=t.p,r=jgrid.icons[i.iconSet],o=function(e,t){var i,r,o,a=t.split("."),s=a.length,n=[];if(null==(e="string"==typeof e?jgrid.icons[e]:e))return"";for((i=e).common&&n.push(i.common),o=0;o<s&&(r=a[o]);o++){if(void 0===(i=i[r])){if("common"===r)break;return""}if("string"==typeof i){n.push(i);break}null!=i&&i.common&&n.push(i.common)}return jgrid.mergeCssClasses.apply(this,n)};if(null==r)return"";var a=o(i.iconSet,e);return""===a&&null!=r.baseIconSet&&(a=o(r.baseIconSet,e)),a||""},isInCommonIconClass:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(!t||!t.p)return"";var i=t.p,r=jgrid.icons[i.iconSet];if(null==r)return!1;var o=r.common;if(void 0===o){if(null==r.baseIconSet)return!1;if(null==(r=jgrid.icons[r.baseIconSet]))return!1;o=r.common}return"string"==typeof o&&0<=$.inArray(e,o.split(" "))},getUniqueValueFromColumnIndex:function(e){var t=this[0];if(!t||!t.grid)return null;var i,r=[],o="",a=t.p.indexByColumnData[e];if(null!=a){for(o in a)if(a.hasOwnProperty(o)){for(i in a[o])if(a[o].hasOwnProperty(i)){o=String(a[o][i]);break}r.push(o)}t.p.ignoreCase?void 0===String.prototype.localeCompare?r.sort(function(e,t){var i=e.toLowerCase(),r=t.toLowerCase();return i===r?0:r<i?1:-1}):r.sort(function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())}):r.sort()}return r},generateDatalistFromColumnIndex:function(e){if(!this[0]||!this[0].grid)return null;var t,i,r=this.jqGrid("getUniqueValueFromColumnIndex",e),o=$("<datalist></datalist>");if(!(null!=r&&0<r.length))return $();for(t=0,i=r.length;t<i;t++)o.append($("<option></option>").attr("value",r[t]));return o},getGridParam:function(e){var t=this[0];return t&&t.grid?e?void 0!==t.p[e]?t.p[e]:null:t.p:null},setGridParam:function(e,t){return this.each(function(){null==t&&(t=!1),this.grid&&"object"==typeof e&&(!0===t?$.extend(this.p,e):$.extend(!0,this.p,e))})},abortAjaxRequest:function(){return this.each(function(){null!=this.p.jqXhr&&this.p.jqXhr.abort(),this.grid.endReq.call(this)})},getGridRowById:function(r){if(null==r)return null;var o,a=r.toString();return this.each(function(){var e,t,i=this.rows;if(null!=this.p.rowIndexes&&(t=i[this.p.rowIndexes[a]])&&t.id===a&&(o=t),!o)try{for(e=i.length;e--;)if(t=i[e],a===t.id){o=t;break}}catch(e){o=0<(o=$(this.grid.bDiv).find("#"+jqID(r))).length?o[0]:null}}),o},getDataIDs:function(){var o=[];return this.each(function(){var e,t,i=this.rows,r=i.length;if(r&&0<r)for(e=0;e<r;e++)t=i[e],$(t).hasClass("jqgrow")&&o.push(t.id)}),o},setSelection:function(_,j,I){return this.each(function(){var e,t,i,r,o,a,s,n,l,d,c,u,h,p,f=this,g=$(f),m=f.p,v=base.getGuiStyles,b=base.getGridRowById,y=v.call(g,"states.select"),w=v.call(g,"states.disabled"),x=f.grid.fbRows,C=function(e,t){var i=t?"addClass":"removeClass",r=m.iColByName.cb,o=t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},a=function(e){$(e)[i](y).attr(o),void 0!==r&&$(e.cells[r]).find("input.cbox").prop("checked",t)};a(e),x&&a(x[e.rowIndex])};void 0!==_&&(j=!1!==j,null!=I&&0<(s=$(I.target).closest("tr.jqgrow")).length&&(t=s[0],x&&(t=f.rows[t.rowIndex])),null==t&&(t=b.call(g,_)),!t||!t.className||-1<t.className.indexOf(w)||(!0===m.scrollrows&&null!=(i=b.call(g,_))&&0<=(i=i.rowIndex)&&(l=f.rows[i],d=f.grid.bDiv,c=d.clientHeight,u=d.scrollTop,h=$(l).position().top,p=l.clientHeight,c+u<=h+p?d.scrollTop=h-(c+u)+p+u:h<c+u&&h<u&&(d.scrollTop=h)),m.multiselect?(f.setHeadCheckBox(!1),m.selrow=t.id,n=jgrid.detectRowEditing.call(f,t.id),-1===(r=$.inArray(m.selrow,m.selarrrow))?(e=!0,m.selarrrow.push(m.selrow)):null===n||"inlineEditing"!==n.mode&&$(I.target).hasClass("cbox")?(e=!1,m.selarrrow.splice(r,1),o=m.selarrrow[0],m.selrow=void 0===o?null:o):e=!0,"ui-subgrid"!==t.className&&C(t,e),j&&feedback.call(f,"onSelectRow",t.id,e,I||{})):"ui-subgrid"!==t.className&&(m.selrow!==t.id?(null!==m.selrow&&(a=b.call(g,m.selrow))&&C(a,!1),C(t,!0),e=!0):e=!1,m.selrow=t.id,j&&feedback.call(f,"onSelectRow",t.id,e,I||{}))))})},resetSelection:function(f){return this.each(function(){var e,t=this,i=$(this),r=t.p,o=base.getGuiStyles,a=base.getGridRowById,s=o.call(i,"states.select"),n="edit-cell "+s,l="selected-row "+o.call(i,"states.hover"),d=r.iColByName.cb,c=void 0!==d,u=t.grid.fbRows,h=function(e){var t,i="removeClass",r={"aria-selected":"false",tabindex:"-1"};$(e)[i](s).attr(r),c&&$(e.cells[d]).find("input.cbox").prop("checked",!1),u&&(t=u[e.rowIndex],$(t)[i](s).attr(r),c&&$(t.cells[d]).find("input.cbox").prop("checked",!1))};if(void 0!==f){if(e=a.call(i,f),h(e),c){t.setHeadCheckBox(!1);var p=$.inArray(f,r.selarrrow);-1!==p&&r.selarrrow.splice(p,1)}}else r.multiselect?($(t.rows).each(function(){var e=$.inArray(this.id,r.selarrrow);-1!==e&&(h(this),r.selarrrow.splice(e,1))}),t.setHeadCheckBox(!1),r.multiPageSelection||clearArray(r.selarrrow),r.selrow=null):r.selrow&&(e=a.call(i,r.selrow),h(e),r.selrow=null);!0===r.cellEdit&&0<=parseInt(r.iCol,10)&&0<=parseInt(r.iRow,10)&&(null!=(e=t.rows[r.iRow])&&($(e.cells[r.iCol]).removeClass(n),$(e).removeClass(l)),u&&null!=(e=u[r.iRow])&&($(e.cells[r.iCol]).removeClass(n),$(e).removeClass(l))),clearArray(r.savedRow),r.editingInfo={}})},isCellEditing:function(e,t,i){var r=this[0],o=jgrid.detectRowEditing.call(r,e);if(null!=o&&("inlineEditing"===o.mode||"cellEditing"===o.mode&&o.savedRow.ic===t)){t=isNaN(t)?r.p.iColByName[t]:parseInt(t,10);var a=null!=i&&i.id===e?i:base.getGridRowById.call($(r),e),s=r.p.colModel[t],n=s.editable;if($.isFunction(n)&&(n=n.call(r,{rowid:e,id:stripPref(r.p.idPrefix,e),iCol:t,iRow:a.rowIndex,cmName:s.name,cm:s,mode:o.mode,td:a.cells[t],tr:a,dataElement:jgrid.getDataFieldOfCell.call(r,a,t)[0]})),!0===n)return!0}return!1},getRowData:function(h,p){var f,g={};return"object"==typeof h&&(p=h,h=void 0),p=p||{},this.each(function(){var e,t,i,r,o,a,s,n=this,l=n.p,d=!1,c=1,u=n.rows;if(void 0===h)d=!0,f=[],c=u.length;else if(!(e=base.getGridRowById.call($(n),h)))return g;for(t=0;t<c;t++)if(d&&(e=u[t]),$(e).hasClass("jqgrow")){for(jgrid.detectRowEditing.call(n,h),r=$(e).find("td[role=gridcell]"),i=0;i<r.length;i++)if(a=(o=l.colModel[i]).name,$.inArray(a,l.reservedColumnNames)<0&&"actions"!==o.formatter&&(!p.skipHidden||!o.hidden))if(s=r[i],base.isCellEditing.call($(n),h,i,e))g[a]=jgrid.getEditedValue.call(n,jgrid.getDataFieldOfCell.call(n,e,i),o,{},o.editable);else if(!0===l.treeGrid&&a===l.ExpandColumn)g[a]=htmlDecode($("span",s).first().html());else try{g[a]=$.unformat.call(n,s,{rowId:h,colModel:o},i)}catch(e){g[a]=htmlDecode($(s).html())}!p.includeId||!1!==l.keyName&&null!=g[l.keyName]||(g[l.prmNames.id]=stripPref(l.idPrefix,e.id)),d&&(f.push(g),g={})}}),f||g},delRowData:function(c){var u=!1;return this.each(function(){var e,t,i,r=this,o=r.p,a=$.jgrid.detectRowEditing.call(r,c);if(!(e=base.getGridRowById.call($(r),c)))return!1;if(o.subGrid&&(i=$(e).next()).hasClass("ui-subgrid")&&i.remove(),null!=a)try{"inlineEditing"===a.mode&&null!=base.restoreRow?base.restoreRow.call($(r),c):"cellEditing"===a.mode&&null!=base.restoreCell&&base.restoreCell.call($(r),a.savedRow.id,a.savedRow.ic)}catch(e){}if(e.rowIndex===o.iRow&&(o.iRow=-1,o.iCol=-1),$(e).remove(),o.records--,o.reccount--,r.updatepager(!0,!1),u=!0,o.multiselect&&-1!==(t=$.inArray(c,o.selarrrow))&&o.selarrrow.splice(t,1),o.multiselect&&0<o.selarrrow.length?o.selrow=o.selarrrow[o.selarrrow.length-1]:o.selrow===c&&(o.selrow=null),"local"===o.datatype){var s=stripPref(o.idPrefix,c),n=o._index[s];void 0!==n&&(r.removeItemDataFromColumnIndex(s),o.data.splice(n,1),r.refreshIndex())}if(r.rebuildRowIndexes(),!0===o.altRows&&u&&!$(r).jqGrid("isBootstrapGuiStyle")){var l=o.altclass,d=r.grid.fbRows;$(r.rows).each(function(e){var t=$(this);d&&(t=t.add(d[this.rowIndex])),t[e%2==0?"addClass":"removeClass"](l)})}feedback.call(r,"afterDelRow",c)}),u},setRowData:function(h,p,r){var a=!0;return this.each(function(){var s,n=this,l=n.p,e=typeof r,d={};if(!n.grid)return!1;if(!(s=base.getGridRowById.call($(n),h)))return!1;if(p)try{var t,o=stripPref(l.idPrefix,h),i=l._index[o],c={},u=null!=i?l.data[i]:void 0;if($(l.colModel).each(function(e){var t=this,i=t.name,r=getAccessor(p,i);void 0!==r&&("local"===l.datatype&&null!=u&&(r=convertOnSaveLocally.call(n,r,t,u[i],o,u,e),$.isFunction(t.saveLocally)?t.saveLocally.call(n,{newValue:r,newItem:d,oldItem:u,id:o,cm:t,cmName:i,iCol:e}):d[i]=r),c[i]=r)}),$(l.colModel).each(function(e){var t,i=this.name,r=getAccessor(p,i),o=$(s.cells[e]);if(void 0!==r){"local"===l.datatype&&null!=u&&(r=d[i]),t=this.title?{title:r}:{},r=n.formatter(h,r,e,p,"edit",c),"select"===this.formatter&&(t=this.title?{title:stripHtml(r)}:{});var a=o;!0===l.treeGrid&&i===l.ExpandColumn&&(a=a.children("span.cell-wrapperleaf,span.cell-wrapper").first()),a.html(r),o.attr(t),l.frozenColumns&&(a=$(n.grid.fbRows[s.rowIndex].cells[e]),!0===l.treeGrid&&i===l.ExpandColumn&&(a=a.children("span.cell-wrapperleaf,span.cell-wrapper").first()),a.html(r).attr(t))}}),"local"===l.datatype){if(l.treeGrid)for(t in l.treeReader)l.treeReader.hasOwnProperty(t)&&delete d[l.treeReader[t]];void 0!==u&&(l.data[i]=$.extend(!0,u,d),n.removeItemDataFromColumnIndex(o),n.addItemDataToColumnIndex(l.data[i],o))}feedback.call(n,"afterSetRow",{rowid:h,inputData:p,iData:i,iRow:s.rowIndex,tr:s,localData:d,cssProp:r})}catch(e){a=!1}a&&("string"===e?$(s).addClass(r):null!==r&&"object"===e&&$(s).css(r))}),a},changeRowid:function(f,g){return this.each(function(){var e,t,i,r,o,a,s,n=this,l=$(n),d=n.p;if(n.grid&&d&&f!==g&&(r=l.jqGrid("getGridRowById",f))&&null==l.jqGrid("getGridRowById",g)){var c=jgrid.stripPref(d.idPrefix,f),u=jgrid.stripPref(d.idPrefix,g),h=!1===d.keyName?d.prmNames.id:d.keyName,p=function(){var e=this.id,t=e.length-c.length;0<t&&e.substr(t)===c&&$(this).attr("id",e.substr(0,t)+u)};for(0<=d.iColByName[h]&&l.jqGrid("setCell",f,h,u),"local"===d.datatype&&void 0!==d._index[c]&&(d._index[u]=d._index[c],e=d.data[d._index[c]],delete d._index[c],e.hasOwnProperty(h)&&(e[h]=u)),d.rowIndexes[g]=r.rowIndex,delete d.rowIndexes[f],(o=null==n.grid.fbRows?$(r):$(r).add(n.grid.fbRows[r.rowIndex])).attr("id",g),d.selrow===f&&(d.selrow=g),$.isArray(d.selarrrow)&&0<=(t=$.inArray(f,d.selarrrow))&&(d.selarrrow[t]=g),d.multiselect&&(i="jqg_"+d.id+"_"+g,o.find("input.cbox").attr("id",i).attr("name",i)),t=0;t<d.colModel.length;t++)"actions"===(a=d.colModel[t]).formatter?o.find(".ui-jqgrid-actions .ui-pg-div").each(p):("showlink"===a.formatter||null!=a.unformat&&null!=a.formatter)&&(s=l.jqGrid("getCell",g,t),l.jqGrid("setCell",g,t,s,!1,!1,!0));feedback.call(n,"afterChangeRowid",{rowid:g,oldRowid:f,iRow:r.rowIndex,tr:r})}})},addRowData:function(u,h,p,f){$.inArray(p,["first","last","before","after","afterSelected","beforeSelected"])<0&&(p="last");var g,m,v,b,y,w,x,C,_,j,I,S=!1;return h&&($.isArray(h)?(w=!0,x=u):w=!(h=[h]),this.each(function(){var e,t,i=this,r=i.p,o=h.length,a=$(i),s=i.rows,n=0,l=base.getGridRowById,d=r.colModel,c=r.additionalProperties;for(w||(void 0!==u?u=String(u):(u=randId(),!1!==r.keyName&&(x=r.keyName,void 0!==h[0][x]&&(u=h[0][x])))),C=r.altclass;n<o;){if(_=h[n],m=[],w)try{void 0===(u=_[x])&&(u=randId())}catch(e){u=randId()}for(I=jgrid.stripPref(r.idPrefix,u),e={},b=0;b<d.length;b++)j=d[b],"rn"!==(g=j.name)&&"cb"!==g&&"subgrid"!==g&&(y=convertOnSaveLocally.call(i,_[g],j,void 0,I,{},b),$.isFunction(j.saveLocally)?j.saveLocally.call(i,{newValue:y,newItem:e,oldItem:{},id:I,rowid:u,cm:j,cmName:g,iCol:b}):void 0!==y&&(e[g]=y));for(b=0;b<c.length;b++)"object"==typeof(g=c[b])&&g.hasOwnProperty("name")&&(g=g.name),void 0!==(y=getAccessor(_,g))&&(e[g]=y);if("local"===r.datatype&&(e[r.localReader.id]=I,r._index[I]=r.data.length,r.data.push(e),i.addItemDataToColumnIndex(e,I)),t=r.grouping,r.grouping=!1,m=jgrid.parseDataToHtml.call(i,1,[u],[_]),r.grouping=t,m=m.join(""),0===s.length)$(i.tBodies[0]).append(m);else switch("afterSelected"!==p&&"beforeSelected"!==p||(void 0===f&&null!==r.selrow?(f=r.selrow,p="afterSelected"===p?"after":"before"):p="afterSelected"===p?"last":"first"),p){case"last":$(s[s.length-1]).after(m),v=s.length-1;break;case"first":$(s[0]).after(m),v=1;break;case"after":(v=l.call(a,f))&&($(s[v.rowIndex+1]).hasClass("ui-subgrid")?($(s[v.rowIndex+1]).after(m),v=v.rowIndex+2):($(v).after(m),v=v.rowIndex+1));break;case"before":(v=l.call(a,f))&&($(v).before(m),v=v.rowIndex-1)}!0===r.subGrid&&base.addSubGrid.call(a,r.iColByName.subgrid,v),r.records++,r.reccount++,0===r.lastpage&&(r.lastpage=1),feedback.call(i,"afterAddRow",{rowid:u,inputData:h,position:p,srcRowid:f,iRow:v,tr:s[v],localData:e,iData:r.data.length-1}),n++}!0!==r.altRows||w||a.jqGrid("isBootstrapGuiStyle")||("last"===p?(s.length-1)%2==0&&$(s[s.length-1]).addClass(C):$(s).each(function(e){e%2==1?$(this).addClass(C):$(this).removeClass(C)})),i.rebuildRowIndexes(),i.updatepager(!0,!0),S=!0})),S},footerData:function(c,u,h){var p=!1,f={};return null==c&&(c="get"),"boolean"!=typeof h&&(h=!0),c=c.toLowerCase(),this.each(function(){var e,t,i,r,o=this,a=o.p;if(!o.grid||!a.footerrow)return!1;if("set"===c&&function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(u))return!1;p=!0;var s=$(o.grid.sDiv).children(".ui-jqgrid-hbox"+("rtl"===a.direction?"-rtl":"")).children(".ui-jqgrid-ftable")[0];if(null==s||null==s.rows)return!1;var n=s.rows[0].cells,l=a.colModel,d=null==o.grid.fsDiv?{}:o.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if("get"===c)for(r=0;r<l.length;r++)i=l[r].name,$.inArray(i,a.reservedColumnNames)<0&&(!1!==u?(e=$(n[r]).text(),$.trim(e)&&(f[i]=e)):f[i]=$(n[r]).html());else if("set"===c)for(i in u)r=a.iColByName[i],u.hasOwnProperty(i)&&void 0!==r&&(e=h?o.formatter("",u[i],r,u,"edit"):u[i],(t=$(n[r]).add(d[r])).html(e),l[r].title&&t.attr({title:stripHtml(e)}))}),"get"===c?f:p},resetColumnResizerHeight:function(){return this.each(function(){if($.jgrid.msie){var e,t,i,r,o=this.grid.headers;for(i=0;i<o.length;i++)(r=(e=$(o[i].el)).height())&&0<(t=e.children(".ui-jqgrid-resize")).length&&.5<Math.abs(r-t.height())&&e.children(".ui-jqgrid-resize").height(r)}})},rotateColumnHeaders:function(y,w){return this.each(function(){var e,t,i,r,o,a,s,n,l,d,c,u,h,p,f,g,m=$(this),v=this.p,b=v.frozenColumns&&$.isFunction(base.getNumberOfFrozenColumns)?m.jqGrid("getNumberOfFrozenColumns"):0;for($.isArray(y)||(y=[y]),e=0;e<y.length;e++)a=y[e],0<=(t=isNaN(a)?v.iColByName[a]:parseInt(a,10))&&(i=this.grid.headers[t].el,r=t<b?$(i).add($(this.grid.fhDiv.find("#"+jqID(i.id)))):$(i),s=r.children("div"),n=s.children("span.s-ico"),d=s.children("span.ui-jqgrid-sort-order"),(l=s.children("span."+v.autoResizing.wrapperClassName)).length<1&&(n.detach(),d.detach(),s.wrapInner("<span class='"+v.autoResizing.wrapperClassName+"'></span>"),l=s.children("span."+v.autoResizing.wrapperClassName),s.each(function(e){e<n.length&&$(this).append(n[e]),e<d.length&&$(this).append(d[e])})),c=n.outerWidth(!0),u=l.outerWidth(),f=parseFloat(r.css("padding-top")||0),g=parseFloat(r.css("padding-bottom")||0),h=parseFloat(r.css("padding-left")||0),p=parseFloat(r.css("padding-right")||0),v.showSortOrder&&(c+=.5*c),o=void 0===w||0===w?u+c+h+p:w,r.height(o),r.css({paddingTop:p+"px",paddingBottom:h+"px",paddingLeft:f+"px",paddingRight:g+"px"}),s.css("min-width",o-h-p+"px").addClass("ui-jqgrid-rotate").css({bottom:0}),v.colModel[t].rotated=!0);m.jqGrid("resetColumnResizerHeight"),v.frozenColumns&&setTimeout(function(){m.triggerHandler("jqGridResetFrozenHeights",{header:{resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:-1,iRowEnd:-1}}})},0)})},showHideCol:function(u,y,h){return this.each(function(){var t,i=this,e=$(i),r=i.grid,o=!1,v=i.p,a=jgrid.cell_width?0:v.cellLayout;if(r){"string"==typeof u&&(u=[u]),h=h||{};var b=""===(y="none"!==y&&!1!==y?"":"none"),s=v.groupHeader,n=s&&("object"==typeof s||$.isFunction(s));if(n&&!h.skipSetGroupHeaders&&base.destroyGroupHeader.call(e,!1),$(v.colModel).each(function(m){var e=function(e){var t,i,r,o,a,s,n,l,d,c,u,h,p,f,g;for(t=0,i=e.length;t<i;t++)o=(r=e[t]).cells[m],(!$(r).hasClass("jqgroup")||null!=o&&1===o.colSpan)&&(a=$(o),0===t&&$(r).hasClass("jqgfirstrow")?(a.css("height","1px"),a.css("display",y),a.css("height","0")):a.css("display",y),b&&null!=o&&"TH"===o.tagName.toUpperCase()&&a.hasClass("ui-th-column")&&(s=a.children("div")).hasClass("ui-jqgrid-rotate")&&(n=s.children("span.s-ico"),(l=s.children("span."+v.autoResizing.wrapperClassName)).outerHeight(),d=l.outerWidth(),n.outerHeight(),c=n.outerWidth(!0),0<l.length&&(h=parseFloat(a.css("padding-top")||0),p=parseFloat(a.css("padding-bottom")||0),f=parseFloat(a.css("padding-left")||0),g=parseFloat(a.css("padding-right")||0),v.showSortOrder&&(c+=.5*c),u=d+c+f+g,a.height(u),a.css({paddingTop:g+"px",paddingBottom:f+"px",paddingLeft:h+"px",paddingRight:p+"px"}),s.css("min-width",u-f-g+"px").css({bottom:0}))))};if(-1!==$.inArray(this.name,u)&&this.hidden===b){if(!0===v.frozenColumns&&!0===this.frozen&&!h.notSkipFrozen)return!0;e($(r.hDiv).find(".ui-jqgrid-htable>thead>tr")),!0===v.frozenColumns&&null!=r.fhDiv&&e($(r.fhDiv).find(".ui-jqgrid-htable>thead>tr")),e(i.rows),!0===v.frozenColumns&&null!=r.fbRows&&e(i.rows),v.footerrow&&(e($(r.sDiv).find("tr.footrow")),!0===v.frozenColumns&&null!=r.fsDiv&&e($(r.fsDiv).find("tr.footrow"))),t=parseInt(this.width,10),"none"===y?v.tblwidth-=t+a:v.tblwidth+=t+a,this.hidden=!b,o=!0,h.skipFeedback?(h.toReport=h.toReport||{},h.toReport[this.name]=b):feedback.call(i,"onShowHideCol",b,this.name,m,h)}}),!0===o){var l=v.autowidth||void 0!==v.widthOrg&&"auto"!==v.widthOrg&&"100%"!==v.widthOrg?v.width:v.tblwidth+parseInt(v.scrollOffset,10);h.skipSetGridWidth?h.newGridWidth=l:base.setGridWidth.call(e,l)}if(n&&!h.skipSetGroupHeaders)if(null!=v.pivotOptions&&null!=v.pivotOptions.colHeaders&&1<v.pivotOptions.colHeaders.length){var d,c=v.pivotOptions.colHeaders;for(d=0;d<c.length;d++)c[d]&&c[d].groupHeaders.length&&base.setGroupHeaders.call(e,c[d])}else base.setGroupHeaders.call(e,v.groupHeader)}})},hideCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"none",t)})},showCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"",t)})},remapColumns:function(o,e,t){var i,r,a,s,n=this[0],l=n.p,d=n.grid,c=$.makeArray,u=!0===l.frozenColumns,h=this.jqGrid("getNumberOfFrozenColumns");function p(t){var i=t.length?c(t):$.extend({},t);$.each(s,function(e){t[e]=i[this]})}function f(e,t){(t?e.children(t):e.children()).each(function(){var r=this,o=c(r.cells);$.each(s,function(e){var t=o[this],i=r.cells[e];null!=t&&null!=i&&t.cellIndex!==e&&t.parentNode.insertBefore(t,i)})})}if(null!=d&&null!=l){for(s=function(){var e,t=[],i=[],r=o.length;for(e=0;e<r;e++)u&&o[e]<h?t.push(o[e]):i.push(o[e]);return t.concat(i)}(),p(l.colModel),p(l.colNames),p(d.headers),a=$(d.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),u&&null!=d.fhDiv&&(a=a.add(d.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),f(a,t&&":not(.ui-jqgrid-labels)"),e&&(a=$(n.tBodies[0]),u&&null!=d.fbDiv&&(a=a.add(d.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),f(a,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),l.footerrow&&(a=$(d.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),u&&null!=d.fsDiv&&(a=a.add(d.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),f(a)),l.remapColumns&&(l.remapColumns.length?p(l.remapColumns):l.remapColumns=c(s)),l.lastsort=$.inArray(l.lastsort,s),l.iColByName={},i=0,r=l.colModel.length;i<r;i++)l.iColByName[l.colModel[i].name]=i;feedback.call(n,"onRemapColumns",s,e,t)}},remapColumnsByName:function(e,t,i){var r,o,a=this[0].p,s=[],n=e.slice(),l=$.inArray;for(a.subGrid&&l("subgrid",n)<0&&n.unshift("subgrid"),a.multiselect&&l("cb",n)<0&&n.unshift("cb"),a.rownumbers&&l("rn",n)<0&&n.unshift("rn"),r=0,o=n.length;r<o;r++)s.push(a.iColByName[n[r]]);return base.remapColumns.call(this,s,t,i),this},setGridWidth:function(k,R){return this.each(function(){var t,i,e,r,o=this,a=o.p,s=o.grid,n=0,l=0,d=!1,c=0,u=jgrid.isCellClassHidden,h=k;if(s&&null!=a){o.fixScrollOffsetAndhBoxPadding();var p,f,g,m,v=a.colModel,b=a.scrollOffset,y=jgrid.cell_width?0:a.cellLayout,w=s.headers,x=s.footers,C=s.bDiv,_=s.hDiv,j=s.sDiv,I=s.cols,S=$(_).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,D=function(e){s.width=a.width=e,$(a.gBox).css("width",e+"px"),$(a.gView).css("width",e+"px"),$(C).css("width",e+"px"),$(_).css("width",e+"px"),a.pager&&$(a.pager).css("width",e+"px"),a.toppager&&$(a.toppager).css("width",e+"px"),!0===a.toolbar[0]&&($(s.uDiv).css("width",e+"px"),"both"===a.toolbar[1]&&$(s.ubDiv).css("width",e+"px")),a.footerrow&&$(j).css("width",e+"px")};if("boolean"!=typeof R&&(R=a.shrinkToFit),!isNaN(h)){if(D(h=parseInt(h,10)),!1===R&&!0===a.forceFit&&(a.forceFit=!1),!0===R){if($.each(v,function(){!1!==this.hidden||u(this.classes)||(t=this.widthOrg,n+=t+y,this.fixed?c+=this.width+y:l++)}),0===l)return;if(a.tblwidth=parseInt(n,10),e=h-y*l-c,isNaN(a.height)||(C.clientHeight<C.scrollHeight||1===o.rows.length)&&(d=!0,e-=b),(m=e/(a.tblwidth-y*l-c))<0)return;if(g=(n=0)<I.length,$.each(v,function(e){!1!==this.hidden||u(this.classes)||this.fixed||(t=Math.round(this.widthOrg*m),this.width=t,n+=t,w[e].width=t,S[e].style.width=t+"px",a.footerrow&&(x[e].style.width=t+"px"),g&&(I[e].style.width=t+"px"),i=e)}),!i)return;r=0,d?h-c-(n+y*l)!==b&&(r=h-c-(n+y*l)-b):1!==Math.abs(h-c-(n+y*l))&&(r=h-c-(n+y*l)),(p=v[i]).width+=r,a.tblwidth=parseInt(n+r+y*l+c,10),a.tblwidth>h&&(f=a.tblwidth-parseInt(h,10),a.tblwidth=h,p.width=p.width-f),t=p.width,w[i].width=t,S[i].style.width=t+"px",g&&(I[i].style.width=t+"px"),a.footerrow&&(x[i].style.width=t+"px"),a.tblwidth+(d?b:0)<a.width&&D(a.tblwidth+(d?b:0)),C.offsetWidth>C.clientWidth&&(a.autowidth||void 0!==a.widthOrg&&"auto"!==a.widthOrg&&"100%"!==a.widthOrg||D(C.offsetWidth))}a.tblwidth&&(a.tblwidth=parseInt(a.tblwidth,10),h=a.tblwidth,_.scrollLeft=C.scrollLeft,f=Math.abs(h-a.width),a.shrinkToFit&&!R&&f<3&&0<f&&(h<a.width&&D(h),C.offsetWidth>C.clientWidth&&(a.autowidth||void 0!==a.widthOrg&&"auto"!==a.widthOrg&&"100%"!==a.widthOrg||D(C.offsetWidth)))),o.fixScrollOffsetAndhBoxPadding();var F={resizeDiv:!0,resizedRows:{iRowStart:R?0:-1,iRowEnd:-1}};$(o).triggerHandler("jqGridResetFrozenHeights",[{header:F,resizeFooter:!0,body:F}])}}})},setGridHeight:function(o){return this.each(function(){var e=this,t=e.grid,i=e.p;if(t){var r=$(t.bDiv);r.css({height:o+(isNaN(o)?"":"px")}),!0===i.frozenColumns&&$(i.idSel+"_frozen").parent().height(r.height()-16),i.height=o,i.scroll&&t.populateVisible.call(e),e.fixScrollOffsetAndhBoxPadding(),$(e).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(t){return this.each(function(){var e=this.grid.cDiv;this.p.caption=t,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",e).html(t),$(e).show(),$(e).nextAll("div").removeClass(base.getGuiStyles.call(this,"top")),$(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(i,o,a,s){return this.each(function(){var e,t,r=this.p;if(this.grid){if(isNaN(i)){if(void 0===(e=r.iColByName[i]))return}else e=parseInt(i,10);0<=e&&(t=$(this.grid.headers[e].el),r.frozenColumns&&(t=t.add(this.grid.fhDiv.find("#"+jqID(t)))),o&&(t.each(function(){var e=$("[id^=jqgh_]",this),t=e.children("span.ui-jqgrid-cell-wrapper");if(0<t.length)t.html(o);else{var i=$(".s-ico",this);e.empty().html(o)[r.sortIconsBeforeText?"prepend":"append"](i)}}),r.colNames[e]=o),a&&("string"==typeof a?t.addClass(a):t.css(a)),"object"==typeof s&&t.attr(s))}})},setCell:function(m,v,b,y,w,x){return this.each(function(){var e,t,i,r,o,a,s,n,l,d,c,u=this,h=u.p,p=h.colModel,f={};if(u.grid&&0<=(e=isNaN(v)?h.iColByName[v]:parseInt(v,10))&&(a=base.getGridRowById.call($(u),m))){if(s=jgrid.getCell.call(u,a,e),""!==b||!0===x){if(r=p[e],"local"===h.datatype&&(d=stripPref(h.idPrefix,m),void 0!==(c=h._index[d])&&(o=h.data[c])),null==o){for(i=0;i<a.cells.length;i++)if(i!==e&&0<(n=jgrid.getDataFieldOfCell.call(u,a,i)).length){try{l=$.unformat.call(u,n,{rowId:m,colModel:p[i]},i)}catch(e){l=htmlDecode(n[0].innerHTML)}f[p[i].name]=l}}else f=o;f[r.name]=b,t=u.formatter(m,b,e,f,"edit");var g=s;!0===h.treeGrid&&r.name===h.ExpandColumn&&(g=g.children("span.cell-wrapperleaf,span.cell-wrapper").first()),g.html(t),r.title&&s.attr({title:b}),null!=o&&(t=convertOnSaveLocally.call(u,b,r,o[r.name],d,o,e),$.isFunction(r.saveLocally)?r.saveLocally.call(u,{newValue:t,newItem:o,oldItem:o,id:d,cm:r,cmName:r.name,iCol:e}):o[r.name]=t)}(y||w)&&(s=jgrid.getCell.call(u,a,e),y&&s["string"==typeof y?"addClass":"css"](y),"object"==typeof w&&s.attr(w))}})},getCell:function(s,n){var l=!1;return this.each(function(){var e,t,i,r,o=this,a=o.p;if(o.grid&&0<=(e=isNaN(n)?a.iColByName[n]:parseInt(n,10))&&(t=base.getGridRowById.call($(o),s))){i=jgrid.getDataFieldOfCell.call(o,t,e).first(),r=a.colModel[e];try{l=base.isCellEditing.call($(o),s,e,t)?jgrid.getEditedValue.call(o,i,r,{},r.editable):$.unformat.call(o,i,{rowId:t.id,colModel:r},e)}catch(e){l=htmlDecode(i.html())}}}),l},getCol:function(u,h,p){var f,g,m,v,b=[],y=0;return h="boolean"==typeof h&&h,void 0===p&&(p=!1),this.each(function(){var e,t,i=this,r=i.p;if(i.grid&&0<=(e=isNaN(u)?r.iColByName[u]:parseInt(u,10))){var o,a,s=i.rows,n=s.length,l=0,d=0,c=r.colModel[e];if(n&&0<n){for(;l<n;){if(o=s[l],$(o).hasClass("jqgrow")){t=jgrid.getDataFieldOfCell.call(i,o,e).first(),a=o.id;try{f=base.isCellEditing.call($(i),a,e,o)?jgrid.getEditedValue.call(i,t,c,{},c.editable):$.unformat.call(i,t,{rowId:a,colModel:c},e)}catch(e){f=htmlDecode(t.html())}p?(v=parseFloat(f),isNaN(v)||(y+=v,void 0===m&&(m=g=v),g=Math.min(g,v),m=Math.max(m,v),d++)):h?b.push({id:a,value:f}):b.push(f)}l++}if(p)switch(p.toLowerCase()){case"sum":b=y;break;case"avg":b=y/d;break;case"count":b=n-1;break;case"min":b=g;break;case"max":b=m}}}}),b},clearGridData:function(o){return this.each(function(){var e=this,t=e.p,i=e.rows,r=e.grid;r&&t&&i&&("boolean"!=typeof o&&(o=!1),$(e).off(".jqGridFormatter"),r.emptyRows.call(e,!1,!0),t.footerrow&&o&&$(".ui-jqgrid-ftable td",r.sDiv).html("&#160;"),t.selrow=null,clearArray(t.selarrrow),clearArray(t.savedRow),t.editingInfo={},clearArray(t.data),clearArray(t.lastSelectedData),t._index={},t.rowIndexes={},t.dataIndexById={},t.indexByColumnData={},t.records=0,t.page=1,t.lastpage=0,t.reccount=0,e.updatepager(!0,!1))})},getInd:function(e,t){var i=base.getGridRowById.call($(this),e);return!!i&&(!0===t?i:i.rowIndex)},bindKeys:function(e){var d=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var s=this,n=s.p,l=$(s);n.scrollrows=d.scrollingRows,l.on("keydown.jqGrid",function(t){var i=$(this).find("tr[tabindex=0]")[0],e=jgrid.detectRowEditing.call(s,$(t.target).closest("tr.jqgrow").attr("id")),r=function(e){do{if(null===(i=i[e]))return}while($(i).is(":hidden")||!$(i).hasClass("jqgrow"));base.setSelection.call(l,i.id,!0),t.preventDefault()},o=function(e,t){var i=d["on"+e+(t||"")];l.triggerHandler("jqGridKey"+e,[n.selrow]),$.isFunction(i)&&i.call(s,n.selrow)},a=function(e){if(n.treeGrid){var t=n.data[n._index[stripPref(n.idPrefix,i.id)]][n.treeReader.expanded_field];"Right"===e&&(t=!t),t&&$(i).find("div.treeclick").trigger("click")}o(e,"Key")};if(i&&null===e)switch(t.keyCode){case 38:r("previousSibling");break;case 40:r("nextSibling");break;case 37:a("Left");break;case 39:a("Right");break;case 13:o("Enter");break;case 32:o("Space")}})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown.jqGrid")})},getLocalRow:function(t){var i,r=!1;return this.each(function(){var e=this.p;void 0!==t&&null!=e&&null!=e._index&&null!=e.data&&0<=(i=e._index[stripPref(e.idPrefix,t)])&&(r=e.data[i])}),r},progressBar:function(r){return r=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},r||{}),this.each(function(){var e="show"===r.method,t=jqID(this.p.id),i=$("#load_"+t);switch(""!==r.htmlcontent&&i.html(r.htmlcontent),r.loadtype){case"disable":break;case"enable":i.toggle(e);break;case"block":$("#lui_"+t).toggle(e),i.toggle(e)}})},setColWidth:function(o,a,s,n){return this.each(function(){var e,t=$(this),i=this.grid,r=this.p;if("string"==typeof o){if(void 0===(o=r.iColByName[o]))return}else if("number"!=typeof o)return;null!=(e=i.headers[o])&&(e.newWidth=a,i.newWidth=r.tblwidth+a-e.width,i.resizeColumn(o,!r.frozenColumns,n),!1===s||n||(this.fixScrollOffsetAndhBoxPadding(),base.setGridWidth.call(t,i.newWidth+r.scrollOffset,!1)))})},getAutoResizableWidth:function(e){var t=this;if(0===t.length)return-1;var i,r,o,a,s,n=(t=t[0]).rows,l=t.p,d=l.colModel[e],c=$(t.grid.headers[e].el),u=c.children("div"),h=parseFloat(c.css(d.rotated?"padding-top":"padding-left")||0),p=parseFloat(c.css(d.rotated?"padding-bottom":"padding-right")||0),f=u.children("span.s-ico"),g=u.children(".ui-jqgrid-sort-order"),m=u.children("."+l.autoResizing.wrapperClassName),v=d.rotated?m.outerHeight():m.outerWidth(),b=parseFloat(m.css(d.rotated?"height":"width")||0),y=0,w=0,x=null!=d.autoResizing&&void 0!==d.autoResizable.compact?d.autoResizable.compact:l.autoResizing.compact,C=l.autoResizing.wrapperClassName;if(null==d||!d.autoResizable||0===m.length||d.hidden||jgrid.isCellClassHidden(d.classes)||d.fixed)return-1;for(x&&!f.is(":visible")&&"none"===f.css("display")||(w=d.rotated?f.outerHeight(!0):f.outerWidth(!0)+(0<g.length?g.outerWidth(!0):0),l.sortIconsBeforeText||(w-="rtl"===l.direction?parseFloat(f.css("padding-left")||0)+parseFloat(f.css("margin-left")||0):parseFloat(f.css("padding-right")||0)+parseFloat(f.css("margin-right")||0))),d.rotated?w=Math.max(w,v+h+p):w+=v+h+(b===v?h+p:0)+parseFloat(u.css("margin-left")||0)+parseFloat(u.css("margin-right")||0),o=0,n=t.rows;o<n.length;o++)r=(i=n[o]).cells[e],a=$(i.cells[e]),null!=r&&($(i).hasClass("jqgrow")&&"none"!==i.style.display&&"none"!==r.style.display||$(i).hasClass("jqgroup")&&1===r.colSpan)?(s=$(r.firstChild)).hasClass(C)?w=Math.max(w,s.outerWidth()+y):l.treeGrid&&l.ExpandColumn===d.name&&(s=a.children(".cell-wrapper,.cell-wrapperleaf"),w=Math.max(w,s.outerWidth()+y+a.children(".tree-wrap").outerWidth())):$(i).hasClass("jqgfirstrow")&&(y=(jgrid.cell_width?parseFloat(a.css("padding-left")||0)+parseFloat(a.css("padding-right")||0):0)+parseFloat(a.css("border-right")||0)+parseFloat(a.css("border-left")||0));return w=Math.max(w,null!=d.autoResizing&&void 0!==d.autoResizing.minColWidth?d.autoResizing.minColWidth:l.autoResizing.minColWidth),Math.min(w,null!=d.autoResizing&&void 0!==d.autoResizing.maxColWidth?d.autoResizing.maxColWidth:l.autoResizing.maxColWidth)},autoResizeColumn:function(n,l){return this.each(function(){var e,t=$(this),i=this.p,r=i.colModel[n],o=$(this.grid.headers[n].el),a=base.getAutoResizableWidth.call(t,n),s=(r.autoResizing||{}).resetWidthOrg;null==r||a<0||a===r.width||(base.setColWidth.call(t,n,a,i.autoResizing.adjustGridWidth&&!i.autoResizing.fixWidthOnShrink&&!l,l),i.autoResizing.fixWidthOnShrink&&i.shrinkToFit&&!l&&(r.fixed=!0,e=r.widthOrg,r.widthOrg=r.width,base.setGridWidth.call(t,i.width,!0),r.widthOrg=e,r.fixed=!1),(s||void 0===s&&i.autoResizing.resetWidthOrg)&&(r.widthOrg=r.width),o.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var e,t,i=$(this),r=this.p,o=r.colModel,a=o.length,s=r.shrinkToFit,n=r.autoResizing.adjustGridWidth,l=r.autoResizing.fixWidthOnShrink,d=parseInt(r.widthOrg,10),c=this.grid,u=base.autoResizeColumn;for(r.shrinkToFit=!1,r.autoResizing.adjustGridWidth=!0,r.autoResizing.fixWidthOnShrink=!1,e=0;e<a;e++)(t=o[e]).autoResizable&&"actions"!==t.formatter&&u.call(i,e,!0);c.hDiv.scrollLeft=c.bDiv.scrollLeft,r.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft),this.fixScrollOffsetAndhBoxPadding(),isNaN(d)?n&&base.setGridWidth.call(i,c.newWidth+r.scrollOffset,!1):base.setGridWidth.call(i,d,!1),r.autoResizing.fixWidthOnShrink=l,r.autoResizing.adjustGridWidth=n,r.shrinkToFit=s})}});var getTdByColumnIndex=function(e,t){var i=this.grid.fbRows;return null!=(e=null!=i&&i[0].cells.length>t?i[e.rowIndex]:e)&&null!=e.cells?$(e.cells[t]):$()},safeHeightSet=function(e,t){var i=e.height();1<=Math.abs(i-t)&&0<t&&(e.height(t),i=e.height(),1<=Math.abs(t-i)&&e.height(t+Math.round(t-i)))};jgrid.extend({editCell:function(j,I,S){return this.each(function(){var e,t,i,r,o=this,a=$(o),s=o.p,n=o.rows;if(o.grid&&!0===s.cellEdit&&null!=n&&null!=n[j]&&(j=parseInt(j,10),I=parseInt(I,10),!isNaN(j)&&!isNaN(I))){var l,d=n[j],c=null!=d?d.id:null,u=$(d),h=parseInt(s.iCol,10),p=parseInt(s.iRow,10),f=$(n[p]),g=s.savedRow;if(null!=c){if(s.selrow=c,s.knv||a.jqGrid("GridNav"),0<g.length&&0<f.length){if(!0===S&&j===p&&I===h)return;a.jqGrid("saveCell",g[0].id,g[0].ic)}else setTimeout(function(){$("#"+jgrid.jqID(s.knv)).attr("tabindex","-1").focus()},1);if("subgrid"!==(e=(r=s.colModel[I]).name)&&"cb"!==e&&"rn"!==e){i=getTdByColumnIndex.call(o,d,I);var m=r.editable;$.isFunction(m)&&(m=m.call(o,{rowid:c,iCol:I,iRow:j,cmName:e,cm:r,mode:"cell"}));var v=a.jqGrid("getGuiStyles","states.select","edit-cell"),b=a.jqGrid("getGuiStyles","states.hover","selected-row");if(!0!==m||!0!==S||i.hasClass("not-editable-cell"))s.noCellSelection||(0<=h&&0<=p&&(getTdByColumnIndex.call(o,f[0],h).removeClass(v),f.removeClass(b)),i.addClass(v),u.addClass(b)),t=i.html().replace(/&#160;/gi,""),feedback.call(o,"onSelectCell",c,e,t,j,I);else{s.noCellSelection||(0<=h&&0<=p&&(getTdByColumnIndex.call(o,f[0],h).removeClass(v),f.removeClass(b)),i.addClass(v),u.addClass(b)),r.edittype||(r.edittype="text"),l=r.edittype;try{t=$.unformat.call(o,i,{rowId:c,colModel:r},I)}catch(e){t="textarea"===l?i.text():i.html()}if(s.autoEncodeOnEdit&&(t=jgrid.oldDecodePostedData(t)),("&nbsp;"===t||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))&&(t=""),$.isFunction(s.formatCell)){var y=s.formatCell.call(o,c,e,t,j,I);void 0!==y&&(t=y)}feedback.call(o,"beforeEditCell",c,e,t,j,I),g.push({id:j,ic:I,name:e,v:t}),s.editingInfo[c]={mode:"cellEditing",savedRow:g[g.length-1],editable:{}},s.editingInfo[c].editable[e]=m;var w=$.extend({},r.editoptions||{},{id:j+"_"+e,name:e,rowId:c,mode:"cell",cm:r,iCol:I}),x=jgrid.createEl.call(o,l,w,t,!0,$.extend({},jgrid.ajaxOptions,s.ajaxSelectOptions||{})),C=i,_=!0===s.treeGrid&&e===s.ExpandColumn;_&&(C=i.children("span.cell-wrapperleaf,span.cell-wrapper")),C.html("").append(x).attr("tabindex","0"),_&&$(x).width(i.width()-i.children("div.tree-wrap").outerWidth()),jgrid.bindEv.call(o,x,w),s.frozenColumns&&I<a.jqGrid("getNumberOfFrozenColumns")&&safeHeightSet($(o.rows[d.rowIndex].cells[I]),i.height()),setTimeout(function(){$(x).focus()},0),$("input, select, textarea",i).on("keydown",function(e){if(27===e.keyCode&&(0<$("input.hasDatepicker",i).length?$(".ui-datepicker").is(":hidden")?a.jqGrid("restoreCell",j,I):$("input.hasDatepicker",i).datepicker("hide"):a.jqGrid("restoreCell",j,I)),13===e.keyCode&&!e.shiftKey)return a.jqGrid("saveCell",j,I),!1;if(9===e.keyCode){if(o.grid.hDiv.loading)return!1;e.shiftKey?a.jqGrid("prevCell",j,I):a.jqGrid("nextCell",j,I)}e.stopPropagation()}),feedback.call(o,"afterEditCell",c,e,t,j,I)}s.iCol=I,s.iRow=j}}}})},saveCell:function(D,F){return this.each(function(){var r=this,o=$(r),a=r.p,i=r.grid,s=jgrid.info_dialog,e=jgrid.jqID;if(i&&!0===a.cellEdit){var t=o.jqGrid("getGridRes","errors"),n=t.errcap,l=o.jqGrid("getGridRes","edit").bClose,d=a.savedRow,c=1<=d.length?0:null;if(null!==c){var u,h=r.rows[D],p=null!=h?h.id:null,f=null!=h?$(h):$(),g=a.colModel[F],m=g.name,v=getTdByColumnIndex.call(r,h,F),b={},y=jgrid.getEditedValue.call(r,v,g,b);if(y!==d[c].v){void 0!==(u=o.triggerHandler("jqGridBeforeSaveCell",[p,m,y,D,F]))&&(y=u),$.isFunction(a.beforeSaveCell)&&void 0!==(u=a.beforeSaveCell.call(r,p,m,y,D,F))&&(y=u);var w=jgrid.checkValues.call(r,y,F,void 0,void 0,{oldValue:d[c].v,newValue:y,cmName:m,rowid:p,iCol:F,iRow:D,cm:g,tr:h,td:v,mode:"cell"}),x=g.formatoptions||{};if(null==w||!0===w||!0===w[0]){var C=o.triggerHandler("jqGridBeforeSubmitCell",[p,m,y,D,F])||{};if($.isFunction(a.beforeSubmitCell)&&((C=a.beforeSubmitCell.call(r,p,m,y,D,F))||(C={})),0<$("input.hasDatepicker",v).length&&$("input.hasDatepicker",v).datepicker("hide"),"date"===g.formatter&&!0!==x.sendFormatted&&(y=$.unformat.date.call(r,y,g)),"remote"===a.cellsubmit)if(a.cellurl){var _={};_[m]=y;var j=a.prmNames,I=j.id,S=j.oper;_[I]=jgrid.stripPref(a.idPrefix,p),_[S]=j.editoper,_=$.extend(C,_),a.autoEncodeOnEdit&&$.each(_,function(e,t){$.isFunction(t)||(_[e]=jgrid.oldEncodePostedData(t))}),o.jqGrid("progressBar",{method:"show",loadtype:a.loadui,htmlcontent:o.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),i.hDiv.loading=!0,$.ajax($.extend({url:$.isFunction(a.cellurl)?a.cellurl.call(r,a.cellurl,D,F,p,y,m):a.cellurl,data:jgrid.serializeFeedback.call(r,a.serializeCellData,"jqGridSerializeCellData",_),type:"POST",complete:function(e){if(i.endReq.call(r),(e.status<300||304===e.status)&&(0!==e.status||4!==e.readyState)){var t=o.triggerHandler("jqGridAfterSubmitCell",[r,e,_.id,m,y,D,F])||[!0,""];(!0===t||!0===t[0]&&$.isFunction(a.afterSubmitCell))&&(t=a.afterSubmitCell.call(r,e,_.id,m,y,D,F)),null==t||!0===t||!0===t[0]?(o.jqGrid("setCell",p,F,y,!1,!1,!0),v.addClass("dirty-cell"),f.addClass("edited"),feedback.call(r,"afterSaveCell",p,m,y,D,F),d.splice(0,1),delete a.editingInfo[p]):(s.call(r,n,t[1],l),o.jqGrid("restoreCell",D,F))}},error:function(e,t,i){o.triggerHandler("jqGridErrorCell",[e,t,i]),$.isFunction(a.errorCell)?a.errorCell.call(r,e,t,i):s.call(r,n,e.status+" : "+e.statusText+"<br/>"+t,l),o.jqGrid("restoreCell",D,F)}},jgrid.ajaxOptions,a.ajaxCellOptions||{}))}else try{s.call(r,n,t.nourl,l),o.jqGrid("restoreCell",D,F)}catch(e){}if("clientArray"===a.cellsubmit){if(o.jqGrid("setCell",p,F,"select"===g.edittype&&"select"!==g.formatter?b.text:y,!1,!1,!0),v.addClass("dirty-cell"),f.addClass("edited"),feedback.call(r,"afterSaveCell",p,m,y,D,F),a.frozenColumns&&F<o.jqGrid("getNumberOfFrozenColumns"))try{r.rows[h.rowIndex].cells[F].style.height=""}catch(e){}d.splice(0,1),delete a.editingInfo[p]}}else try{setTimeout(function(){var e=jgrid.getRelativeRect.call(r,v);s.call(r,n,y+" "+w[1],l,{top:e.top,left:e.left+$(r).closest(".ui-jqgrid").offset().left})},50),o.jqGrid("restoreCell",D,F)}catch(e){}}else o.jqGrid("restoreCell",D,F)}setTimeout(function(){$("#"+e(a.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(d,c){return this.each(function(){var e,t,i,r=this,o=r.p,a=r.rows[d],s=a.id;if(r.grid&&!0===o.cellEdit){var n=o.savedRow,l=getTdByColumnIndex.call(r,a,c);if(1<=n.length){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker",l).datepicker("hide")}catch(e){}if(t=o.colModel[c],!0===o.treeGrid&&null!=t&&t.name===o.ExpandColumn?l.children("span.cell-wrapperleaf,span.cell-wrapper").empty():l.empty(),l.attr("tabindex","-1"),e=n[0].v,null!=t&&(i=t.formatoptions||{},"date"===t.formatter&&!0!==i.sendFormatted&&(e=$.unformat.date.call(r,e,t)),$(r).jqGrid("setCell",s,c,e,!1,!1,!0),o.frozenColumns&&c<$(r).jqGrid("getNumberOfFrozenColumns")))try{r.rows[a.rowIndex].cells[c].style.height=""}catch(e){}feedback.call(r,"afterRestoreCell",s,e,d,c),n.splice(0,1),delete o.editingInfo[s]}setTimeout(function(){$("#"+o.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(l,d){return this.each(function(){var e,t,i,r=this,o=$(r),a=r.p,s=!1,n=r.rows;if(r.grid&&!0===a.cellEdit&&null!=n&&null!=n[l]){for(e=d+1;e<a.colModel.length;e++)if(t=(i=a.colModel[e]).editable,$.isFunction(t)&&(t=t.call(r,{rowid:n[l].id,iCol:e,iRow:l,cmName:i.name,cm:i,mode:"cell"})),!0===t){s=e;break}!1!==s?o.jqGrid("editCell",l,s,!0):0<a.savedRow.length&&o.jqGrid("saveCell",l,d)}})},prevCell:function(l,d){return this.each(function(){var e,t,i,r=this,o=$(r),a=r.p,s=!1,n=r.rows;if(r.grid&&!0===a.cellEdit&&null!=n&&null!=n[l]){for(e=d-1;0<=e;e--)if(t=(i=a.colModel[e]).editable,$.isFunction(t)&&(t=t.call(r,{rowid:n[l].id,iCol:e,iRow:l,cmName:i.name,cm:i,mode:"cell"})),!0===t){s=e;break}!1!==s?o.jqGrid("editCell",l,s,!0):0<a.savedRow.length&&o.jqGrid("saveCell",l,d)}})},GridNav:function(){return this.each(function(){var r,o,p=this,a=$(p),s=p.p,e=p.grid;if(e&&!0===s.cellEdit){var f=e.bDiv;s.knv=s.id+"_kn";var t=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+s.knv+"'></div></div>");$(t).insertBefore(e.cDiv),$("#"+s.knv).focus().keydown(function(e){var t=parseInt(s.iRow,10),i=parseInt(s.iCol,10);switch(o=e.keyCode,"rtl"===s.direction&&(37===o?o=39:39===o&&(o=37)),o){case 38:0<t-1&&(n(t-1,i,"vu"),a.jqGrid("editCell",t-1,i,!1));break;case 40:t+1<=p.rows.length-1&&(n(t+1,i,"vd"),a.jqGrid("editCell",t+1,i,!1));break;case 37:0<=i-1&&(n(t,r=l(i-1,"lft"),"h"),a.jqGrid("editCell",t,r,!1));break;case 39:i+1<=s.colModel.length-1&&(n(t,r=l(i+1,"rgt"),"h"),a.jqGrid("editCell",t,r,!1));break;case 13:0<=i&&0<=t&&a.jqGrid("editCell",t,i,!0);break;default:return!0}return!1})}function n(e,t,i){var r=p.rows[e];if("v"===i.substr(0,1)){var o=f.clientHeight,a=f.scrollTop,s=r.offsetTop+r.clientHeight,n=r.offsetTop;"vd"===i&&a+o<=s&&(f.scrollTop=f.scrollTop+r.clientHeight),"vu"===i&&n<a&&(f.scrollTop=f.scrollTop-r.clientHeight)}if("h"===i){var l=f.clientWidth,d=f.scrollLeft,c=r.cells[t],u=c.offsetLeft+c.clientWidth,h=c.offsetLeft;u>=l+parseInt(d,10)?f.scrollLeft=f.scrollLeft+c.clientWidth:h<d&&(f.scrollLeft=f.scrollLeft-c.clientWidth)}}function l(e,t){var i,r=0,o=s.colModel;if("lft"===t)for(r=e+1,i=e;0<=i;i--)if(!0!==o[i].hidden){r=i;break}if("rgt"===t)for(r=e-1,i=e;i<o.length;i++)if(!0!==o[i].hidden){r=i;break}return r}})},getChangedCells:function(u){var e=[];return u||(u="all"),this.each(function(){var n=this,l=n.p,d=jgrid.htmlDecode,c=n.rows;n.grid&&!0===l.cellEdit&&$(c).each(function(o){var a={};if($(this).hasClass("edited")){var s=this;$(this.cells).each(function(e){var t=l.colModel[e],i=t.name,r=getTdByColumnIndex.call(n,s,e);if("cb"!==i&&"subgrid"!==i&&"rn"!==i&&("dirty"!==u||r.hasClass("dirty-cell")))try{a[i]=$.unformat.call(n,r[0],{rowId:c[o].id,colModel:t},e)}catch(e){a[i]=d(r.html())}}),a.id=this.id,e.push(a)}})}),e}});var getGuiStyles=base.getGuiStyles,getGridRes=base.getGridRes;jgrid.jqModal=jgrid.jqModal||{},$.extend(!0,jgrid.jqModal,{toTop:!0}),$.extend(jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){var i=!(!(t=$.extend({jqm:!0,gb:"",removemodal:!1},t||{})).gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&$("#"+t.gb.substr(6))[0],r=$(e);if(t.onClose){var o=i?t.onClose.call(i,e):t.onClose(e);if("boolean"==typeof o&&!o)return}if($.fn.jqm&&!0===t.jqm)r.attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{$(">.jqgrid-overlay",t.gb).first().hide()}catch(e){}r.hide().attr("aria-hidden","true")}t.removemodal&&r.remove()},createModal:function(e,t,i,r,o,a,s){var n=jgrid.jqID,l=this.p;i=$.extend(!0,{resizingRightBottomIcon:base.getIconRes.call(this,"form.resizableLtr")},jgrid.jqModal||{},null!=l&&l.jqModal||{},i);var d=document.createElement("div"),c="#"+n(e.themodal),u="rtl"===$(i.gbox).attr("dir"),h=!!e.resizeAlso&&"#"+n(e.resizeAlso);s=$.extend({},s||{}),d.className=getGuiStyles.call(this,"dialog.window","ui-jqdialog"),d.id=e.themodal,d.dir=u?"rtl":"ltr";var p=document.createElement("div");p.className=getGuiStyles.call(this,"dialog.document"),$(p).attr("role","document");var f=document.createElement("div");f.className=getGuiStyles.call(this,"dialog.subdocument"),p.appendChild(f),d.appendChild(p);var g=document.createElement("div");g.className=getGuiStyles.call(this,"dialog.header","ui-jqdialog-titlebar "+(u?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),g.id=e.modalhead,$(g).append("<span class='ui-jqdialog-title'>"+i.caption+"</span>");var m=getGuiStyles.call(this,"states.hover"),v=$("<a aria-label='Close' class='"+getGuiStyles.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){v.addClass(m)},function(){v.removeClass(m)}).append("<span class='"+base.getIconRes.call(this,"form.close")+"'></span>");$(g).append(v);var b=document.createElement("div");$(b).addClass(getGuiStyles.call(this,"dialog.content","ui-jqdialog-content")).attr("id",e.modalcontent),$(b).append(t),f.appendChild(b),$(f).prepend(g),!0===a?$("body").append(d):"string"==typeof a?$(a).append(d):$(d).insertBefore(r),$(d).css(s),void 0===i.jqModal&&(i.jqModal=!0);var y={};if($.fn.jqm&&!0===i.jqModal?(0===i.left&&0===i.top&&i.overlay&&((i=$(o).offset()).left+=4,i.top+=4),y.top=i.top+"px",y.left=i.left):0===i.left&&0===i.top||(y.left=i.left,y.top=i.top+"px"),$("a.ui-jqdialog-titlebar-close",g).click(function(){var e=$(c).data("onClose")||i.onClose,t=$(c).data("gbox")||i.gbox;return jgrid.hideModal(c,{gb:t,jqm:i.jqModal,onClose:e,removemodal:i.removemodal||!1}),!1}),0!==i.width&&i.width||(i.width=300),0!==i.height&&i.height||(i.height=200),!i.zIndex){var w=$(r).parents("*[role=dialog]").first().css("z-index");w?(i.zIndex=parseInt(w,10)+2,i.toTop=!0):i.zIndex=950}if(y.left&&(y.left+="px"),$(d).css($.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex},y)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),void 0===i.drag&&(i.drag=!0),void 0===i.resize&&(i.resize=!0),i.drag)if($.fn.jqDrag)$(g).css("cursor","move"),$(d).jqDrag(g);else try{$(d).draggable({handle:$("#"+n(g.id))})}catch(e){}if(i.resize)if($.fn.jqResize)$(b).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+i.resizingRightBottomIcon+"'></div>"),$(c).jqResize(".jqResize",h);else try{$(d).resizable({handles:"se, sw",alsoResize:h})}catch(e){}!0===i.closeOnEscape&&$(d).keydown(function(e){if(27===e.which){var t=$(c).data("onClose")||i.onClose;jgrid.hideModal(c,{gb:i.gbox,jqm:i.jqModal,onClose:t,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""})}})},viewModal:function(e,t){if(t=$.extend(!0,{overlay:30,modal:!1,overlayClass:getGuiStyles.call(this,"overlay"),onShow:jgrid.showModal,onHide:jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},jgrid.jqModal||{},t||{}),$.fn.jqm&&!0===t.jqm)t.jqM?$(e).attr("aria-hidden","false").jqm(t).jqmShow():$(e).attr("aria-hidden","false").jqmShow();else{""!==t.gbox&&($(">.jqgrid-overlay",t.gbox).first().show(),$(e).data("gbox",t.gbox)),$(e).show().attr("aria-hidden","false");try{$(":input:visible",e)[0].focus()}catch(e){}}},info_dialog:function(e,t,i,r){var o=this,a=o.p,s=$.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},jgrid.jqModal||{},null!=a&&a.jqModal||{},{caption:"<b>"+e+"</b>"},r||{}),n=s.jqModal;$.fn.jqm&&!n&&(n=!1);var l,d="",c=getGuiStyles.call(o,"states.hover");if(0<s.buttons.length)for(l=0;l<s.buttons.length;l++)void 0===s.buttons[l].id&&(s.buttons[l].id="info_button_"+l),d+=jgrid.builderFmButon.call(o,s.buttons[l].id,s.buttons[l].text);var u=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",h="text-align:"+s.align+";",p=$("#info_dialog"),f="<div id='info_id'>";f+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+u+";"+h+"'>"+t+"</div>",(i||""!==d)&&(f+="<hr class='"+getGuiStyles.call(o,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+s.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(i?jgrid.builderFmButon.call(o,"closedialog",i):"")+d+"</div>"),f+="</div>";try{"false"===p.attr("aria-hidden")&&jgrid.hideModal("#info_dialog",{jqm:n}),p.remove()}catch(e){}jgrid.createModal.call(o,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},f,s,"","",!0),p=$("#info_dialog"),d&&$.each(s.buttons,function(){$("#"+jgrid.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(e){return $.isFunction(e.data.click)&&e.data.click.call(o,e,p),!1})}),$("#closedialog","#info_id").click(function(){return jgrid.hideModal("#info_dialog",{jqm:n,onClose:p.data("onClose")||s.onClose,gb:p.data("gbox")||s.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(c)},function(){$(this).removeClass(c)}),$.isFunction(s.beforeOpen)&&s.beforeOpen(),jgrid.viewModal.call(o,"#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:s.modal,jqm:n}),$.isFunction(s.afterOpen)&&s.afterOpen();try{p.focus()}catch(e){}},bindEv:function(e,t){$.isFunction(t.dataInit)&&t.dataInit.call(this,e,t),t.dataEvents&&$.each(t.dataEvents,function(){void 0!==this.data?$(e).on(this.type,"object"==typeof this.data&&null!==this.data?$.extend(!0,{},t,this.data):this.data,this.fn):$(e).on(this.type,t,this.fn)})},createEl:function(e,t,i,r,o){var a="",u=this,s=u.p,n=jgrid.info_dialog,l=function(e){return getGridRes.call($(u),e)},d=l("errors.errcap"),c=l("edit"),h=c.msg,p=c.bClose;function f(i,e,t){var r=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","generateValue","postData","selectFilled","rowId","column","mode","cm","iCol"];void 0!==t&&$.isArray(t)&&$.merge(r,t),$.each(e,function(e,t){-1===$.inArray(e,r)&&$(i).attr(e,t)}),e.hasOwnProperty("id")||$(i).attr("id",jgrid.randId())}if(null==t)return"";switch(e){case"textarea":a=document.createElement("textarea"),r?t.cols||$(a).css({width:"100%","box-sizing":"border-box"}):t.cols||(t.cols=19),t.rows||(t.rows=2),("&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i=""),a.value=i,f(a,t),$(a).attr({role:"textbox"});break;case"checkbox":if((a=document.createElement("input")).type="checkbox",""!==i&&null!=i||(i=t.hasOwnProperty("defaultValue")?$.isFunction(t.defaultValue)?t.defaultValue.call(u,{cellValue:i,options:t}):t.defaultValue:"false"),t.value){var g=t.value.split(":");i===g[0]&&(a.checked=!0,a.defaultChecked=!0),a.value=i,$(a).data("offval",g[1])}else{var m=String(i).toLowerCase();m.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==m?(a.checked=!0,a.defaultChecked=!0,a.value=i):a.value="on",$(a).data("offval","off")}f(a,t,["value"]),$(a).attr({role:"checkbox","aria-checked":a.checked?"true":"false"});break;case"select":a=document.createElement("select");var v,b=[],y=null;!0===t.multiple||"multiple"===t.multiple?(v=!0,a.multiple="multiple",$(a).attr("aria-multiselectable","true"),b=i.split(","),b=$.map(b,function(e){return $.trim(e)})):(v=!1,b[0]=$.trim(i)),void 0===t.size&&(t.size=v?3:1);try{y=t.rowId}catch(e){}if(s&&s.idPrefix&&(y=jgrid.stripPref(s.idPrefix,y)),void 0===t.dataUrl&&t.generateValue&&null!=s.indexByColumnData[t.cm.name]&&(t.value=u.generateValueFromColumnIndex(t.cm.name,t.separator,t.delimiter)),void 0!==t.dataUrl){var w=t.postData||o.postData,x={elem:a,options:t,cm:t.cm,mode:t.mode,rowid:y,iCol:t.iCol,ovm:b};f(a,t,w?["postData"]:void 0),$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(u,y,i,String(t.name),x):t.dataUrl,type:"GET",dataType:"html",data:$.isFunction(w)?w.call(u,y,i,String(t.name)):w,context:x,success:function(e,t,i){var r=this.ovm,o=this.elem,a=this.cm,s=this.iCol,n=$.extend({},this.options),l=this.rowid,d=this.mode,c=$.isFunction(n.buildSelect)?n.buildSelect.call(u,e,i,a,s):e;"string"==typeof c&&(c=$($.trim(c)).html()),c&&($(o).append(c),setTimeout(function(){var t;$("option",o).each(function(e){0===e&&o.multiple&&(this.selected=!1),-1<$.inArray($.trim($(this).val()),r)&&(this.selected=!0,t=!0)}),t||$("option",o).each(function(){-1<$.inArray($.trim($(this).text()),r)&&(this.selected=!0)}),jgrid.fullBoolFeedback.call(u,n.selectFilled,"jqGridSelectFilled",{elem:o,options:n,cm:a,rowid:l,mode:d,cmName:null!=a?a.name:n.name,iCol:s})},0))}},o||{}))}else t.value&&(jgrid.fillSelectOptions(a,t.value,void 0===t.separator?":":t.separator,void 0===t.delimiter?";":t.delimiter,v,i),f(a,t,["value"]),jgrid.fullBoolFeedback.call(u,t.selectFilled,"jqGridSelectFilled",{elem:a,options:t,cm:t.cm,rowid:y,mode:t.mode,cmName:null!=t.cm?t.cm.name:t.name,iCol:t.iCol}));break;case"text":case"password":case"button":var C;C="button"===e?"button":"textbox",(a=document.createElement("input")).type=e,f(a,t),a.value=i,"button"!==e&&(r?t.size||$(a).css({width:"100%","box-sizing":"border-box"}):t.size||(t.size=20)),$(a).attr("role",C);break;case"image":case"file":(a=document.createElement("input")).type=e,f(a,t);break;case"custom":a=document.createElement("span");try{if(!$.isFunction(t.custom_element))throw"editoptions.custom_element is not a function";var _=t.custom_element.call(u,i,t);if(!(_ instanceof jQuery||jgrid.isHTMLElement(_)||"string"==typeof _))throw"editoptions.custom_element returns value of a wrong type";_=$(_).addClass("customelement").attr({id:t.id,name:t.name}),$(a).empty().append(_)}catch(e){"e1"===e&&n.call(u,d,"function 'custom_element' "+h.nodefined,p),"e2"===e?n.call(u,d,"function 'custom_element' "+h.novalue,p):n.call(u,d,"string"==typeof e?e:e.message,p)}}return a},checkDate:function(e,t){var i,r={};if(i=-1!==(e=e.toLowerCase()).indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(i),3!==(t=t.split(i)).length)return!1;var o,a,s,n=-1,l=-1,d=-1;for(a=0;a<e.length;a++)s=isNaN(t[a])?0:parseInt(t[a],10),r[e[a]]=s,-1!==(o=e[a]).indexOf("y")&&(n=a),-1!==o.indexOf("m")&&(d=a),-1!==o.indexOf("d")&&(l=a);o="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1;var c,u;return-1!==n&&(c=r[e[n]].toString(),2===o&&1===c.length&&(o=1),c.length===o&&(0!==r[e[n]]||"00"===t[n])&&(-1!==d&&(!((c=r[e[d]].toString()).length<1||r[e[d]]<1||12<r[e[d]])&&(-1!==l&&!((c=r[e[l]].toString()).length<1||r[e[l]]<1||31<r[e[l]]||2===r[e[d]]&&r[e[l]]>((u=r[e[n]])%4!=0||u%100==0&&u%400!=0?28:29)||r[e[l]]>[0,31,29,31,30,31,30,31,31,30,31,30,31][r[e[d]]])))))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t;if(!jgrid.isEmpty(e)){if(!(t=e.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(t[3]){if(t[1]<1||12<t[1])return!1}else if(23<t[1])return!1;if(59<t[2])return!1}return!0},checkValues:function(e,t,i,r,o){var a,s,n,l,d,c=this,u=c.p,h=u.colModel,p=jgrid.isEmpty,f=getGridRes.call($(c),"edit.msg"),g=function(e){var t=a[e];return $.isFunction(t)?t.call(c,o):t},m=getGridRes.call($(c),"formatter.date.masks");if(void 0===i){if("string"==typeof t&&(t=u.iColByName[t]),void 0===t||t<0)return[!0,"",""];l=h[t],a=l.editrules,null!=l.formoptions&&(s=l.formoptions.label)}else a=i,s=void 0===r?"_":r,l=h[t];if(a){if(s||(s=null!=u.colNames?u.colNames[t]:l.label),!0===g("required")&&p(e))return[!1,s+": "+f.required,""];var v=!1!==g("required");if(!0===g("number")&&(!1!==v||!p(e))&&isNaN(e))return[!1,s+": "+f.number,""];if(void 0!==a.minValue&&!isNaN(a.minValue)&&parseFloat(e)<parseFloat(a.minValue))return[!1,s+": "+f.minValue+" "+a.minValue,""];if(void 0!==a.maxValue&&!isNaN(a.maxValue)&&parseFloat(e)>parseFloat(a.maxValue))return[!1,s+": "+f.maxValue+" "+a.maxValue,""];if(!0===g("email")&&!(!1===v&&p(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,s+": "+f.email,""];if(!0===g("integer")&&(!1!==v||!p(e))){if(isNaN(e))return[!1,s+": "+f.integer,""];if(e%1!=0||-1!==e.indexOf("."))return[!1,s+": "+f.integer,""]}if(!0===g("date")&&!(!1===v&&p(e)||(l.formatoptions&&l.formatoptions.newformat?(n=l.formatoptions.newformat,m.hasOwnProperty(n)&&(n=m[n])):n=h[t].datefmt||"Y-m-d",jgrid.checkDate(n,e))))return[!1,s+": "+f.date+" - "+n,""];if(!0===g("time")&&!(!1===v&&p(e)||jgrid.checkTime(e)))return[!1,s+": "+f.date+" - hh:mm (am/pm)",""];if(!0===g("url")&&!(!1===v&&p(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,s+": "+f.url,""];if(!0===a.custom){if(!1!==v||!p(e))return $.isFunction(a.custom_func)?(d=a.custom_func.call(c,e,s,t),$.isArray(d)?d:[!1,f.customarray,""]):[!1,f.customfcheck,""]}else if($.isFunction(a.custom)&&(!1!==v||!p(e)))return d=a.custom.call(c,o),$.isArray(d)?d:[!1,f.customarray,""]}return[!0,"",""]}}),jgrid.extend({getColProp:function(e){var t,i=this[0];return null!=i&&i.grid&&void 0!==(t=i.p.iColByName[e])?i.p.colModel[t]:{}},setColProp:function(i,r){return this.each(function(){var e,t=this.p;this.grid&&null!=t&&r&&void 0!==(e=t.iColByName[i])&&$.extend(!0,t.colModel[e],r)})},sortGrid:function(l,d,c){return this.each(function(){var e,t,i,r=this.grid,o=this.p,a=o.colModel,s=a.length,n=!1;if(r)for(l||(l=o.sortname),"boolean"!=typeof d&&(d=!1),t=0;t<s;t++)if((e=a[t]).index===l||e.name===l){!0===o.frozenColumns&&!0===e.frozen&&(n=r.fhDiv.find("#"+jqID(o.id+"_"+l))),n&&0!==n.length||(n=r.headers[t].el),("boolean"!=typeof(i=e.sortable)||i)&&this.sortData(e.index||e.name,t,d,c,n);break}})},clearBeforeUnload:function(){return this.each(function(){var e,t=this,i=t.p,r=t.grid,o=jgrid.clearArray,a=Object.prototype.hasOwnProperty;$.isFunction(r.emptyRows)&&r.emptyRows.call(t,!0,!0),$(document).off("mousemove.jqGrid mouseup.jqGrid"+i.id),$(t).off();var s,n=r.headers.length;for(s=0;s<n;s++)r.headers[s].el=null;for(e in r)r.hasOwnProperty(e)&&(r.propOrMethod=null);var l=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(n=l.length,s=0;s<n;s++)a.call(t,l[s])&&(t[l[s]]=null);t._index={},o(i.data),o(i.lastSelectedData),o(i.selarrrow),o(i.savedRow),i.editingInfo={}})},GridDestroy:function(){return this.each(function(){var e=this.p;if(this.grid&&null!=e){e.pager&&$(e.pager).remove();try{$("#alertmod_"+jqID(e.id)).remove(),$(this).jqGrid("clearBeforeUnload"),$(e.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var e=$(this),t=this.p,i=$.fn.jqGrid;this.grid&&(e.removeClass(i.getGuiStyles.call(e,"grid","ui-jqgrid-btable")),t.pager&&(t.pager.substr(1,$.jgrid.uidPref.length)===$.jgrid.uidPref?$(t.pager).remove():$(t.pager).empty().removeClass(i.getGuiStyles.call(e,"pager.pager","ui-jqgrid-pager "+i.getGuiStyles.call(e,"bottom"))).removeAttr("style").removeAttr("dir")),e.jqGrid("clearBeforeUnload"),e.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),e.empty(),e.insertBefore(t.gBox).show(),$(t.pager).insertBefore(t.gBox).show(),$(t.gBox).remove())})},setGridState:function(d){return this.each(function(){var t=this,e=t.p,i=t.grid,r=i.cDiv,o=$(i.uDiv),a=$(i.ubDiv);if(i&&null!=e){var s=function(e){return base.getIconRes.call(t,"gridMinimize."+e)},n=s("visible"),l=s("hidden");"hidden"===d?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",e.gView).slideUp("fast"),e.pager&&$(e.pager).slideUp("fast"),e.toppager&&$(e.toppager).slideUp("fast"),!0===e.toolbar[0]&&("both"===e.toolbar[1]&&a.slideUp("fast"),o.slideUp("fast")),e.footerrow&&$(".ui-jqgrid-sdiv",e.gBox).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",r).removeClass(n).addClass(l),e.gridstate="hidden"):"visible"===d&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",e.gView).slideDown("fast"),e.pager&&$(e.pager).slideDown("fast"),e.toppager&&$(e.toppager).slideDown("fast"),!0===e.toolbar[0]&&("both"===e.toolbar[1]&&a.slideDown("fast"),o.slideDown("fast")),e.footerrow&&$(".ui-jqgrid-sdiv",e.gBox).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",r).removeClass(l).addClass(n),e.gridstate="visible")}})},filterToolbar:function(e){return this.each(function(){var k=this,f=k.grid,R=$(k),O=k.p,q=jgrid.info_dialog,b=jgrid.htmlEncode;if(!this.ftoolbar){var N,G=$.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:O.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},jgrid.search,O.searching||{},e||{}),y=O.colModel,T=function(e){return getGridRes.call(R,e)},E=T("errors.errcap"),P=T("edit.bClose"),A=T("edit.msg"),z=getGuiStyles.call(k,"states.hover"),w=getGuiStyles.call(k,"states.select"),M=getGuiStyles.call(k,"filterToolbar.dataField"),B={},H=function(e){var t="gs_";switch(G.idMode){case"compatibility":t+=O.idPrefix;break;case"new":t+=O.id+"_"}return t+e},g=function(e){return"#"+jqID(H(e))},m=function(e){var t=(e.value||"").split(":");return{on:t[0]||"on",off:t[1]||"off"}},c=function(e){var t,i,r,o,a,s,n=O.postData[G.sFilter],l={},d=O.iColByName;if(e)for(i=0;i<y.length;i++)!1!==(a=y[i]).search&&(s=a.searchoptions||{},l[a.name]={op:s.sopt?s.sopt[0]:"select"===a.stype||"checkbox"===a.stype?"eq":G.defaultSearch,data:void 0!==s.defaultValue?s.defaultValue:""});if(!n||!O.search)return l;if("string"==typeof n)try{n=$.parseJSON(n)}catch(e){n={}}else n=n||{};if(r=n.rules||{},null==n||null!=n.groupOp&&null!=G.groupOp&&n.groupOp.toUpperCase()!==G.groupOp.toUpperCase()||null==r||0===r.length||null!=n.groups&&0<n.groups.length)return l;for(i=0;i<r.length;i++)for(o=r[i],a=y[d[o.field]],t=0;t<y.length;t++)if(((a=y[t]).index||a.name)===o.field&&!1!==a.search){if((s=a.searchoptions||{}).sopt){if($.inArray(o.op,s.sopt)<0)continue}else if("select"===a.stype||"checkbox"===a.stype){if("eq"!==o.op)continue}else if(o.op!==G.defaultSearch)continue;l[a.name]={op:o.op,data:o.data}}return l},L=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},V=function(){var u={},h=0,p={};$.each(y,function(){var e,t,r=this,i=r.index||r.name,o=r.searchoptions||{},a=$(g(r.name),!0===r.frozen&&!0===O.frozenColumns?f.fhDiv:f.hDiv),s=function(e,t){var i=r.formatoptions||{};return void 0!==i[e]?i[e]:T("formatter."+(t||r.formatter)+"."+e)},n=function(e){var t=s("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")};if(t=G.searchOperators?a.parent().prev().children("a").data("soper")||G.defaultSearch:o.sopt?o.sopt[0]:"select"===r.stype||"checkbox"===r.stype?"eq":G.defaultSearch,"custom"===r.stype&&$.isFunction(o.custom_value)&&0<a.length&&"SPAN"===a[0].nodeName.toUpperCase())e=o.custom_value.call(k,a.children(".customelement").first(),"get");else if("select"===r.stype)e=a.prop("multiple")?null==(e=a.val())||0===e.length?"":e.join(O.inFilterSeparator||","):a.val();else if("checkbox"===r.stype){var l=m(o);switch(a.data("state")){case-1:e="";break;case 0:e=l.off;break;default:e=l.on}}else switch(e=$.trim(a.val()),r.formatter){case"integer":""!==(e=n(e).replace(s("decimalSeparator","number"),"."))&&(e=String(parseInt(e,10)));break;case"number":""!==(e=n(e).replace(s("decimalSeparator"),"."))&&"0"===String(e).charAt(0)&&(e=String(parseFloat(e)));break;case"currency":var d=s("prefix"),c=s("suffix");d&&d.length&&e.substr(0,d.length)===d&&(e=e.substr(d.length)),c&&c.length&&e.length>c.length&&e.substr(e.length-c.length,c.length)===c&&(e=e.substr(0,e.length-c.length)),""!==(e=n(e).replace(s("decimalSeparator"),"."))&&(e=String(parseFloat(e)))}if(e||"nu"===t||"nn"===t||0<=$.inArray(t,O.customUnaryOperations))u[i]=e,p[i]=t,h++;else if(u.hasOwnProperty(i)&&delete u[i],!G.stringResult&&!G.searchOperators&&"local"!==O.datatype)try{null!=O.postData&&O.postData.hasOwnProperty(i)&&delete O.postData[i]}catch(e){}});var e,t=0<h;if(G.stringResult||G.searchOperators||"local"===O.datatype){var i='{"groupOp":"'+G.groupOp+'","rules":[',r=0;$.each(u,function(e,t){0<r&&(i+=","),i+='{"field":"'+e+'",',i+='"op":"'+p[e]+'",',i+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',r++}),i+="]}",O.postData[G.sFilter]=i,$.each([G.sField,G.sValue,G.sOper],function(e,t){O.postData.hasOwnProperty(t)&&delete O.postData[t]})}else $.extend(O.postData,u);O.searchurl&&(e=O.url,R.jqGrid("setGridParam",{url:O.searchurl}));var o="stop"===R.triggerHandler("jqGridToolbarBeforeSearch");!o&&$.isFunction(G.beforeSearch)&&(o=G.beforeSearch.call(k)),o||R.jqGrid("setGridParam",{search:t}).trigger("reloadGrid",[$.extend({page:1},G.reloadGridSearchOptions||{})]),e&&R.jqGrid("setGridParam",{url:e}),R.triggerHandler("jqGridToolbarAfterSearch"),$.isFunction(G.afterSearch)&&G.afterSearch.call(k)},W=T("search.odata")||[],U=O.customSortOperations,X=[],Y=$("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});G.loadFilterDefaults&&(B=c()||{}),$.each(y,function(e){var c,t,i,r,o,a,s,n=this,u="filter",l=n.searchoptions||{},d=n.editoptions||{},h=$("<th></th>",{class:getGuiStyles.call(k,"colHeaders","ui-th-column ui-th-"+O.direction+" "+(G.applyLabelClasses&&n.labelClasses||"")),role:"gridcell","aria-describedby":O.id+"_"+n.name}),p=$("<div></div>"),f=$("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),g=f.children("tbody").children("tr").children("td"),m=g.eq(0),v=g.eq(1),b=g.eq(2);if(!0===this.hidden&&h.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),c=$.extend({mode:u,name:n.name,cm:n,iCol:e,id:H(n.name)},l),this.search){if(G.searchOperators){for(r=O.search&&null!=B[this.name]?B[this.name].op:c.sopt?c.sopt[0]:"select"===n.stype||"checkbox"===n.stype?"eq":G.defaultSearch,o=0;o<W.length;o++)if(W[o].oper===r){i=G.operands[r]||"";break}var y;if(void 0===i&&null!=U)for(y in U)if(U.hasOwnProperty(y)&&y===r){i=U[y].operand;break}void 0===i&&(i="="),m.append("<a title='"+(null!=c.searchtitle?c.searchtitle:T("search.operandTitle"))+"' data-soper='"+r+"' class='"+getGuiStyles.call(k,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+i+"</a>")}if(m.data("colindex",e),null!=c.sopt&&1!==c.sopt.length||m.hide(),O.search&&null!=B[this.name]&&(c.defaultValue=B[this.name].data),void 0===c.clearSearch&&(c.clearSearch="text"===this.stype),c.clearSearch){var w=$.isFunction(G.resetTitle)?G.resetTitle.call(k,{options:G,cm:n,cmName:n.name,iCol:e}):(T("search.resetTitle")||"Clear Search Value")+" "+jgrid.stripHtml(O.colNames[e]);b.append("<a title='"+w+"' aria-label='"+w+"' class='"+getGuiStyles.call(k,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+G.resetIcon+"</span></a>")}else b.hide();switch(p.append(f),this.stype){case"checkbox":var x=void 0!==c.defaultValue?c.defaultValue:"-1";s=$("<input role='search' type='checkbox' class='"+M+"' name='"+(n.index||n.name)+"' id='"+H(n.name)+"' aria-labelledby='jqgh_"+O.id+"_"+n.name+"' data-state='"+x+"'/>"),"-1"===x?s.prop("indeterminate",!0):"1"===x&&s.prop("checked",!0),s.click(function(){var e=$(this);switch(e.data("state")){case-1:L(e,1);break;case 0:L(e,-1);break;default:L(e,0)}!0===G.autosearch&&V()}),v.append(s),c.attr&&s.attr(c.attr),X.push({elem:s[0],options:c});break;case"select":var C,_,j;if(t=this.surl||c.dataUrl)$.ajax($.extend({url:t,context:{$tdInput:v,options:c,cm:n,iCol:e},dataType:"html",success:function(e,t,i){var r,o,a,s=this.cm,n=this.iCol,l=this.options,d=this.$tdInput;void 0!==l.buildSelect?(r=l.buildSelect.call(k,e,i,s,n))&&d.append(r):d.append(e),(a=d.children("select")).attr({name:s.index||s.name,id:H(s.name)}),l.attr&&a.attr(l.attr),a.addClass(M),a.css({width:"100%"}),0===a.find("option[value='']").length&&"string"==typeof c.noFilterText&&((o=document.createElement("option")).value="",o.innerHTML=c.noFilterText,a.prepend(o),null!=$(a[0].options[a[0].selectedIndex]).attr("selected")||a[0].multiple||(a[0].selectedIndex=0)),a[0].multiple&&0===a.find("option[selected]").length&&-1!==a[0].selectedIndex&&(a[0].options[a[0].selectedIndex].selected=!1),void 0!==l.defaultValue&&a.val(l.defaultValue),jgrid.bindEv.call(k,a[0],l),jgrid.fullBoolFeedback.call(k,l.selectFilled,"jqGridSelectFilled",{elem:a[0],options:l,cm:s,cmName:s.name,iCol:n,mode:u}),!0===G.autosearch&&a.change(function(){return V(),!1})}},jgrid.ajaxOptions,O.ajaxSelectOptions||{}));else if(n.searchoptions?(C=void 0===l.value?d.value||"":l.value,_=void 0===l.separator?d.separator||":":l.separator,j=void 0===l.delimiter?d.delimiter||";":l.delimiter):n.editoptions&&(C=void 0===d.value?"":d.value,_=void 0===d.separator?":":d.separator,j=void 0===d.delimiter?";":d.delimiter),l.generateValue&&null!=O.indexByColumnData[n.name]&&(C=k.generateValueFromColumnIndex(n.name,_,j)),C){if((a=document.createElement("select")).style.width="100%",s=$(a).attr({name:n.index||n.name,role:"search",id:H(n.name),"aria-describedby":O.id+"_"+n.name}),c.attr&&s.attr(c.attr),!jgrid.fillSelectOptions(a,C,_,j,null!=c.attr&&c.attr.multiple)&&"string"==typeof c.noFilterText){var I=document.createElement("option");I.value="",I.innerHTML=c.noFilterText,I.selected=!0,s.prepend(I)}void 0!==c.defaultValue&&s.val(c.defaultValue),s.addClass(M),X.push({elem:a,options:c}),v.append(a),jgrid.fullBoolFeedback.call(k,c.selectFilled,"jqGridSelectFilled",{elem:a,options:n.searchoptions||d,cm:n,cmName:n.name,iCol:e,mode:u}),!0===G.autosearch&&s.change(function(){return V(),!1})}break;case"text":if(s=$("<input role='search' type='text' class='"+M+"' name='"+(n.index||n.name)+"' id='"+H(n.name)+"' aria-labelledby='jqgh_"+O.id+"_"+n.name+"' value='"+(void 0!==c.defaultValue?c.defaultValue:"")+"'/>"),v.append(s),n.createColumnIndex&&c.generateDatalist){var S="dl_"+H(n.name),D=R.jqGrid("generateDatalistFromColumnIndex",n.name);null!=D&&0<D.length&&(s.attr("list",S),v.append(D.attr("id",S)))}c.attr&&s.attr(c.attr),X.push({elem:s[0],options:c}),!0===G.autosearch&&(G.searchOnEnter?s.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(V(),!1):this}):s.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:N&&clearTimeout(N),N=setTimeout(function(){V()},G.autosearchDelay)}}));break;case"custom":v.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(n.index||n.name)+"' id='"+H(n.name)+"'/>");try{if(!$.isFunction(c.custom_element))throw"e1";var F=c.custom_element.call(k,void 0!==c.defaultValue?c.defaultValue:"",c);if(!F)throw"e2";F=$(F).addClass("customelement"),p.find("span[name='"+(n.index||n.name)+"']").append(F)}catch(e){"e1"===e&&q.call(k,E,"function 'custom_element' "+A.nodefined,P),"e2"===e?q.call(k,E,"function 'custom_element' "+A.novalue,P):q.call(k,E,"string"==typeof e?e:e.message,P)}}}h.append(p),h.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){$(this).addClass(z)},function(){$(this).removeClass(z)}),Y.append(h),G.searchOperators||m.hide()}),$(f.hDiv).find(">div>.ui-jqgrid-htable>thead").append(Y),$.each(X,function(){jgrid.bindEv.call(k,this.elem,this.options)}),G.searchOperators&&($(".soptclass",Y).click(function(e){var t=$(this).offset();!function(r,e,t){$("#sopt_menu").remove(),e=parseInt(e,10),t=parseInt(t,10)+18;var i,o,a=0,s=[],n=$(r).data("soper"),l=$(r).data("colname"),d=$(".ui-jqgrid-view").css("font-size")||"11px",c="<ul id='sopt_menu' class='"+getGuiStyles.call(k,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+d+";left:"+e+"px;top:"+t+"px;'>";if(void 0!==(a=O.iColByName[l])){var u,h,p,f,g,m=y[a],v=$.extend({},m.searchoptions);for(v.sopt||(v.sopt=[],v.sopt[0]="select"===m.stype||"checkbox"===m.stype?"eq":G.defaultSearch),$.each(W,function(){s.push(this.oper)}),null!=U&&$.each(U,function(e){s.push(e)}),a=0;a<v.sopt.length;a++)p=v.sopt[a],-1!==(o=$.inArray(p,s))&&(void 0!==(u=W[o])?(f=G.operands[p],g=u.text):null!=U&&(f=(h=U[p]).operand,g=h.text),i=n===p?w:"",c+='<li class="'+getGuiStyles.call(k,"searchToolbar.menuItem","ui-jqgrid-menu-item "+i)+'" role="presentation"><a class="'+getGuiStyles.call(k,"searchToolbar.menuItemButton","g-menu-item")+'" tabindex="0" role="menuitem" value="'+b(p)+'" data-oper="'+b(f)+'"><table><tr><td style="width:25px">'+b(f)+"</td><td>"+b(g)+"</td></tr></table></a></li>");c+="</ul>",$("body").append(c),$("#sopt_menu > li > a").hover(function(){$(this).addClass(z)},function(){$(this).removeClass(z)}).click(function(){var e=$(this).attr("value"),t=$(this).data("oper");if(R.triggerHandler("jqGridToolbarSelectOper",[e,t,r]),$("#sopt_menu").hide(),$(r).data("soper",e).text(t),!0===G.autosearch){var i=$(r).parent().next().children()[0];($(i).val()||"nu"===e||"nn"===e||0<=$.inArray(e,O.customUnaryOperations))&&V()}})}}(this,t.left,t.top),e.stopPropagation()}),$("body").on("click",function(e){"soptclass"!==e.target.className&&$("#sopt_menu").hide()})),$(".clearsearchclass",Y).click(function(){var e,t,i=$(this).closest(".ui-search-clear"),r=i.siblings(".ui-search-oper"),o=r.children("a"),a=o.data("soper"),s=parseInt(r.data("colindex"),10),n=i.siblings(".ui-search-input"),l=y[s],d=$.extend({},l.searchoptions||{}),c=d.defaultValue||"";switch(l.stype){case"select":c?n.find("select").val(c):n.find("select")[0].selectedIndex=0;break;case"checkbox":L(n.find("input[type=checkbox]"),-1);break;default:n.find("input").val(c)}("nu"===a||"nn"===a||0<=$.inArray(a,O.customUnaryOperations))&&(e=d.sopt?d.sopt[0]:"select"===l.stype||"checkbox"===l.stype?"eq":G.defaultSearch,t=null!=U&&null!=U[e]?U[e].operand:G.operands[e]||"",o.data("soper",e).text(t)),!0===G.autosearch&&V()}),k.ftoolbar=!0,k.triggerToolbar=V,k.clearToolbar=function(e){var a,s={},n=0;e="boolean"!=typeof e||e,$.each(y,function(){var t,i,e=this,r=$(g(e.name),!0===e.frozen&&!0===O.frozenColumns?f.fhDiv:f.hDiv),o=e.searchoptions||{};switch(void 0!==o.defaultValue&&(t=o.defaultValue),a=e.index||e.name,e.stype){case"checkbox":L(r,-1);break;case"select":if(i=!(0<r.length&&r[0].multiple),r.find("option").each(function(e){if(this.selected=0===e&&i,$(this).val()===t)return!(this.selected=!0)}),void 0!==t)s[a]=t,n++;else try{delete O.postData[a]}catch(e){}break;case"text":if(r.val(t||""),void 0!==t)s[a]=t,n++;else try{delete O.postData[a]}catch(e){}break;case"custom":$.isFunction(o.custom_value)&&0<r.length&&"SPAN"===r[0].nodeName.toUpperCase()&&(void 0===t&&(t=""),o.custom_value.call(k,r.children(".customelement").first(),"set",t))}});var t,i=0<n;if(O.resetsearch=!0,G.stringResult||G.searchOperators||"local"===O.datatype){var r='{"groupOp":"'+G.groupOp+'","rules":[',o=0;$.each(s,function(e,t){0<o&&(r+=","),r+='{"field":"'+e+'",',r+='"op":"eq",',r+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',o++}),r+="]}",O.postData[G.sFilter]=r,$.each([G.sField,G.sValue,G.sOper],function(e,t){O.postData.hasOwnProperty(t)&&delete O.postData[t]})}else $.extend(O.postData,s);O.searchurl&&(t=O.url,R.jqGrid("setGridParam",{url:O.searchurl}));var l="stop"===R.triggerHandler("jqGridToolbarBeforeClear");!l&&$.isFunction(G.beforeClear)&&(l=G.beforeClear.call(k)),l||e&&R.jqGrid("setGridParam",{search:i}).trigger("reloadGrid",[$.extend({page:1},G.reloadGridResetOptions||{})]),t&&R.jqGrid("setGridParam",{url:t}),R.triggerHandler("jqGridToolbarAfterClear"),$.isFunction(G.afterClear)&&G.afterClear.call(k)},k.toggleToolbar=function(){var e=$("tr.ui-search-toolbar",f.hDiv),t=!0===O.frozenColumns&&$("tr.ui-search-toolbar",f.fhDiv);"none"===e.css("display")?(e.show(),t&&t.show()):(e.hide(),t&&t.hide()),!0===O.frozenColumns&&(R.jqGrid("destroyFrozenColumns"),R.jqGrid("setFrozenColumns"))},!0===O.frozenColumns&&(R.jqGrid("destroyFrozenColumns"),R.jqGrid("setFrozenColumns")),R.on("jqGridRefreshFilterValues.filterToolbar"+(G.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var e,t,i,r,o,a,s,n=c(!0)||{};if(G.stringResult||G.searchOperators||"local"===O.datatype||!O.search){for(e in n)if(n.hasOwnProperty(e)&&(t=n[e],a=(i=$(g(e))).closest("th.ui-th-column"),0<i.length&&0<a.length)){if(s=(O.colModel[a[0].cellIndex]||{}).searchoptions||{},"SELECT"===i[0].tagName.toUpperCase()&&i[0].multiple)i.val(t.data.split(O.inFilterSeparator||","));else if(i.is("input[type=checkbox]")){var l=m(s);L(i,t.data===l.on?1:t.data===l.off?0:-1)}else if(0<i.find(".customelement").length&&$.isFunction(s.custom_value)){var d=s.custom_value.call(k,i.find(".customelement").first(),"get");""===t.data&&void 0!==s.defaultValue&&(t.data=s.defaultValue),void 0===d&&(d=""),t.data!==d&&String(t.data)!==String(d)&&s.custom_value.call(k,i.find(".customelement").first(),"set",t.data)}else""===t.data&&void 0!==s.defaultValue&&(t.data=s.defaultValue),$.trim(i.val())!==String(t.data)&&i.val(t.data);(r=i.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",t.op),r.text(G.operands[t.op]||(O.customSortOperations[t.op]||{}).operand)}for(o=0;o<O.colModel.length;o++)e=O.colModel[o].name,n.hasOwnProperty(e)||$(g(e)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var e=this;e.ftoolbar&&(e.triggerToolbar=null,e.clearToolbar=null,e.toggleToolbar=null,e.ftoolbar=!1,$(e.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===e.p.frozenColumns&&$(e).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(c){return void 0===c&&(c=!0),this.each(function(){var e,t,i,r,o,a=this.grid,s=this.p.colModel,n=$("table.ui-jqgrid-htable thead",a.hDiv);if(a){$(this).off(".setGroupHeaders");var l=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),d=a.headers;for(e=0,t=d.length;e<t;e++){o=s[e].hidden?"none":"",i=$(d[e].el).width(d[e].width).css("display",o);try{i.removeAttr("rowSpan")}catch(e){i.attr("rowSpan",1)}l.append(i),0<(r=i.children("span.ui-jqgrid-resize")).length&&(r[0].style.height=""),i.children("div")[0].style.top=""}$(n).children("tr.ui-jqgrid-labels").remove(),$(n).prepend(l),!0===c&&$(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(D){return D=$.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},D||{}),this.each(function(){this.p.groupHeader=D;var e,t,i,r,o,a,s,n,l,d,c,u,h,p,f=this,g=0,m=f.p,v=m.colModel,b=v.length,y=f.grid.headers,w=$("table.ui-jqgrid-htable",f.grid.hDiv),x=jgrid.isCellClassHidden,C=w.children("thead").children("tr.ui-jqgrid-labels"),_=C.last().addClass("jqg-second-row-header"),j=w.children("thead"),I=w.find(".jqg-first-row-header");void 0===I[0]?I=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):I.empty();var S=function(e,t){var i;for(i=0;i<t.length;i++)if(t[i].startColumnName===e)return t[i];return 0};for($(f).prepend(j),i=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),e=0;e<b;e++)if(o=y[e].el,a=$(o),t=v[e],s={height:"0",width:y[e].width+"px",display:t.hidden?"none":""},$("<th>",{role:"gridcell"}).css(s).addClass("ui-first-th-"+m.direction+(D.applyLabelClasses?" "+(t.labelClasses||""):"")).appendTo(I),o.style.width="",p=getGuiStyles.call(f,"colHeaders","ui-th-column-header ui-th-"+m.direction+" "+(D.applyLabelClasses&&t.labelClasses||"")),l=S(t.name,D.groupHeaders)){for(d=l.numberOfColumns,c=l.titleText,n=u=0;n<d&&e+n<b;n++)v[e+n].hidden||x(v[e+n].classes)||u++;r=$("<th>").addClass(p).html(c||"&nbsp;"),0<u&&r.attr("colspan",String(u)),m.headertitles&&r.attr("title",r.text()),0===u&&r.hide(),a.before(r),i.append(o),g=d-1}else 0===g?D.useColSpanStyle?a.attr("rowspan",C.length+1):($("<th>").addClass(p).css({display:t.hidden?"none":"","border-top":"0 none"}).insertBefore(a),i.append(o)):(i.append(o),g--);(h=$(f).children("thead")).prepend(I),i.insertAfter(_),w.prepend(h),$(f).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(0===e.length)return 0;var t,i=(e=e[0]).p.colModel,r=i.length,o=-1;for(t=0;t<r&&!0===i[t].frozen;t++)o=t;return o+1},setFrozenColumns:function(F){return F=F||{},this.each(function(){var i=this,o=$(i),v=i.p,a=i.grid;if(a&&null!=v&&!0!==v.frozenColumns){var b,e,t=v.colModel,r=t.length,s=-1,n=!1,l=[],d=jqID(v.id),c=getGuiStyles.call(i,"states.hover");if(!0!==v.subGrid&&!0!==v.treeGrid&&!v.scroll){for(b=0;b<r&&!0===t[b].frozen;b++)n=!0,s=b,l.push("#jqgh_"+d+"_"+jqID(t[b].name));if(v.sortable){e=$(a.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{e.sortable("destroy")}catch(e){}o.jqGrid("setGridParam",{sortable:{options:{items:0<l.length?">th:not(:has("+l.join(",")+"),:hidden)":">th:not(:hidden)"}}}),o.jqGrid("sortableColumns",e)}if(0<=s&&n){var u=v.caption?$(a.cDiv).outerHeight():0,h=$(".ui-jqgrid-htable",v.gView).height();v.toppager&&(u+=$(a.topDiv).outerHeight()),!0===v.toolbar[0]&&"bottom"!==v.toolbar[1]&&(u+=$(a.uDiv).outerHeight()),a.fhDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===v.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+u+"px;height:"+h+"px;' class='"+getGuiStyles.call(i,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),a.fbDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===v.direction?"right:0;":"left:0;")+"top:"+(parseInt(u,10)+parseInt(h,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),$(v.gView).append(a.fhDiv);var p=$(".ui-jqgrid-htable",v.gView).clone(!0),f=p[0].tHead.rows;if(v.groupHeader){$(f[0].cells).filter(":gt("+s+")").remove(),$(f).filter(".jqg-third-row-header").each(function(){$(this).children("th[id]").each(function(){var e,t=$(this).attr("id");t&&t.substr(0,i.id.length+1)===i.id+"_"&&(e=t.substr(i.id.length+1),v.iColByName[e]>s&&$(this).remove())})});var g,m=-1,y=-1;$(f).filter(".jqg-second-row-header").children("th").each(function(){if(g=parseInt($(this).attr("colspan")||1,10),1<parseInt($(this).attr("rowspan")||1,10)?(m++,y++):g&&(m+=g,y++),m===s)return!1}),m!==s&&(y=s),$(f).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){$(this).children(":gt("+y+")").remove()})}else $(f).each(function(){$(this).children(":gt("+s+")").remove()});if($(p).width(1),$(a.fhDiv).append(p).scroll(function(){this.scrollLeft=0}),v.footerrow){var w=$(".ui-jqgrid-bdiv",v.gView).height();a.fsDiv=$("<div style='position:absolute;"+("rtl"===v.direction?"right:0;":"left:0;")+"top:"+(parseInt(u,10)+parseInt(h,10)+parseInt(w,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),$(v.gView).append(a.fsDiv);var x=$(".ui-jqgrid-ftable",v.gView).clone(!0);$("tr",x).each(function(){$("td:gt("+s+")",this).remove()}),$(x).width(1),$(a.fsDiv).append(x)}$(v.gView).append(a.fbDiv),$(a.bDiv).scroll(function(){$(a.fbDiv).scrollTop($(this).scrollTop())}),$(a.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(e){a.bDiv.scrollTop+=$.isFunction(F.mouseWheel)?F.mouseWheel.call(i,e):"mousewheel"===e.type?-e.originalEvent.wheelDelta/10:6*e.originalEvent.detail}),!0===v.hoverrows&&$(v.idSel).off("mouseover.jqGrid mouseout.jqGrid");var C=function(e,t){var i=e.height();1<=Math.abs(i-t)&&0<t&&(e.height(t),i=e.height(),1<=Math.abs(t-i)&&e.height(t+Math.round(t-i)))},_=function(e,t){var i=e.width();1<=Math.abs(i-t)&&(e.width(t),i=e.width(),1<=Math.abs(t-i)&&e.width(t+Math.round(t-i)))},j=function(e,t,i,r){var o,a,s,n,l,d,c,u,h,p,f,g,m=$(t).position().top;if(null!=e&&0<e.length){if(e[0].scrollTop=t.scrollTop,e.css("rtl"===v.direction?{top:m,right:0}:{top:m,left:0}),s=e.children("table").children("thead").children("tr"),0===(n=$(t).children("div").children("table").children("thead").children("tr")).length&&0<e.children("table").length&&(s=$(e.children("table")[0].rows),n=$($(t).children("div").children("table")[0].rows)),p=0<(a=Math.min(s.length,n.length))?$(s[0]).position().top:0,f=0<a?$(n[0]).position().top:0,0<=i)for(0<=r&&(a=Math.min(r+1,a)),o=i;o<a;o++)if("none"!==(l=$(n[o])).css("display")&&l.is(":visible")){if(m=l.position().top,c=(d=$(s[o])).position().top,u=l.height(),null!=v.groupHeader&&v.groupHeader.useColSpanStyle)for(g=l[0].cells,b=0;b<g.length;b++)null!=(h=g[b])&&"TH"===h.nodeName.toUpperCase()&&(u=Math.max(u,$(h).height()));C(d,u+(m-f)+(p-c))}C(e,t.clientHeight)}},I={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},S={header:I,resizeFooter:!0,body:I};o.on("jqGridAfterGridComplete.setFrozenColumns",function(){$(v.idSel+"_frozen").remove(),$(a.fbDiv).height(a.hDiv.clientHeight);var e=$(this).clone(!0),t=e[0].rows,i=o[0].rows;if($(t).filter("tr[role=row]").each(function(){$(this.cells).filter("td[role=gridcell]:gt("+s+")").remove()}),a.fbRows=t,e.width(1).attr("id",v.id+"_frozen"),e.appendTo(a.fbDiv),!0===v.hoverrows){var r=function(e,t,i){$(e)[t](c),$(i[e.rowIndex])[t](c)};$(t).filter(".jqgrow").hover(function(){r(this,"addClass",i)},function(){r(this,"removeClass",i)}),$(i).filter(".jqgrow").hover(function(){r(this,"addClass",t)},function(){r(this,"removeClass",t)})}j(a.fhDiv,a.hDiv,0,-1),j(a.fbDiv,a.bDiv,0,-1),a.sDiv&&j(a.fsDiv,a.sDiv,0,-1)});var D=function(e){$(a.fbDiv).scrollTop($(a.bDiv).scrollTop()),e.header.resizeDiv&&j(a.fhDiv,a.hDiv,e.header.resizedRows.iRowStart,e.header.resizedRows.iRowEnd),e.body.resizeDiv&&j(a.fbDiv,a.bDiv,e.body.resizedRows.iRowStart,e.body.resizedRows.iRowEnd),e.resizeFooter&&a.sDiv&&e.resizeFooter&&j(a.fsDiv,a.sDiv,0,-1);var t=a.fhDiv[0].clientWidth;e.header.resizeDiv&&null!=a.fhDiv&&1<=a.fhDiv.length&&C($(a.fhDiv),a.hDiv.clientHeight),e.body.resizeDiv&&null!=a.fbDiv&&0<a.fbDiv.length&&_($(a.fbDiv),t),e.resizeFooter&&null!=a.fsDiv&&0<=a.fsDiv.length&&_($(a.fsDiv),t)};$(v.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){D(S)},50)}),o.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var i=o.jqGrid("getInd",t);D({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:i,iRowEnd:i}}})}),o.on("jqGridResizeStop.setFrozenColumns",function(){D(S)}),o.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){D(t||S)}),a.hDiv.loading||setTimeout(function(){o.triggerHandler("jqGridAfterGridComplete")},0),v.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var e=$(this),t=this.grid,i=this.p,r=jqID(i.id);if(t&&!0===i.frozenColumns){if($(t.fhDiv).remove(),$(t.fbDiv).off(".setFrozenColumns"),$(t.fbDiv).remove(),t.fhDiv=null,t.fbDiv=null,t.fbRows=null,i.footerrow&&($(t.fsDiv).remove(),t.fsDiv=null),e.off(".setFrozenColumns"),!0===i.hoverrows){var o,a=getGuiStyles.call(this,"states.hover");e.on("mouseover.jqGrid",function(e){o=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(o).attr("class")&&$(o).addClass(a)}).on("mouseout.jqGrid",function(e){o=$(e.target).closest("tr.jqgrow"),$(o).removeClass(a)})}if(i.frozenColumns=!1,i.sortable){var s=$(t.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");s.sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",s)}}})}}),$.fn.jqFilter=function(e){if("string"==typeof e){var t=$.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}var T=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},jgrid.filter,e||{});return this.each(function(){if(!this.filter){null!==(this.p=T).filter&&void 0!==T.filter||(T.filter={groupOp:T.groupOps[0].op,rules:[],groups:[]});var e,t,i=T.columns.length,k=/msie/i.test(navigator.userAgent)&&!window.opera,R=$.isFunction,r=null!=jgrid.defaults&&R(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert,O=function(){return $("#"+jgrid.jqID(T.id))[0]||null},q=function(e,t){return $(O()).jqGrid("getGuiStyles",e,t||"")},N=function(e){return $(O()).jqGrid("getGridRes","search."+e)},G=function(e){var t=O(),i=t.p.iColByName[e];return void 0!==i?{cm:t.p.colModel[i],iCol:i}:void 0!==(i=t.p.iPropByName[e])?{cm:t.p.additionalProperties[i],iCol:i,isAddProp:!0}:{cm:null,iCol:-1}},b=q("states.error"),o=q("dialog.content");if(T.initFilter=$.extend(!0,{},T.filter),i){for(e=0;e<i;e++)(t=T.columns[e]).stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.cmName=t.name,t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={});T.showQuery&&$(this).append("<table class='queryresult "+o+"' style='display:block;max-width:440px;border:0px none;' dir='"+T.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var n=function(e,t){var i=[!0,""],r=O();if(R(t.searchrules))i=t.searchrules.call(r,e,t);else if(jgrid&&jgrid.checkValues)try{i=jgrid.checkValues.call(r,e,-1,t.searchrules,t.label)}catch(e){}i&&i.length&&!1===i[0]&&(T.error=!i[0],T.errmsg=i[1])};this.onchange=function(){return T.error=!1,T.errmsg="",!!R(T.onChange)&&T.onChange.call(O(),T,this)},this.reDraw=function(){$("table.group:first",this).remove();var e=this.createTableForGroup(T.filter,null);$(this).append(e),R(T.afterRedraw)&&T.afterRedraw.call(O(),T,this)},this.createTableForGroup=function(r,e){var o,a=this,t=$("<table class='"+q("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),i="left";"rtl"===T.direction&&(i="right",t.attr("dir","rtl")),null===e&&t.append("<tr class='error' style='display:none;'><th colspan='5' class='"+b+"' align='"+i+"'></th></tr>");var s=$("<tr></tr>");t.append(s);var n=$("<th colspan='5' align='"+i+"'></th>");if(s.append(n),!0===T.ruleButtons){var l=$("<select class='"+q("searchDialog.operationSelect","opsel")+"'></select>");n.append(l);var d,c="";for(o=0;o<T.groupOps.length;o++)d=r.groupOp===a.p.groupOps[o].op?" selected='selected'":"",c+="<option value='"+a.p.groupOps[o].op+"'"+d+">"+a.p.groupOps[o].text+"</option>";l.append(c).on("change",function(){r.groupOp=$(l).val(),a.onchange()})}var u,h,p,f="<span></span>";if(T.groupButton&&(f=$("<input type='button' value='+ {}' title='"+N("addGroupTitle")+"' class='"+q("searchDialog.addGroupButton","add-group")+"'/>")).on("click",function(){return void 0===r.groups&&(r.groups=[]),r.groups.push({groupOp:T.groupOps[0].op,rules:[],groups:[]}),a.reDraw(),a.onchange(),!1}),n.append(f),!0===T.ruleButtons){var g,m=$("<input type='button' value='+' title='"+N("addRuleTitle")+"' class='"+q("searchDialog.addRuleButton","add-rule ui-add")+"'/>");m.on("click",function(){var e,t,i;for(void 0===r.rules&&(r.rules=[]),o=0;o<a.p.columns.length;o++)if(e=void 0===a.p.columns[o].search||a.p.columns[o].search,t=!0===a.p.columns[o].hidden,!0===a.p.columns[o].searchoptions.searchhidden&&e||e&&!t){g=a.p.columns[o];break}return i=g.searchoptions.sopt?g.searchoptions.sopt:a.p.sopt?a.p.sopt:-1!==$.inArray(g.searchtype,a.p.strarr)?a.p.stropts:a.p.numopts,r.rules.push({field:g.name,op:i[0],data:""}),a.reDraw(),!1}),n.append(m)}if(null!==e){var v=$("<input type='button' value='-' title='"+N("deleteGroupTitle")+"' class='"+q("searchDialog.deleteGroupButton","delete-group")+"'/>");n.append(v),v.on("click",function(){for(o=0;o<e.groups.length;o++)if(e.groups[o]===r){e.groups.splice(o,1);break}return a.reDraw(),a.onchange(),!1})}if(void 0!==r.groups)for(o=0;o<r.groups.length;o++)u=$("<tr></tr>"),t.append(u),h=$("<td class='first'></td>"),u.append(h),(p=$("<td colspan='4'></td>")).append(this.createTableForGroup(r.groups[o],r)),u.append(p);if(void 0===r.groupOp&&(r.groupOp=a.p.groupOps[0].op),void 0!==r.rules)for(o=0;o<r.rules.length;o++)t.append(this.createTableRowForRule(r.rules[o],r));return t},this.createTableRowForRule=function(f,e){var t,g,i,r,m=this,v=O(),o=$("<tr></tr>"),a="";o.append("<td class='first'></td>");var s=$("<td class='columns'></td>");o.append(s);var b,y=$("<select class='"+q("searchDialog.label","selectLabel")+"'></select>"),w=[];s.append(y),y.on("change",function(){f.field=$(y).val();var e,t,i=$(this).parents("tr:first");for(t=0;t<m.p.columns.length;t++)if(m.p.columns[t].name===f.field){e=m.p.columns[t];break}if(e){var r=$.extend({},e.editoptions||{});delete r.readonly,delete r.disabled;var o=$.extend({},r||{},e.searchoptions||{},G(e.cmName),{id:jgrid.randId(),name:e.name,mode:"search"});o.column=e,k&&"text"===e.inputtype&&(o.size||(o.size=10));var a=jgrid.createEl.call(v,e.inputtype,$.extend({},o,o.attr||{}),"",!0,m.p.ajaxSelectOptions||{},!0);$(a).addClass(q("searchDialog.elem","input-elm")),g=o.sopt?o.sopt:m.p.sopt?m.p.sopt:-1!==$.inArray(e.searchtype,m.p.strarr)?m.p.stropts:m.p.numopts;var s,n,l,d="",c=0;for(w=[],$.each(m.p.ops,function(){w.push(this.oper)}),m.p.cops&&$.each(m.p.cops,function(e){w.push(e)}),t=0;t<g.length;t++)n=g[t],-1!==(b=$.inArray(g[t],w))&&(l=void 0!==(s=m.p.ops[b])?s.text:m.p.cops[n].text,0===c&&(f.op=n),d+="<option value='"+n+"'>"+l+"</option>",c++);if($(".selectopts",i).empty().append(d),$(".selectopts",i)[0].selectedIndex=0,jgrid.msie&&jgrid.msiever()<9){var u=parseInt($("select.selectopts",i)[0].offsetWidth,10)+1;$(".selectopts",i).width(u),$(".selectopts",i).css("width","auto")}if($(".data",i).empty().append(a),e.createColumnIndex&&o.generateDatalist){var h="dl_"+a.id,p=$(v).jqGrid("generateDatalistFromColumnIndex",e.name);null!=p&&0<p.length&&($(a).attr("list",h),$(".data",i).append(p.attr("id",h)))}jgrid.bindEv.call(v,a,o),$(".input-elm",i).on("change",o,function(e){var t=e.target,i=e.data.column;f.data=i&&"custom"===i.inputtype&&R(i.searchoptions.custom_value)?i.searchoptions.custom_value.call(v,$(this).find(".customelement").first(),"get"):t.value,$(t).is("input[type=checkbox]")&&!$(t).is(":checked")&&(f.data=$(t).data("offval")),m.onchange()}),setTimeout(function(){f.data=$(a).val(),m.onchange()},0)}});var n,l,d=0;for(t=0;t<m.p.columns.length;t++)n=void 0===m.p.columns[t].search||m.p.columns[t].search,l=!0===m.p.columns[t].hidden,(!0===m.p.columns[t].searchoptions.searchhidden&&n||n&&!l)&&(r="",f.field===m.p.columns[t].name&&(r=" selected='selected'",d=t),a+="<option value='"+m.p.columns[t].name+"'"+r+">"+m.p.columns[t].label+"</option>");y.append(a);var c=$("<td class='operators'></td>");o.append(c),i=T.columns[d],k&&"text"===i.inputtype&&(i.searchoptions.size||(i.searchoptions.size=10));var u=$.extend({},i.editoptions||{});delete u.readonly,delete u.disabled;var h=$.extend({},u,i.searchoptions||{},G(i.cmName),{id:jgrid.randId(),name:i.name,mode:"search"});h.column=i;var p=jgrid.createEl.call(v,i.inputtype,$.extend({},h,h.attr||{}),f.data,!0,m.p.ajaxSelectOptions||{},!0);("nu"===f.op||"nn"===f.op||0<=$.inArray(f.op,v.p.customUnaryOperations))&&($(p).attr("readonly","true"),$(p).attr("disabled","true"));var x,C,_=$("<select class='"+q("searchDialog.operator","selectopts")+"'></select>");for(c.append(_),_.on("change",function(){f.op=$(_).val();var e=$(this).parents("tr:first"),t=$(".input-elm",e)[0];"nu"===f.op||"nn"===f.op||0<=$.inArray(f.op,v.p.customUnaryOperations)?(f.data="","SELECT"!==t.tagName.toUpperCase()&&(t.value=""),t.setAttribute("readonly","true"),t.setAttribute("disabled","true")):("SELECT"===t.tagName.toUpperCase()&&(f.data=t.value),t.removeAttribute("readonly"),t.removeAttribute("disabled")),m.onchange()}),g=i.searchoptions.sopt?i.searchoptions.sopt:m.p.sopt?m.p.sopt:-1!==$.inArray(i.searchtype,m.p.strarr)?m.p.stropts:m.p.numopts,a="",$.each(m.p.ops,function(){w.push(this.oper)}),m.p.cops&&$.each(m.p.cops,function(e){w.push(e)}),t=0;t<g.length;t++)C=g[t],-1!==(b=$.inArray(g[t],w))&&(x=m.p.ops[b],a+="<option value='"+C+"'"+(r=f.op===C?" selected='selected'":"")+">"+(void 0!==x?x.text:m.p.cops[C].text)+"</option>");_.append(a);var j=$("<td class='data'></td>");if(o.append(j),j.append(p),i.createColumnIndex&&i.searchoptions.generateDatalist){var I="dl_"+p.id,S=$(v).jqGrid("generateDatalistFromColumnIndex",i.name);null!=S&&0<S.length&&($(p).attr("list",I),j.append(S.attr("id",I)))}jgrid.bindEv.call(v,p,i.searchoptions),$(p).addClass(q("searchDialog.elem","input-elm")).on("change",function(){f.data="custom"===i.inputtype?i.searchoptions.custom_value.call(v,$(this).find(".customelement").first(),"get"):$(this).val(),$(this).is("input[type=checkbox]")&&!$(this).is(":checked")&&(f.data=$(this).data("offval")),$.isArray(f.data)&&(f.data=f.data.join(T.inFilterSeparator||",")),m.onchange()});var D=$("<td></td>");if(o.append(D),!0===T.ruleButtons){var F=$("<input type='button' value='-' title='"+N("deleteRuleTitle")+"' class='"+q("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>");D.append(F),F.on("click",function(){for(t=0;t<e.rules.length;t++)if(e.rules[t]===f){e.rules.splice(t,1);break}return m.reDraw(),m.onchange(),!1})}return o},this.getStringForGroup=function(e){var t,i="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){1<i.length&&(i+=" "+e.groupOp+" ");try{i+=this.getStringForGroup(e.groups[t])}catch(e){r(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)1<i.length&&(i+=" "+e.groupOp+" "),i+=this.getStringForRule(e.rules[t])}catch(e){r(e)}return"()"===(i+=")")?"":i},this.getStringForRule=function(e){var t,i,r,o="",a="",s=e.data;for(t=0;t<T.ops.length;t++)if(T.ops[t].oper===e.op){o=T.operands.hasOwnProperty(e.op)?T.operands[e.op]:"",a=T.ops[t].oper;break}if(""===a&&null!=T.cops)for(r in T.cops)if(T.cops.hasOwnProperty(r)&&(a=r,o=T.cops[r].operand,R(T.cops[r].buildQueryValue)))return T.cops[r].buildQueryValue.call(T,{cmName:e.field,searchValue:s,operand:o});for(t=0;t<T.columns.length;t++)if(T.columns[t].name===e.field){i=T.columns[t];break}return null==i?"":("bw"!==a&&"bn"!==a||(s+="%"),"ew"!==a&&"en"!==a||(s="%"+s),"cn"!==a&&"nc"!==a||(s="%"+s+"%"),"in"!==a&&"ni"!==a||(s=" ("+s+")"),T.errorcheck&&n(e.data,i),-1!==$.inArray(i.searchtype,["int","integer","float","number","currency"])||"nn"===a||"nu"===a||0<=$.inArray(a,O().p.customUnaryOperations)?e.field+" "+o+" "+s:e.field+" "+o+' "'+s+'"')},this.resetFilter=function(){T.filter=$.extend(!0,{},T.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+b,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+b,this).html(T.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(T.filter)},this.toString=function(){var r=this;function o(e){if(r.p.errorcheck){var t,i;for(t=0;t<r.p.columns.length;t++)if(r.p.columns[t].name===e.field){i=r.p.columns[t];break}i&&n(e.data,i)}return e.op+"(item."+e.field+",'"+e.data+"')"}return function e(t){var i,r="(";if(void 0!==t.groups)for(i=0;i<t.groups.length;i++)1<r.length&&("OR"===t.groupOp?r+=" || ":r+=" && "),r+=e(t.groups[i]);if(void 0!==t.rules)for(i=0;i<t.rules.length;i++)1<r.length&&("OR"===t.groupOp?r+=" || ":r+=" && "),r+=o(t.rules[i]);return"()"==(r+=")")?"":r}(T.filter)},this.reDraw(),T.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=$.parseJSON(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}});var xmlJsonClass={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var i=this.removeWhite(e),r=this.toObj(i),o=this.toJson(r,e.nodeName,"\t");return"{\n"+t+(t?o.replace(/\t/g,t):o.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var i,l=function(e,t,i){var r,o,a,s,n="";if(e instanceof Array)if(0===e.length)n+=i+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(r=0,o=e.length;r<o;r+=1)n+=i+l(e[r],t,i+"\t")+"\n";else if("object"==typeof e){for(s in a=!1,n+=i+"<"+t,e)e.hasOwnProperty(s)&&("@"===s.charAt(0)?n+=" "+s.substr(1)+'="'+e[s].toString()+'"':a=!0);if(n+=a?">":"/>",a){for(s in e)e.hasOwnProperty(s)&&("#text"===s?n+=e[s]:"#cdata"===s?n+="<![CDATA["+e[s]+"]]>":"@"!==s.charAt(0)&&(n+=l(e[s],s,i+"\t")));n+=("\n"===n.charAt(n.length-1)?i:"")+"</"+t+">"}}else"function"==typeof e?n+=i+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),'""'===e.toString()||0===e.toString().length?n+=i+"<"+t+">__EMPTY_STRING_</"+t+">":n+=i+"<"+t+">"+e.toString()+"</"+t+">");return n},r="";for(i in e)e.hasOwnProperty(i)&&(r+=l(e[i],i,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(e){var t,i,r={},o=/function/i,a=0,s=0,n=!1;if(1===e.nodeType){if(e.attributes.length)for(t=0;t<e.attributes.length;t+=1)r["@"+e.attributes[t].nodeName]=(e.attributes[t].nodeValue||"").toString();if(e.firstChild){for(i=e.firstChild;i;i=i.nextSibling)1===i.nodeType?n=!0:3===i.nodeType&&i.nodeValue.match(/[^ \f\n\r\t\v]/)?a+=1:4===i.nodeType&&(s+=1);if(n)if(a<2&&s<2)for(this.removeWhite(e),i=e.firstChild;i;i=i.nextSibling)3===i.nodeType?r["#text"]=this.escape(i.nodeValue):4===i.nodeType?o.test(i.nodeValue)?r[i.nodeName]=[r[i.nodeName],i.nodeValue]:r["#cdata"]=this.escape(i.nodeValue):r[i.nodeName]?r[i.nodeName]instanceof Array?r[i.nodeName][r[i.nodeName].length]=this.toObj(i):r[i.nodeName]=[r[i.nodeName],this.toObj(i)]:r[i.nodeName]=this.toObj(i);else e.attributes.length?r["#text"]=this.escape(this.innerXml(e)):r=this.escape(this.innerXml(e));else if(a)e.attributes.length?r["#text"]=this.escape(this.innerXml(e)):"__EMPTY_ARRAY_"===(r=this.escape(this.innerXml(e)))?r="[]":"__EMPTY_STRING_"===r&&(r="");else if(s)if(1<s)r=this.escape(this.innerXml(e));else for(i=e.firstChild;i;i=i.nextSibling){if(o.test(e.firstChild.nodeValue)){r=e.firstChild.nodeValue;break}r["#cdata"]=this.escape(i.nodeValue)}}e.attributes.length||e.firstChild||(r=null)}else 9===e.nodeType?r=this.toObj(e.documentElement):(null!=$.jgrid&&null!=$.jgrid.defaults&&$.isFunction($.jgrid.defaults.fatalError)?$.jgrid.defaults.fatalError:alert)("unhandled node type: "+e.nodeType);return r},toJson:function(e,t,i,r){void 0===r&&(r=!0);var o,a,s,n=t?'"'+t+'"':"",l="\t",d="\n",c=[],u=[];if(r||(d=l=""),"[]"===e)n+=t?":[]":"[]";else if(e instanceof Array){for(a=0,o=e.length;a<o;a+=1)c[a]=this.toJson(e[a],"",i+l,r);n+=(t?":[":"[")+(1<c.length?d+i+l+c.join(","+d+i+l)+d+i:c.join(""))+"]"}else if(null===e)n+=(t&&":")+"null";else if("object"==typeof e){for(s in e)e.hasOwnProperty(s)&&(u[u.length]=this.toJson(e[s],s,i+l,r));n+=(t?":{":"{")+(1<u.length?d+i+l+u.join(","+d+i+l)+d+i:u.join(""))+"}"}else n+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return n},innerXml:function(e){var t,i="",o=function(e){var t,i,r="";if(1===e.nodeType){for(r+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)r+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(r+=">",i=e.firstChild;i;i=i.nextSibling)r+=o(i);r+="</"+e.nodeName+">"}else r+="/>"}else 3===e.nodeType?r+=e.nodeValue:4===e.nodeType&&(r+="<![CDATA["+e.nodeValue+"]]>");return r};if(e.hasOwnProperty("innerHTML"))i=e.innerHTML;else for(t=e.firstChild;t;t=t.nextSibling)i+=o(t);return i},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,i=e.firstChild;i;)3===i.nodeType?i.nodeValue.match(/[^ \f\n\r\t\v]/)?i=i.nextSibling:(t=i.nextSibling,e.removeChild(i),i=t):(1===i.nodeType&&this.removeWhite(i),i=i.nextSibling);return e}};window.xmlJsonClass=xmlJsonClass;var jgridFeedback=jgrid.feedback,fullBoolFeedback=jgrid.fullBoolFeedback,builderFmButon=jgrid.builderFmButon,addFormIcon=function(e,t,i){var r;!0===t[0]&&(r="<span class='"+mergeCssClasses("fm-button-icon",i,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(r):e.addClass("fm-button-icon-left").prepend(r))},getGuiStateStyles=function(e){return getGuiStyles.call(this,"states."+e)},hideRowsWithoutVissibleCells=function(e){e.find("tr[data-rowpos]").each(function(){var e=0;$(this).children("td").each(function(){"hidden"!==$(this).css("visibility")&&e++}),e||$(this).hide()})},isEmptyString=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)};jgrid.extend({searchGrid:function(D){return this.each(function(){var a=this,s=$(a),n=a.p;if(a.grid&&null!=n){var l=$.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:n.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},base.getGridRes.call(s,"search"),jgrid.search||{},n.searching||{},D||{}),d="fbox_"+n.id,e=l.commonIconClass,i={themodal:"searchmod"+d,modalhead:"searchhd"+d,modalcontent:"searchcnt"+d,resizeAlso:d},t="#"+jqID(i.themodal),r=n.gBox,o=n.gView,c=$.each,u=n.postData[l.sFilter],h=function(){var e=$.makeArray(arguments);return e.unshift("Search"),e.unshift("Filter"),e.unshift(l),jgridFeedback.apply(a,e)},p=function(){jgrid.hideModal(t,{gb:r,jqm:l.jqModal,onClose:l.onClose,removemodal:l.removemodal})};if("string"==typeof u&&(u=""!==$.trim(u)?$.parseJSON(u):void 0),$(t).remove(),void 0!==$(t)[0])S($("#fbox_"+jqID(n.id)));else{var f=$("<div><div id='"+d+"' class='"+getGuiStyles.call(a,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(o);"rtl"===n.direction&&f.attr("dir","rtl");var g,m,v="",b="",y=!1,w=-1,x=$.extend([],n.colModel),C=builderFmButon.call(a,d+"_search",l.Find,mergeCssClasses(e,l.findDialogIcon),"right"),_=builderFmButon.call(a,d+"_reset",l.Reset,mergeCssClasses(e,l.resetDialogIcon),"left");if(l.showQuery&&(v=builderFmButon.call(a,d+"_query","Query",mergeCssClasses(e,l.queryDialogIcon),"left")+"&#160;"),l.searchForAdditionalProperties&&c(n.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,x.push(e)}),l.columns.length?(x=l.columns,g=x[w=0].index||x[0].name):c(x,function(e,t){if(t.label||(t.label=t.isAddProp?t.name:n.colNames[e]),!y){var i=void 0===t.search||t.search,r=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&i||i&&!r)&&(y=!0,g=t.index||t.name,w=e)}}),!u&&g||!1===l.multipleSearch){var j="eq";0<=w&&x[w].searchoptions&&x[w].searchoptions.sopt?j=x[w].searchoptions.sopt[0]:l.sopt&&l.sopt.length&&(j=l.sopt[0]),u={groupOp:"AND",rules:[{field:g,op:j,data:""}]}}y=!1,l.tmplNames&&l.tmplNames.length&&(y=!0,b=l.tmplLabel,b+="<select class='ui-template'>",b+="<option value='default'>Default</option>",c(l.tmplNames,function(e,t){b+="<option value='"+e+"'>"+t+"</option>"}),b+="</select>"),m="<div class='"+getGuiStyles.call(a,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+d+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(a,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+n.direction+"'  style='float:"+("rtl"===n.direction?"right":"left")+";'>"+_+b+"</td><td class='EditButton EditButton-"+n.direction+"'>"+v+C+"</td></tr></tbody></table></div>",d=jqID(d),l.gbox=r,l.height="auto",$(d="#"+d).jqFilter({columns:x,filter:l.loadDefaults?u:null,showQuery:l.showQuery,errorcheck:l.errorcheck,sopt:l.sopt,groupButton:l.multipleGroup,ruleButtons:l.multipleSearch,afterRedraw:l.afterRedraw,ops:l.odata,cops:n.customSortOperations,operands:l.operands,ajaxSelectOptions:n.ajaxSelectOptions,groupOps:l.groupOps,onChange:function(e,t){e.showQuery&&$(".query",t).text(t.toUserFriendlyString()),fullBoolFeedback.call(a,l.afterChange,"jqGridFilterAfterChange",$(d),l,e,t)},direction:n.direction,id:n.id}),f.append(m),y&&l.tmplFilters&&l.tmplFilters.length&&$(".ui-template",f).on("change",function(){var e=$(this).val();return"default"===e?$(d).jqFilter("addFilter",u):$(d).jqFilter("addFilter",l.tmplFilters[parseInt(e,10)]),!1}),!0===l.multipleGroup&&(l.multipleSearch=!0),h("onInitialize",$(d)),l.layer?jgrid.createModal.call(a,i,f,l,o,$(r)[0],"#"+jqID(l.layer),{position:"relative"}):jgrid.createModal.call(a,i,f,l,o,$(r)[0]),(l.searchOnEnter||l.closeOnEscape)&&$(t).keydown(function(e){var t=$(e.target);return!l.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?l.closeOnEscape&&27===e.which?($("#"+jqID(i.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($(d+"_search").click(),!1)}),v&&$(d+"_query").on("click",function(){return $(".queryresult",f).toggle(),!1}),void 0===l.stringResult&&(l.stringResult=l.multipleSearch),$(d+"_search").on("click",function(){var e,t={},i="",r=$(d),o=r.find(".input-elm");if(o.filter(":focus")&&(o=o.filter(":focus")),o.change(),e=r.jqFilter("filterData"),l.errorcheck&&(r[0].hideError(),l.showQuery||r.jqFilter("toSQLString"),r[0].p.error))return r[0].showError(),!1;if(l.stringResult||"local"===n.datatype){try{i=JSON.stringify(e)}catch(e){}"string"==typeof i&&(t[l.sFilter]=i,c([l.sField,l.sValue,l.sOper],function(){t[this]=""}))}else l.multipleSearch?(t[l.sFilter]=e,c([l.sField,l.sValue,l.sOper],function(){t[this]=""})):(t[l.sField]=e.rules[0].field,t[l.sValue]=e.rules[0].data,t[l.sOper]=e.rules[0].op,t[l.sFilter]="");return $.extend(n.postData,t),fullBoolFeedback.call(a,l.onSearch,"jqGridFilterSearch",n.filters)&&(n.search=!0,s.trigger("reloadGrid",[$.extend({page:1},l.reloadGridSearchOptions||{})])),l.closeAfterSearch&&p(),!1}),$(d+"_reset").on("click",function(){var e={},t=$(d);return n.search=!1,!(n.resetsearch=!0)===l.multipleSearch?e[l.sField]=e[l.sValue]=e[l.sOper]="":e[l.sFilter]="",t[0].resetFilter(),y&&$(".ui-template",f).val("default"),$.extend(n.postData,e),fullBoolFeedback.call(a,l.onReset,"jqGridFilterReset")&&s.trigger("reloadGrid",[$.extend({page:1},l.reloadGridResetOptions||{})]),l.closeAfterReset&&p(),!1}),S($(d));var I=getGuiStateStyles.call(a,"hover");$(".fm-button:not(."+getGuiStateStyles.call(a,"disabled").split(" ").join(".")+")",f).hover(function(){$(this).addClass(I)},function(){$(this).removeClass(I)})}}function S(e){h("beforeShow",e)&&($(t).data("onClose",l.onClose),jgrid.viewModal.call(a,t,{gbox:r,jqm:l.jqModal,overlay:l.overlay,modal:l.modal,overlayClass:l.overlayClass,toTop:l.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),h("afterShow",e))}})},editGridRow:function(re,oe){return this.each(function(){var F=this,k=$(F),R=F.p;if(F.grid&&null!=R&&re){var y,w,O=R.id,n=base.getGridRes,x=base.setSelection,q=$.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:getGuiStyles.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:n.call(k,"defaults.savetext")||"Saving..."},n.call(k,"edit"),jgrid.edit,R.formEditing||{},oe||{}),N="FrmGrid_"+O,e=N,t="TblGrid_"+O,C="#"+jqID(t),_=C+"_2",i={themodal:"editmod"+O,modalhead:"edithd"+O,modalcontent:"editcnt"+O,resizeAlso:N},r="#"+jqID(i.themodal),o=R.gBox,G=R.colModel,l=R.iColByName,a=1,s=0,d=q.commonIconClass,j=function(){jgrid.hideModal(r,{gb:o,jqm:q.jqModal,onClose:q.onClose,removemodal:q.removemodal})},c=n.call(k,"errors.errcap"),u=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("AddEdit"),e.unshift(q),jgridFeedback.apply(F,e)},h=getGuiStateStyles.call(F,"hover"),T=getGuiStateStyles.call(F,"disabled"),p=getGuiStateStyles.call(F,"select"),I=getGuiStateStyles.call(F,"active"),f=getGuiStateStyles.call(F,"error");$(r).remove(),N="#"+jqID(N),"new"===re?(re="_empty",w="add",q.caption=q.addCaption):(q.caption=q.editCaption,w="edit");var g=!0;!q.checkOnUpdate||!0!==q.jqModal&&void 0!==q.jqModal||q.modal||(g=!1);var m=isNaN(q.dataheight)?q.dataheight:q.dataheight+"px",v=isNaN(q.datawidth)?q.datawidth:q.datawidth+"px",b=$("<form name='FormPost' id='"+e+"' class='FormGrid' onSubmit='return false;' style='width:"+v+";overflow:auto;position:relative;height:"+m+";'></form>").data("disabled",!1),S=$("<table id='"+t+"' class='EditTable'><tbody></tbody></table>");$(G).each(function(){var e=this.formoptions;a=Math.max(a,e&&e.colpos||0),s=Math.max(s,e&&e.rowpos||0)}),$(b).append(S);var D=$("<tr id='FormError' style='display:none'><td class='"+f+"' colspan='"+2*a+"'>&#160;</td></tr>");if(D[0].rp=0,$(S).append(D),(D=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*a+"'>"+(q.topinfo||"&#160;")+"</td></tr>"))[0].rp=0,$(S).append(D),u("beforeInitData",b,w)){!function(){var e=jgrid.detectRowEditing.call(F,re);if(null!=e)if("inlineEditing"===e.mode)base.restoreRow.call(k,re);else{var t=e.savedRow,i=F.rows[t.id];base.restoreCell.call(k,t.id,t.ic),$(i.cells[t.ic]).removeClass("edit-cell "+p),$(i).addClass(p).attr({"aria-selected":"true",tabindex:"0"})}}();var E="rtl"===R.direction,P=E?"nData":"pData",A=E?"pData":"nData";!function(x,e,C){var t,_=0,j=[],I=!1,S=$(e),D="";for(t=1;t<=C;t++)D+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";if("_empty"!==x&&(I=base.getInd.call(k,x)),$(G).each(function(e){var t,i,r,o,a,s=this,n=s.name,l=s.editable,d=!1,c=!1,u="_empty"===x?"addForm":"editForm";switch($.isFunction(l)&&(l=l.call(F,{rowid:x,iCol:e,iRow:I,cmName:n,cm:s,mode:u})),i=!(s.editrules&&!0===s.editrules.edithidden||!0!==s.hidden&&"hidden"!==l),String(l).toLowerCase()){case"hidden":l=!0;break;case"disabled":d=l=!0;break;case"readonly":c=l=!0}if("cb"!==n&&"subgrid"!==n&&!0===l&&"rn"!==n){if(!1===I)o="";else{t=$(F.rows[I].cells[e]);try{o=$.unformat.call(F,t,{rowId:x,colModel:s},e)}catch(e){o=s.edittype&&"textarea"===s.edittype?t.text():t.html()}isEmptyString(o)&&(o="")}var h=$.extend({},s.editoptions||{},{id:n,name:n,rowId:x,mode:u,cm:s,iCol:e}),p=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},s.formoptions||{}),f=parseInt(p.rowpos,10)||_+1,g=parseInt(2*(parseInt(p.colpos,10)||1),10);if("_empty"===x&&h.defaultValue&&(o=$.isFunction(h.defaultValue)?h.defaultValue.call(F):h.defaultValue),s.edittype||(s.edittype="text"),R.autoEncodeOnEdit&&(o=jgrid.oldDecodePostedData(o)),a=jgrid.createEl.call(F,s.edittype,h,o,!1,$.extend({},jgrid.ajaxOptions,R.ajaxSelectOptions||{})),(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[n]=o),$(a).addClass("FormElement"),-1<$.inArray(s.edittype,["text","textarea","checkbox","password","select"])&&$(a).addClass(getGuiStyles.call(F,"dialog.dataField")),r=S.find("tr[data-rowpos="+f+"]"),p.rowabove){var m=$("<tr><td class='contentinfo' colspan='"+2*C+"'>"+p.rowcontent+"</td></tr>");S.append(m),m[0].rp=f}0===r.length&&(r=$("<tr data-rowpos='"+f+"'></tr>").addClass("FormData").attr("id","tr_"+n),$(r).append(D),S.append(r),r[0].rp=f);var v=$("td:eq("+(g-2)+")",r[0]),b=$("td:eq("+(g-1)+")",r[0]);v.html(void 0===p.label?R.colNames[e]:p.label||"&#160;");var y=b[isEmptyString(b.html())?"html":"append"](p.elmprefix);if(y.append(a).append(p.elmsuffix),"INPUT"===a.tagName.toUpperCase()&&s.createColumnIndex&&h.generateDatalist){var w=k.jqGrid("generateDatalistFromColumnIndex",s.name);null!=w&&0<w.length&&($(a).attr("list","dl_"+a.id),y.append(w.attr("id","dl_"+a.id)))}d?(v.addClass(T),b.addClass(T),$(a).prop("readonly",!0),$(a).prop("disabled",!0)):c&&$(a).prop("readonly",!0),"custom"===s.edittype&&$.isFunction(h.custom_value)&&h.custom_value.call(F,$("#"+jqID(n),N),"set",o),jgrid.bindEv.call(F,a,h),i&&v.add(b).css("visibility","hidden"),j[_]=e,_++}}),hideRowsWithoutVissibleCells(S),0<_){var i=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*C-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+O+"_id' value='"+x+"'/></td></tr>");i[0].rp=_+999,S.append(i),(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[O+"_id"]=x)}}(re,S,a);var z=builderFmButon.call(F,P,"",mergeCssClasses(d,q.prevIcon),"","left"),M=builderFmButon.call(F,A,"",mergeCssClasses(d,q.nextIcon),"","right"),B=builderFmButon.call(F,"sData",q.bSubmit),H=builderFmButon.call(F,"cData",q.bCancel),L="<div class='"+getGuiStyles.call(F,"dialog.footer")+"'><table class='EditTable' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(F,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+R.direction+"'>"+(E?M+z:z+M)+"</td><td class='EditButton EditButton-"+R.direction+"'>"+B+"&#160;"+H+"</td></tr>";if(L+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(q.bottominfo||"&#160;")+"</td></tr>",L+="</tbody></table></div>",0<s){var V=[];$.each($(S)[0].rows,function(e,t){V[e]=t}),V.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(V,function(e,t){$("tbody",S).append(t)})}q.gbox=o;var W=!1;!0===q.closeOnEscape&&(q.closeOnEscape=!1,W=!0);var U=$("<div></div>").append($("<div class='"+getGuiStyles.call(F,"dialog.body")+"'></div>").append(b)).append(L);if(jgrid.createModal.call(F,i,U,q,R.gView,$(o)[0]),q.topinfo&&$(".tinfo",C).show(),q.bottominfo&&$(".binfo",_).show(),L=U=null,$(r).keydown(function(e){var t,i,r=(e.target.tagName||"").toUpperCase();if(!0===$(N).data("disabled"))return!1;if(13===e.which&&"TEXTAREA"!==r){if(i=(t=$(_).find(":focus")).attr("id"),0<t.length&&0<=$.inArray(i,["pData","nData","cData"]))return t.trigger("click"),!1;if(!0===q.savekey[0]&&13===q.savekey[1])return $("#sData",_).trigger("click"),!1}if(!0===q.savekey[0]&&e.which===q.savekey[1]&&"TEXTAREA"!==r)return $("#sData",_).trigger("click"),!1;if(27===e.which)return ee()&&W&&j(),!1;if(!0===q.navkeys[0]){if("_empty"===$("#id_g",C).val())return!0;if(e.which===q.navkeys[1])return $("#pData",_).trigger("click"),!1;if(e.which===q.navkeys[2])return $("#nData",_).trigger("click"),!1}}),q.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span",r).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close",r).off("click").click(function(){return ee()&&j(),!1})),addFormIcon($("#sData",_),q.saveicon,d),addFormIcon($("#cData",_),q.closeicon,d),q.checkOnSubmit||q.checkOnUpdate){B=builderFmButon.call(F,"sNew",q.bYes),M=builderFmButon.call(F,"nNew",q.bNo),H=builderFmButon.call(F,"cNew",q.bExit);var X=q.zIndex||999;X++,$("<div class='"+q.overlayClass+" jqgrid-overlay confirm' style='z-index:"+X+";display:none;'>&#160;</div><div class='"+getGuiStyles.call(F,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(X+1)+"'>"+q.saveData+"<br/><br/>"+B+M+H+"</div>").insertAfter(N),$("#sNew",r).click(function(){return J(),$(N).data("disabled",!1),$(".confirm",r).hide(),!1}),$("#nNew",r).click(function(){return $(".confirm",r).hide(),$(N).data("disabled",!1),setTimeout(function(){$(N).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),$("#cNew",r).click(function(){return $(".confirm",r).hide(),$(N).data("disabled",!1),j(),!1})}u("onInitializeForm",$(N),w),"_empty"!==re&&q.viewPagerButtons?$("#pData,#nData",_).show():$("#pData,#nData",_).hide(),u("beforeShowForm",$(N),w),$(r).data("onClose",q.onClose),jgrid.viewModal.call(F,r,{gbox:o,jqm:q.jqModal,overlay:q.overlay,modal:q.modal,overlayClass:q.overlayClass,toTop:q.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),g||$("."+jqID(q.overlayClass)).click(function(){return ee()&&j(),!1}),$(".fm-button",r).hover(function(){$(this).addClass(h)},function(){$(this).removeClass(h)}),$("#sData",_).click(function(){return y={},$("#FormError",C).hide(),Q(),"_empty"===y[O+"_id"]?J():!0===q.checkOnSubmit&&Z(y,q._savedData)?($(N).data("disabled",!0),$(".confirm",r).show()):J(),!1}),$("#cData",_).click(function(){return ee()&&j(),!1}),$("#nData",_).click(function(){if(!ee())return!1;$("#FormError",C).hide();var e=ie();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!u("onclickPgButtons","next",$(N),e[1][e[0]]))return!1;K(e[1][e[0]+1],N),x.call(k,e[1][e[0]+1]),u("afterclickPgButtons","next",$(N),e[1][e[0]+1]),te(e[0]+1,e)}return!1}),$("#pData",_).click(function(){if(!ee())return!1;$("#FormError",C).hide();var e=ie();if(-1!==e[0]&&e[1][e[0]-1]){if(!u("onclickPgButtons","prev",$(N),e[1][e[0]]))return!1;if(hasOneFromClasses($("#"+jqID(e[1][e[0]-1])),T))return!1;K(e[1][e[0]-1],N),x.call(k,e[1][e[0]-1]),u("afterclickPgButtons","prev",$(N),e[1][e[0]-1]),te(e[0]-1,e)}return!1}),u("afterShowForm",$(N),w);var Y=ie();te(Y[0],Y)}}function Q(){return $(C+" > tbody > tr > td .FormElement").each(function(){var e,t,i,r,o=$(".customelement",this),a=this.name;if(o.length){if(a=o.attr("name"),void 0!==(e=l[a])&&(t=G[e].editoptions||{},$.isFunction(t.custom_value))){try{if(y[a]=t.custom_value.call(F,$("#"+jqID(a),C),"get"),void 0===y[a])throw"e1"}catch(e){"e1"===e?jgrid.info_dialog.call(F,c,"function 'custom_value' "+q.msg.novalue,q.bClose):jgrid.info_dialog.call(F,c,e.message,q.bClose)}return!0}}else switch(r=$(this)[0].type){case"checkbox":y[a]=$(this).is(":checked")?$(this).val():$(this).data("offval");break;case"select-one":y[a]=$("option:selected",this).val();break;case"select-multiple":y[a]=$(this).val(),y[a]=y[a]?y[a].join(","):"";var s=[];$("option:selected",this).each(function(e,t){s[e]=$(t).text()});break;case"date":y[a]=$(this).val(),3===String(y[a]).split("-").length&&void 0!==(e=l[a])&&(i=(G[e].formatoptions||{}).newformat||n.call(k,"formatter.date.newformat"),y[a]=jgrid.parseDate.call(k[0],"Y-m-d",y[a],i));break;default:void 0!==r&&$.inArray(r,q.skipPostTypes)<0&&(y[a]=$(this).val())}}),!0}function K(e,t){var i,r,o,a,s,n=0;(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData={},q._savedData[O+"_id"]=e);var l=R.colModel;if("_empty"===e)return $(l).each(function(){i=this.name,o=$.extend({},this.editoptions||{}),(r=$("#"+jqID(i),t))&&r.length&&null!==r[0]&&(a="","custom"===this.edittype&&$.isFunction(o.custom_value)?o.custom_value.call(F,r,"set",a):o.defaultValue?(a=$.isFunction(o.defaultValue)?o.defaultValue.call(F):o.defaultValue,"checkbox"===r[0].type?(s=a.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==s?(r[0].checked=!0,r[0].defaultChecked=!0,r[0].value=a):(r[0].checked=!1,r[0].defaultChecked=!1):r.val(a)):"checkbox"===r[0].type?(r[0].checked=!1,r[0].defaultChecked=!1,a=$(r).data("offval")):r[0].type&&"select"===r[0].type.substr(0,6)?r[0].selectedIndex=0:r.val(a),(!0===q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[i]=a))}),void $("#id_g",t).val(e);var d=base.getInd.call(k,e,!0);d&&($(d.cells).filter("td[role=gridcell]").each(function(r){var o;if("cb"!==(i=l[r].name)&&"subgrid"!==i&&"rn"!==i&&!0===l[r].editable){try{o=$.unformat.call(F,$(this),{rowId:e,colModel:l[r]},r)}catch(e){o="textarea"===l[r].edittype?$(this).text():$(this).html()}switch(R.autoEncodeOnEdit&&(o=jgrid.oldDecodePostedData(o)),(!0===q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[i]=o),i="#"+jqID(i),l[r].edittype){case"password":case"text":case"button":case"image":case"textarea":isEmptyString(o)&&(o=""),$(i,t).val(o);break;case"select":var a=o.split(",");a=$.map(a,function(e){return $.trim(e)}),$(i+" option",t).each(function(){var e,t=$(this),i=$.trim(t.val());if(l[r].editoptions.multiple||a[0]!==i?l[r].editoptions.multiple&&-1<(e=$.inArray(i,a))?(a.splice(e,1),this.selected=!0):this.selected=!1:(a.splice(0,1),this.selected=!0),0===a.length)return!1}),0<a.length&&$(i+" option",t).each(function(){var e,t=$(this),i=$.trim(t.text());if(l[r].editoptions.multiple||$.trim(o)!==i&&a[0]!==i?l[r].editoptions.multiple&&-1<(e=$.inArray(i,a))&&(a.splice(e,1),this.selected=!0):(a.splice(0,1),this.selected=!0),0===a.length)return!1});break;case"checkbox":o=String(o),o=l[r].editoptions&&l[r].editoptions.value?l[r].editoptions.value.split(":")[0]===o:(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o,$(i,t).prop({checked:o,defaultChecked:o});break;case"custom":try{if(!l[r].editoptions||!$.isFunction(l[r].editoptions.custom_value))throw"e1";l[r].editoptions.custom_value.call(F,$(i,t),"set",o)}catch(e){"e1"===e?jgrid.info_dialog.call(F,c,"function 'custom_value' "+q.msg.nodefined,q.bClose):jgrid.info_dialog.call(F,c,e.message,q.bClose)}}n++}}),0<n&&$("#id_g",C).val(e))}function J(){var a,s,e,n,t,i,r,o,l,d=[!0,"",""],c=d,u={},h=R.prmNames,p=base.getInd.call(k,re),f=!1===p?null:F.rows[p],g=k.triggerHandler("jqGridAddEditBeforeCheckValues",[y,$(N),w]);for(e in g&&"object"==typeof g&&(y=g),p=!1===p?-1:p,$.isFunction(q.beforeCheckValues)&&(g=q.beforeCheckValues.call(F,y,$(N),w))&&"object"==typeof g&&(y=g),y)if(y.hasOwnProperty(e)&&(o=R.iColByName[e],null!=(c=jgrid.checkValues.call(F,y[e],e,void 0,void 0,{oldValue:"_empty"===re?null:base.getCell.call(k,re,o),newValue:y[e],cmName:e,rowid:re,cm:G[o],iCol:o,iRow:p,tr:f,td:null==f?null:f.cells[o],mode:"_empty"===re?"addForm":"editForm"}))&&!0!==c||(c=d),!1===c[0]))break;if(l=q.url||R.editurl,$.each(G,function(e,t){var i=t.name;y.hasOwnProperty(i)&&("date"!==t.formatter||null!=t.formatoptions&&!0===t.formatoptions.sendFormatted||(y[i]=$.unformat.date.call(F,y[i],t)),"clientArray"!==l&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&""===y[i]&&(y[i]="null"))}),c[0]&&(void 0===(u=k.triggerHandler("jqGridAddEditClickSubmit",[q,y,w]))&&$.isFunction(q.onclickSubmit)&&(u=q.onclickSubmit.call(F,q,y,w)||{}),null!=(c=k.triggerHandler("jqGridAddEditBeforeSubmit",[y,$(N),w]))&&!0!==c||(c=d),c[0]&&$.isFunction(q.beforeSubmit)&&(null!=(c=q.beforeSubmit.call(F,y,$(N),w))&&!0!==c||(c=d))),c[0]&&!q.processing){if(q.processing=!0,$("#sData",_).addClass(I),i=q.url||R.editurl,s=h.oper,a="clientArray"===i&&!1!==R.keyName?R.keyName:h.id,y[s]="_empty"===$.trim(y[O+"_id"])?h.addoper:h.editoper,y[s]!==h.addoper?y[a]=y[O+"_id"]:void 0===y[a]&&(y[a]=y[O+"_id"]),delete y[O+"_id"],y=$.extend(y,q.editData,u),!0===R.treeGrid){if(y[s]===h.addoper){n=R.selrow;var m="adjacency"===R.treeGridModel?R.treeReader.parent_id_field:"parent_id";y[m]=n}for(t in R.treeReader)if(R.treeReader.hasOwnProperty(t)&&(r=R.treeReader[t],y.hasOwnProperty(r))){if(y[s]===h.addoper&&"parent_id_field"===t)continue;delete y[r]}}y[a]=jgrid.stripPref(R.idPrefix,y[a]),R.autoEncodeOnEdit&&$.each(y,function(e,t){$.isFunction(t)||(y[e]=jgrid.oldEncodePostedData(t))});var v=$.extend({url:$.isFunction(i)?i.call(F,y[a],w,y,q):i,type:$.isFunction(q.mtype)?q.mtype.call(F,w,q,y[a],y):q.mtype,data:jgrid.serializeFeedback.call(F,$.isFunction(q.serializeEditData)?q.serializeEditData:R.serializeEditData,"jqGridAddEditSerializeEditData",y),complete:function(e,t){if(k.jqGrid("progressBar",{method:"hide",loadtype:q.saveui}),$("#sData",_).removeClass(I),y[a]=$("#id_g",C).val(),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(c[0]=!1,c[1]=k.triggerHandler("jqGridAddEditErrorTextFormat",[e,w]),$.isFunction(q.errorTextFormat)?c[1]=q.errorTextFormat.call(F,e,w):c[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(null!=(c=k.triggerHandler("jqGridAddEditAfterSubmit",[e,y,w]))&&!0!==c||(c=d),c[0]&&$.isFunction(q.afterSubmit)&&(null!=(c=q.afterSubmit.call(F,e,y,w))&&!0!==c||(c=d))),!1===c[0])$("#FormError>td",C).html(c[1]),$("#FormError",C).show();else{R.autoEncodeOnEdit&&$.each(y,function(e,t){y[e]=jgrid.oldDecodePostedData(t)});var i,r=[$.extend({},q.reloadGridOptions||{})];if(y[s]===h.addoper?(c[2]||(c[2]=jgrid.randId()),null==y[a]||"_empty"===y[a]||y[s]===h.addoper?y[a]=c[2]:c[2]=y[a],q.reloadAfterSubmit?k.trigger("reloadGrid",r):!0===R.treeGrid?base.addChildNode.call(k,c[2],n,y):base.addRowData.call(k,c[2],y,q.addedrow),q.closeAfterAdd?(!0!==R.treeGrid&&x.call(k,c[2]),j()):q.clearAfterAdd&&K("_empty",N)):(q.reloadAfterSubmit?(k.trigger("reloadGrid",r),q.closeAfterEdit||setTimeout(function(){x.call(k,y[a])},1e3)):!0===R.treeGrid?base.setTreeRow.call(k,y[a],y):base.setRowData.call(k,y[a],y),q.closeAfterEdit&&j()),$.isFunction(q.afterComplete)){var o=e;setTimeout(function(){k.triggerHandler("jqGridAddEditAfterComplete",[o,y,$(N),w]),q.afterComplete.call(F,o,y,$(N),w),o=null},50)}if(q.checkOnSubmit||q.checkOnUpdate)if($(N).data("disabled",!1),"_empty"!==q._savedData[O+"_id"])for(i in q._savedData)q._savedData.hasOwnProperty(i)&&y[i]&&(q._savedData[i]=y[i])}q.processing=!1;try{$(N).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(e){}}},jgrid.ajaxOptions,q.ajaxEditOptions);if(v.url||q.useDataProxy||($.isFunction(R.dataProxy)?q.useDataProxy=!0:(c[0]=!1,c[1]+=" "+jgrid.errors.nourl)),c[0])if(k.jqGrid("progressBar",{method:"show",loadtype:q.saveui,htmlcontent:q.savetext}),q.useDataProxy){var b=R.dataProxy.call(F,v,"set_"+O);void 0===b&&(b=[!0,""]),!1===b[0]?(c[0]=!1,c[1]=b[1]||"Error deleting the selected row!"):(v.data.oper===h.addoper&&q.closeAfterAdd&&j(),v.data.oper===h.editoper&&q.closeAfterEdit&&j())}else"clientArray"===v.url?(q.reloadAfterSubmit=!1,y=v.data,v.complete({status:200,statusText:""},"")):$.ajax(v)}!1===c[0]&&($("#FormError>td",C).html(c[1]),$("#FormError",C).show())}function Z(e,t){var i,r=!1;for(i in e)if(e.hasOwnProperty(i)&&String(e[i])!==String(t[i])){r=!0;break}return r}function ee(){var e=!0;return $("#FormError",C).hide(),q.checkOnUpdate&&(y={},Q(),Z(y,q._savedData)&&($(N).data("disabled",!0),$(".confirm",r).show(),e=!1)),e}function te(e,t){var i=t[1].length-1;0===e?$("#pData",_).addClass(T):void 0!==t[1][e-1]&&hasOneFromClasses($("#"+jqID(t[1][e-1])),T)?$("#pData",_).addClass(T):$("#pData",_).removeClass(T),e===i?$("#nData",_).addClass(T):void 0!==t[1][e+1]&&hasOneFromClasses($("#"+jqID(t[1][e+1])),T)?$("#nData",_).addClass(T):$("#nData",_).removeClass(T)}function ie(){var e=base.getDataIDs.call(k),t=$("#id_g",C).val();return[$.inArray(t,e),e]}})},viewGridRow:function(z,M){return this.each(function(){var j=this,I=$(j),S=j.p;if(j.grid&&null!=S&&z){var e=S.id,D=$.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},base.getGridRes.call(I,"view"),jgrid.view||{},S.formViewing||{},M||{}),r="#ViewGrid_"+jqID(e),a="#ViewTbl_"+jqID(e),o=a+"_2",t="ViewGrid_"+e,i="ViewTbl_"+e,s=D.commonIconClass,n={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,resizeAlso:t},l="#"+jqID(n.themodal),d=S.gBox,F=S.colModel,c=1,u=0,h=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("View"),e.unshift(D),jgridFeedback.apply(j,e)},p=function(){jgrid.hideModal(l,{gb:d,jqm:D.jqModal,onClose:D.onClose,removemodal:D.removemodal})},f=getGuiStateStyles.call(j,"hover"),g=getGuiStateStyles.call(j,"disabled"),m=isNaN(D.dataheight)?D.dataheight:D.dataheight+"px",v=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",b=$("<div class='"+getGuiStyles.call(j,"dialog.body")+"'><form name='FormPost' id='"+t+"' class='FormGrid' style='width:"+v+";overflow:auto;position:relative;height:"+m+";'></form></div>"),y=b.children("form.FormGrid"),w=$("<table id='"+i+"' class='EditTable'><tbody></tbody></table>");if($(l).remove(),$(F).each(function(){var e=this.formoptions;c=Math.max(c,e&&e.colpos||0),u=Math.max(u,e&&e.rowpos||0)}),y.append(w),h("beforeInitData",y)){!function(e,t,l){var d,c,u,h,i,p,f,g,m=0,v=[],b=base.getInd.call(I,e),y=getGuiStyles.call(j,"dialog.viewData"),w=$(t),x=getGuiStyles.call(j,"dialog.viewLabel"),r=String(D.labelswidth)+(!D.labelswidth||isNaN(D.labelswidth)?"":"px"),o="<td class='"+getGuiStyles.call(j,"dialog.viewCellLabel","CaptionTD form-view-label")+(r?"' style='width:"+r+";":"")+"'>&#160;</td><td class='"+getGuiStyles.call(j,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",C="",a=["integer","number","currency"],s=0,n=0;for(i=0;i<l;i++)C+=o;if($(F).each(function(){(c=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==$.inArray(this.formatter,a)?s=Math.max(s,parseInt(this.width,10)):n=Math.max(n,parseInt(this.width,10)))}),p=0!==s?s:0!==n?n:0,$(F).each(function(e){if(d=this.name,f=!1,c=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,g="boolean"!=typeof this.viewable||this.viewable,"cb"!==d&&"subgrid"!==d&&"rn"!==d&&g){h=!1===b?"":jgrid.getDataFieldOfCell.call(j,j.rows[b],e).html(),f="right"===this.align&&0!==p;var t=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||m+1,r=parseInt(2*(parseInt(t.colpos,10)||1),10);if(t.rowabove){var o=$("<tr><td class='contentinfo' colspan='"+2*l+"'>"+t.rowcontent+"</td></tr>");w.append(o),o[0].rp=i}0===(u=w.find("tr[data-rowpos="+i+"]")).length&&((u=$("<tr data-rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+d)).append(C),w.append(u),u[0].rp=i);var a=void 0===t.label?S.colNames[e]:t.label,s=$("td:eq("+(r-1)+")",u[0]),n=$("td:eq("+(r-2)+")",u[0]);n.html("<label for='"+d+"'"+(x?" class='"+x+"'>":">")+(a||"&nbsp;")+"</label>"),s[isEmptyString(s.html())?"html":"append"]("<span id='"+d+"'"+(y?" class='"+y+"'>":">")+(h||"&nbsp;")+"</span>").attr("id","v_"+d),f&&$("td:eq("+(r-1)+") span",u[0]).css({"text-align":"right",width:p+"px"}),c&&n.add(s).css("visibility","hidden"),v[m]=e,m++}}),hideRowsWithoutVissibleCells(w),0<m){var _=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*l-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");_[0].rp=m+99,w.append(_)}}(z,w,c);var x="rtl"===S.direction,C=x?"nData":"pData",_=x?"pData":"nData",k=builderFmButon.call(j,C,"",mergeCssClasses(s,D.prevIcon),"","left"),R=builderFmButon.call(j,_,"",mergeCssClasses(s,D.nextIcon),"","right"),O=builderFmButon.call(j,"cData",D.bClose);if(0<u){var q=[];$.each($(w)[0].rows,function(e,t){q[e]=t}),q.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(q,function(e,t){$("tbody",w).append(t)})}D.gbox=d;var N=$("<div></div>").append(b).append("<div class='"+getGuiStyles.call(j,"dialog.footer")+"'><table border='0' class='EditTable' id='"+i+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+S.direction+"' width='"+(D.labelswidth||"auto")+"'>"+(x?R+k:k+R)+"</td><td class='EditButton EditButton-"+S.direction+"'>"+O+"</td></tr></tbody></table></div>");jgrid.createModal.call(j,n,N,D,S.gView,$(S.gView)[0]),D.viewPagerButtons||$("#pData, #nData",o).hide(),N=null,$(l).keydown(function(e){var t,i;if(!0===$(r).data("disabled"))return!1;if(13===e.which&&(i=(t=$(o).find(":focus")).attr("id"),0<t.length&&0<=$.inArray(i,["pData","nData","cData"])))return t.trigger("click"),!1;if(27===e.which)return D.closeOnEscape&&p(),!1;if(!0===D.navkeys[0]){if(e.which===D.navkeys[1])return $("#pData",o).trigger("click"),!1;if(e.which===D.navkeys[2])return $("#nData",o).trigger("click"),!1}}),addFormIcon($("#cData",o),D.closeicon,s),h("beforeShowForm",$(r)),jgrid.viewModal.call(j,l,{gbox:d,jqm:D.jqModal,overlay:D.overlay,toTop:D.toTop,modal:D.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+g.split(" ").join(".")+")",o).hover(function(){$(this).addClass(f)},function(){$(this).removeClass(f)}),T(),$("#cData",o).click(function(){return p(),!1}),$("#nData",o).click(function(){$("#FormError",a).hide();var e=A();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!h("onclickPgButtons","next",$(r),e[1][e[0]]))return!1;E(e[1][e[0]+1]),base.setSelection.call(I,e[1][e[0]+1]),h("afterclickPgButtons","next",$(r),e[1][e[0]+1]),P(e[0]+1,e)}return T(),!1}),$("#pData",o).click(function(){$("#FormError",a).hide();var e=A();if(-1!==e[0]&&e[1][e[0]-1]){if(!h("onclickPgButtons","prev",$(r),e[1][e[0]]))return!1;E(e[1][e[0]-1]),base.setSelection.call(I,e[1][e[0]-1]),h("afterclickPgButtons","prev",$(r),e[1][e[0]-1]),P(e[0]-1,e)}return T(),!1});var G=A();P(G[0],G)}}function T(){!0!==D.closeOnEscape&&!0!==D.navkeys[0]||setTimeout(function(){$("#cData").focus()},0)}function E(e){var t,i,r=0,o=base.getInd.call(I,e,!0);o&&($("td",o).each(function(e){i=F[e],"cb"!==(t=i.name)&&"subgrid"!==t&&"rn"!==t&&(t=jqID("v_"+t),$("#"+t+" span",a).html(jgrid.getDataFieldOfCell.call(j,o,e).html()),r++)}),0<r&&$("#id_g",a).val(e))}function P(e,t){var i=t[1].length-1;0===e?$("#pData",o).addClass(g):void 0!==t[1][e-1]&&hasOneFromClasses($("#"+jqID(t[1][e-1])),g)?$("#pData",o).addClass(g):$("#pData",o).removeClass(g),e===i?$("#nData",o).addClass(g):void 0!==t[1][e+1]&&hasOneFromClasses($("#"+jqID(t[1][e+1])),g)?$("#nData",o).addClass(g):$("#nData",o).removeClass(g)}function A(){var e=base.getDataIDs.call(I),t=$("#id_g",a).val();return[$.inArray(t,e),e]}})},delGridRow:function(j,I){return this.each(function(){var d=this,c=d.p,u=$(d);if(d.grid&&null!=c&&j){var h,p,f,g,m=c.id,v=$.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},idSeparator:",",onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1,delui:"disable",deltext:base.getGridRes.call(u,"defaults.deltext")||"Deleting..."},base.getGridRes.call(u,"del"),jgrid.del||{},c.formDeleting||{},I||{}),e="DelTbl_"+m,b="#DelTbl_"+jqID(m),t={themodal:"delmod"+m,modalhead:"delhd"+m,modalcontent:"delcnt"+m,resizeAlso:e},y="#"+jqID(t.themodal),w=c.gBox,i=v.commonIconClass,x=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("Delete"),e.unshift(v),jgridFeedback.apply(d,e)},r=getGuiStateStyles.call(d,"hover"),C=getGuiStateStyles.call(d,"active"),o=getGuiStateStyles.call(d,"error");if($.isArray(j)||(j=[String(j)]),void 0!==$(y)[0]){if(!x("beforeInitData",$(b)))return;$("#DelData>td",b).text(j.join(v.idSeparator)).data("rowids",j),$("#DelError",b).hide(),!0===v.processing&&(v.processing=!1,$("#dData",b).removeClass(C)),x("beforeShowForm",$(b)),jgrid.viewModal.call(d,y,{gbox:w,jqm:v.jqModal,jqM:!1,overlay:v.overlay,toTop:v.toTop,modal:v.modal}),x("afterShowForm",$(b))}else{var a=isNaN(v.dataheight)?v.dataheight:v.dataheight+"px",s=isNaN(v.datawidth)?v.datawidth:v.datawidth+"px",n="<div class='"+getGuiStyles.call(d,"dialog.body")+"'><div id='"+e+"' class='formdata' style='width:"+s+";overflow:auto;position:relative;height:"+a+";'>";n+="<table class='DelTable'><tbody>",n+="<tr id='DelError' style='display:none'><td class='"+o+"'></td></tr>",n+="<tr id='DelData' style='display:none'><td >"+j.join(v.idSeparator)+"</td></tr>",n+="<tr><td class='delmsg'>"+v.msg+"</td></tr>",n+="</tbody></table></div></div>";var l=builderFmButon.call(d,"dData",v.bSubmit),_=builderFmButon.call(d,"eData",v.bCancel);if(n+="<div class='"+getGuiStyles.call(d,"dialog.footer")+"'><table class='EditTable' id='"+e+"_2'><tbody><tr><td><hr class='"+getGuiStyles.call(d,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+c.direction+"'>"+l+"&#160;"+_+"</td></tr></tbody></table></div>",v.gbox=w,jgrid.createModal.call(d,t,n,v,c.gView,$(c.gView)[0]),$("#DelData>td",b).data("rowids",j),!x("beforeInitData",$(n)))return;$(".fm-button",b+"_2").hover(function(){$(this).addClass(r)},function(){$(this).removeClass(r)}),addFormIcon($("#dData",b+"_2"),v.delicon,i),addFormIcon($("#eData",b+"_2"),v.cancelicon,i),$("#dData",b+"_2").click(function(){var e,r=[!0,""],t=$("#DelData>td",b),o=t.text(),a=t.data("rowids"),i={};if($.isFunction(v.onclickSubmit)&&(i=v.onclickSubmit.call(d,v,o,a)||{}),$.isFunction(v.beforeSubmit)&&(r=v.beforeSubmit.call(d,o,a)||r),r[0]&&!v.processing){if(v.processing=!0,f=c.prmNames,h=$.extend({},v.delData,i),g=f.oper,h[g]=f.deloper,p=f.id,!(o=a.slice()).length)return!1;for(e in o)o.hasOwnProperty(e)&&(o[e]=jgrid.stripPref(c.idPrefix,o[e]));h[p]=o.join(v.idSeparator),$(this).addClass(C);var s=v.url||c.editurl,n=$.extend({url:$.isFunction(s)?s.call(d,h[p],h,v,a):s,type:v.mtype,data:$.isFunction(v.serializeDelData)?v.serializeDelData.call(d,h,a):h,complete:function(e,t){var i;if(u.jqGrid("progressBar",{method:"hide",loadtype:v.delui}),$("#dData",b+"_2").removeClass(C),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(r[0]=!1,$.isFunction(v.errorTextFormat)?r[1]=v.errorTextFormat.call(d,e):r[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):$.isFunction(v.afterSubmit)&&(r=v.afterSubmit.call(d,e,h,a)||[!0]),!1===r[0])$("#DelError>td",b).html(r[1]),$("#DelError",b).show();else{if("local"===c.datatype||!0===c.treeGrid||!v.reloadAfterSubmit)if(!0===c.treeGrid)try{base.delTreeNode.call(u,a[0])}catch(e){}else for(a=a.slice(),i=0;i<a.length;i++)base.delRowData.call(u,a[i]);v.reloadAfterSubmit&&u.trigger("reloadGrid",[$.extend({},v.reloadGridOptions||{})]),setTimeout(function(){x("afterComplete",e,o,$(b),a)},50)}v.processing=!1,r[0]&&jgrid.hideModal(y,{gb:w,jqm:v.jqModal,onClose:v.onClose,removemodal:v.removemodal})}},jgrid.ajaxOptions,v.ajaxDelOptions);if(n.url||v.useDataProxy||($.isFunction(c.dataProxy)?v.useDataProxy=!0:(r[0]=!1,r[1]+=" "+jgrid.errors.nourl)),r[0])if(u.jqGrid("progressBar",{method:"show",loadtype:v.delui,htmlcontent:v.deltext}),v.useDataProxy){var l=c.dataProxy.call(d,n,"del_"+m);void 0===l&&(l=[!0,""]),!1===l[0]?(r[0]=!1,r[1]=l[1]||"Error deleting the selected row!"):jgrid.hideModal(y,{gb:w,jqm:v.jqModal,onClose:v.onClose,removemodal:v.removemodal})}else"clientArray"===n.url?(h=n.data,n.complete({status:200,statusText:""},"")):$.ajax(n)}return!1===r[0]&&($("#DelError>td",b).html(r[1]),$("#DelError",b).show()),!1}),$("#eData",b+"_2").click(function(){return jgrid.hideModal(y,{gb:w,jqm:v.jqModal,onClose:v.onClose,removemodal:v.removemodal}),!1}),x("beforeShowForm",$(b)),jgrid.viewModal.call(d,y,{gbox:w,jqm:v.jqModal,overlay:v.overlay,toTop:v.toTop,modal:v.modal}),x("afterShowForm",$(b))}!0===v.closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(P,A,z,M,B,H,L){return"object"==typeof P&&(L=H,H=B,B=M,M=z,z=A,A=P,P=void 0),M=M||{},z=z||{},L=L||{},B=B||{},H=H||{},this.each(function(){var s=this,n=s.p,l=$(s);if(s.grid&&null!=n&&!(s.nav&&0<$(P).find(".navtable").length)){var a=n.id,d=$.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},base.getGridRes.call(l,"nav"),jgrid.nav||{},n.navOptions||{},A||{});d.position=d.position||("rtl"===n.direction?"right":"left");var e,t,c,i=n.idSel,u=n.gBox,h=d.commonIconClass,p={themodal:"alertmod_"+a,modalhead:"alerthd_"+a,modalcontent:"alertcnt_"+a},o=function(){var e=document.documentElement,t=window,i=1024,r=768,o=l.closest(".ui-jqgrid").offset();void 0===$("#"+jqID(p.themodal))[0]&&(d.alerttop||d.alertleft||(void 0!==t.innerWidth?(i=t.innerWidth,r=t.innerHeight):null!=e&&void 0!==e.clientWidth&&0!==e.clientWidth&&(i=e.clientWidth,r=e.clientHeight),i=i/2-parseInt(d.alertwidth,10)/2-o.left+(void 0!==t.pageXOffset?t.pageXOffset:(e||document.body.parentNode||document.body).scrollLeft),r=r/2-25-o.top+(void 0!==t.pageYOffset?t.pageYOffset:(e||document.body.parentNode||document.body).scrollTop)),jgrid.createModal.call(s,p,"<div class='"+getGuiStyles.call(s,"dialog.body")+"'><div>"+d.alerttext+"</div></div>",{gbox:u,jqModal:d.jqModal,drag:!0,resize:!0,caption:d.alertcap,top:null!=d.alerttop?d.alerttop:r,left:null!=d.alertleft?d.alertleft:i,width:d.alertwidth,height:d.alertheight,closeOnEscape:d.closeOnEscape,zIndex:d.alertzIndex,removemodal:d.removemodal},n.gView,$(u)[0],!1)),jgrid.viewModal.call(s,"#"+jqID(p.themodal),{gbox:u,toTop:d.alertToTop,jqm:d.jqModal});var a=$("#"+jqID(p.modalhead)).find(".ui-jqdialog-titlebar-close");a.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){a.focus()},50)},r=function(e){var t;if(13===e.which&&0<(t=$(this).find(".ui-pg-button").filter(":focus")).length){var i=t[0].id,r=i.substr(0,0<$(this).closest(".ui-jqgrid-toppager").length?i.length-a.length-5:i.length-a.length-1)+"mod"+n.id,o=$(".ui-jqdialog").filter(":visible").map(function(){return this.id});if($.inArray(r,o)<0)return t.trigger("click"),!1}},f=getGuiStateStyles.call(s,"hover"),g=getGuiStateStyles.call(s,"disabled"),m=getGuiStyles.call(s,"navButton","ui-pg-button");if(s.grid){s.modalAlert=o,void 0===P&&(n.pager?(P=n.pager,n.toppager&&(d.cloneToTop=!0)):n.toppager&&(P=n.toppager));var v,b,y,w,x,C,_,j=1,I=["left","center","right"],S="<div class='"+getGuiStyles.call(s,"navButton","ui-pg-button "+getGuiStateStyles.call(s,"disabled"))+"'><span class='ui-separator'></span></div>",D=function(){hasOneFromClasses(this,g)||$(this).addClass(f)},F=function(){$(this).removeClass(f)},k=function(){return hasOneFromClasses(this,g)||($.isFunction(d.addfunc)?d.addfunc.call(s,M):base.editGridRow.call(l,"new",M)),!1},R=function(e,t,i){if(!hasOneFromClasses(this,g)){var r=n.selrow;r?$.isFunction(e)?e.call(s,r,i):base[t].call(l,r,i):o()}return!1},O=function(){return R.call(this,d.editfunc,"editGridRow",z)},q=function(){return R.call(this,d.viewfunc,"viewGridRow",L)},N=function(){var e;return hasOneFromClasses(this,g)||(n.multiselect?0===(e=n.selarrrow).length&&(e=null):e=n.selrow,e?$.isFunction(d.delfunc)?d.delfunc.call(s,e,B):base.delGridRow.call(l,e,B):o()),!1},G=function(){return hasOneFromClasses(this,g)||($.isFunction(d.searchfunc)?d.searchfunc.call(s,H):base.searchGrid.call(l,H)),!1},T=function(){if(!hasOneFromClasses(this,g)){$.isFunction(d.beforeRefresh)&&d.beforeRefresh.call(s),n.search=!1,n.resetsearch=!0;try{if("currentfilter"!==d.refreshstate){n.postData.filters="";try{$("#fbox_"+i).jqFilter("resetFilter")}catch(e){}$.isFunction(s.clearToolbar)&&s.clearToolbar(!1)}}catch(e){}switch(d.refreshstate){case"firstpage":l.trigger("reloadGrid",[$.extend({},d.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":l.trigger("reloadGrid",[$.extend({},d.reloadGridOptions||{},{current:!0})])}$.isFunction(d.afterRefresh)&&d.afterRefresh.call(s)}return!1},E=function(e,t,i){var r=$("<div class='"+m+"' tabindex='0' role='button'></div>"),o=d[e+"icon"],a=$.trim(d[e+"text"]);return r.append("<div class='ui-pg-div'><span class='"+(d.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",h,o):mergeCssClasses(h,o))+"'></span>"+(a?"<span class='ui-pg-button-text"+(d.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a+"</span>":"")+"</div>"),$(c).append(r),r.attr({title:d[e+"title"]||"",id:t||e+"_"+w}).click(i).hover(D,F),r};for(d.cloneToTop&&n.toppager&&(j=2),v=0;v<j;v++){if(c=$("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===n.direction?"right":"left")+";table-layout:auto;'></div>"),0===v?(w=a,(y=P)===n.toppager&&(w+="_top",j=1)):(y=n.toppager,w=a+"_top"),d.add&&E("add",M.id,k),d.edit&&E("edit",z.id,O),d.view&&E("view",L.id,q),d.del&&E("del",B.id,N),(d.add||d.edit||d.del||d.view)&&$(c).append(S),d.search&&(b=E("search",H.id,G),H.showOnLoad&&!0===H.showOnLoad&&$(b,c).click()),d.refresh&&E("refresh","",T),t=$(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$("body").append("<div id='testpg2' class='"+getGuiStyles.call(s,"gBox","ui-jqgrid")+"' style='font-size:"+t+";visibility:hidden;' ></div>"),e=$(c).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(y+"_"+d.position,y).append(c),d.hideEmptyPagerParts)for(x=0;x<I.length;x++)I[x]!==d.position&&(0===(_=$(y+"_"+I[x],y)).length||0===_[0].childNodes.length?_.hide():1===_[0].childNodes.length&&(C=_[0].firstChild,!$(C).is("table.ui-pg-table")||0!==C.rows&&0!==C.rows[0].cells.length||_.hide()));n._nvtd&&(e>n._nvtd[0]&&($(y+"_"+d.position,y).width(e),n._nvtd[0]=e),n._nvtd[1]=e),s.nav=!0,c.on("keydown.jqGrid",r)}l.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(c,u){return"object"==typeof c&&(u=c,c=void 0),this.each(function(){var t=this,e=t.p;if(t.grid){var i=$.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},base.getGridRes.call($(t),"nav"),jgrid.nav||{},e.navOptions||{},u||{}),r=i.id,o=getGuiStateStyles.call(t,"hover"),a=getGuiStateStyles.call(t,"disabled"),s=getGuiStyles.call(t,"navButton","ui-pg-button");if(void 0===c)if(e.pager){if(base.navButtonAdd.call($(t),e.pager,i),!e.toppager)return;c=e.toppager,r&&(r+="_top")}else e.toppager&&(c=e.toppager);"string"==typeof c&&0!==c.indexOf("#")&&(c="#"+jqID(c));var n=$(".navtable",c),l=i.commonIconClass;if(0<n.length){if(r&&0<n.find("#"+jqID(r)).length)return;var d=$("<div tabindex='0' role='button'></div>");"NONE"===i.buttonicon.toString().toUpperCase()?$(d).addClass(s).append("<div class='ui-pg-div'>"+(i.caption?"<span class='ui-pg-button-text"+(i.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+i.caption+"</span>":"")+"</div>"):$(d).addClass(s).append("<div class='ui-pg-div'><span class='"+(i.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",l,i.buttonicon):mergeCssClasses(l,i.buttonicon))+"'></span>"+(i.caption?"<span class='ui-pg-button-text"+(i.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+i.caption+"</span>":"")+"</div>"),r&&$(d).attr("id",r),"first"===i.position&&0<n.children("div.ui-pg-button").length?n.children("div.ui-pg-button").first().before(d):n.append(d),$(d,n).attr("title",i.title||"").click(function(e){return hasOneFromClasses(this,a)||$.isFunction(i.onClickButton)&&i.onClickButton.call(t,i,e),!1}).hover(function(){hasOneFromClasses(this,a)||$(this).addClass(o)},function(){$(this).removeClass(o)}),$(t).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(o,a){return a=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},a||{}),this.each(function(){if(this.grid){var e=this.p,t=getGuiStyles.call(this,"navButton","ui-pg-button "+getGuiStateStyles.call(this,"disabled"));if(void 0===o)if(e.pager){if(base.navSeparatorAdd.call($(this),e.pager,a),!e.toppager)return;o=e.toppager}else e.toppager&&(o=e.toppager);"string"==typeof o&&0!==o.indexOf("#")&&(o="#"+jqID(o));var i=$(".navtable",o);if(0<i.length){var r="<div class='"+t+"'><span class='"+a.sepclass+"'></span>"+a.sepcontent+"</div>";"first"===a.position?0===i.children("div.ui-pg-button").length?i.append(r):i.children("div.ui-pg-button").first().before(r):i.append(r)}}})},GridToForm:function(a,s){return this.each(function(){var e,t,i,r;if(this.grid){var o=base.getRowData.call($(this),a);if(o)for(e in o)if(o.hasOwnProperty(e))if((t=$("[name="+jqID(e)+"]",s)).is("input:radio")||t.is("input:checkbox"))for(i=0;i<t.length;i++)(r=$(t[i])).prop("checked",r.val()===String(o[e]));else t.val(isEmptyString(o[e])?"":o[e])}})},FormToGrid:function(t,r,o,a){return this.each(function(){if(this.grid){o||(o="set"),a||(a="first");var e=$(r).serializeArray(),i={};$.each(e,function(e,t){i[t.name]=t.value}),"add"===o?base.addRowData.call($(this),t,i,a):"set"===o&&base.setRowData.call($(this),t,i)}})}}),jgrid.extend({groupingSetup:function(){return this.each(function(){var e,t,i,r,o,a=this.p,s=a.colModel,n=a.groupingView,l=function(){return""};if(null===n||"object"!=typeof n&&!$.isFunction(n))a.grouping=!1;else if(n.groupField.length){for(void 0===n.visibiltyOnNextGrouping&&(n.visibiltyOnNextGrouping=[]),n.lastvalues=[],n._locgr||(n.groups=[]),n.counters=[],e=0;e<n.groupField.length;e++)n.groupOrder[e]||(n.groupOrder[e]="asc"),n.groupText[e]||(n.groupText[e]="{0}"),"boolean"!=typeof n.groupColumnShow[e]&&(n.groupColumnShow[e]=!0),"boolean"!=typeof n.groupSummary[e]&&(n.groupSummary[e]=!1),n.groupSummaryPos[e]||(n.groupSummaryPos[e]="footer"),r=s[a.iColByName[n.groupField[e]]],!0===n.groupColumnShow[e]?(n.visibiltyOnNextGrouping[e]=!0,null!=r&&!0===r.hidden&&base.showCol.call($(this),n.groupField[e])):(n.visibiltyOnNextGrouping[e]=$("#"+jgrid.jqID(a.id+"_"+n.groupField[e])).is(":visible"),null!=r&&!0!==r.hidden&&base.hideCol.call($(this),n.groupField[e]));for(n.summary=[],n.hideFirstGroupCol&&(n.formatDisplayField[0]=function(e){return e}),t=0,i=s.length;t<i;t++)r=s[t],n.hideFirstGroupCol&&(r.hidden||n.groupField[0]!==r.name||(r.formatter=l)),r.summaryType&&(o={nm:r.name,st:r.summaryType,v:"",sr:r.summaryRound,srt:r.summaryRoundType||"round"},r.summaryDivider&&(o.sd=r.summaryDivider,o.vd=""),n.summary.push(o))}else a.grouping=!1})},groupingPrepare:function(x,C){return this.each(function(){var e,t,i,r,o,a,s,n,l,d=this,c=d.p,u=c.groupingView,h=u.groups,p=u.counters,f=u.lastvalues,g=u.isInTheSameGroup,m=u.groupField.length,v=!1,b=base.groupingCalculations.handler,y=function(){var e,t,i;for(e=0;e<o.summary.length;e++)t=o.summary[e],i=$.isArray(t.st)?t.st[r.idx]:t.st,$.isFunction(i)?t.v=i.call(d,t.v,t.nm,x,r):(t.v=b.call($(d),i,t.v,t.nm,t.sr,t.srt,x),"avg"===i.toLowerCase()&&t.sd&&(t.vd=b.call($(d),i,t.vd,t.sd,t.sr,t.srt,x)));return o.summary},w=function(e,t){if(null==e&&u.useDefaultValuesOnGrouping){var i,r=void 0!==c.iColByName[t]?c.colModel[c.iColByName[t]]:c.additionalProperties[c.iPropByName[t]];null!=r&&null!=r.formatter&&(null!=r.formatoptions&&void 0!==r.formatoptions.defaultValue?e=r.formatoptions.defaultValue:"string"==typeof r.formatter&&void 0!==(i=$(d).jqGrid("getGridRes","formatter."+r.formatter+".defaultValue"))&&(e=i))}return e};for(e=0;e<m;e++)if(a=u.groupField[e],s=w(x[a],a),null==(l=null==(n=u.displayField[e])?null:w(x[n],n))&&(l=s),void 0!==s){for(i=[],t=0;t<=e;t++)i.push(x[u.groupField[t]]);for(r={idx:e,dataIndex:a,value:s,displayValue:l,startRow:C,cnt:1,keys:i,summary:[]},o={cnt:1,pos:h.length,summary:$.extend(!0,[],u.summary)},0===C?(h.push(r),f[e]=s,p[e]=o):"object"==typeof s||($.isArray(g)&&$.isFunction(g[e])?g[e].call(d,f[e],s,e,u):f[e]===s)?v?(h.push(r),f[e]=s,p[e]=o):((o=p[e]).cnt+=1,h[o.pos].cnt=o.cnt):(h.push(r),f[e]=s,v=!0,p[e]=o),h[o.pos].summary=y(),t=o.pos-1;0<=t;t--)if(h[t].idx<h[o.pos].idx){h[o.pos].parentGroupIndex=t,h[o.pos].parentGroup=h[t];break}}}),this},getGroupHeaderIndex:function(e,t){var i=this[0].p,r=t?$(t).closest("tr.jqgroup"):$("#"+jgrid.jqID(e)),o=parseInt(r.data("jqgrouplevel"),10),a=i.id+"ghead_"+o+"_";return isNaN(o)||!r.hasClass("jqgroup")||e.length<=a.length?-1:parseInt(e.substring(a.length),10)},groupingToggle:function(f,g){return this.each(function(){var e,t,i,r=this.p,o=r.groupingView,a=o.minusicon,s=o.plusicon,n=g?$(g).closest("tr.jqgroup"):$("#"+jgrid.jqID(f)),l=function(e){return e.find(">td>span.tree-wrap")},d=!0,c=!1,u=[],h=function(e){var t,i=e.length;for(t=0;t<i;t++)u.push(e[t])},p=parseInt(n.data("jqgrouplevel"),10);for(r.frozenColumns&&0<n.length&&(t=n[0].rowIndex,n=(n=$(this.rows[t])).add(this.grid.fbRows[t])),i=l(n),jgrid.hasAllClasses(i,a)?(i.removeClass(a).addClass(s),c=!0):i.removeClass(s).addClass(a),n=n.next();n.length;n=n.next())if(n.hasClass("jqfoot")){if(e=parseInt(n.data("jqfootlevel"),10),c){if(e=parseInt(n.data("jqfootlevel"),10),(!o.showSummaryOnHide&&e===p||p<e)&&h(n),e<p)break}else if((e===p||o.showSummaryOnHide&&e===p+1)&&h(n),e<=p)break}else if(n.hasClass("jqgroup"))if(e=parseInt(n.data("jqgrouplevel"),10),c){if(e<=p)break;h(n)}else{if(e<=p)break;e===p+1&&(l(n).removeClass(a).addClass(s),h(n)),d=!1}else(c||d)&&h(n);$(u).css("display",c?"none":""),r.frozenColumns&&$(this).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:t,iRowEnd:n.length?n[0].rowIndex-1:-1}}}]),this.fixScrollOffsetAndhBoxPadding(),$(this).triggerHandler("jqGridGroupingClickGroup",[f,c]),$.isFunction(r.onClickGroup)&&r.onClickGroup.call(this,f,c)}),!1},groupingRender:function(b,y){var w="",C=this[0],_=C.p,x=0,j=[],I=_.groupingView,S=$.makeArray(I.groupSummary),D=I.groupField.length,F=I.groups,k=_.colModel,R=k.length,O=_.page,e="jqGridShowHideCol.groupingRender",t=function(e){return base.getGuiStyles.call(C,"gridRow",e)},q=t("jqgroup ui-row-"+_.direction),N=t("jqfoot ui-row-"+_.direction);function G(e,t,i,r,o){var a,s,n,l,d,c,u,h,p,f,g,m,v,b=F[e],y="",w=0,x=!0;if(0!==t&&0!==F[e].idx)for(a=e;0<=a;a--)if(F[a].idx===F[e].idx-t){b=F[a];break}for(s=b.cnt,g=void 0===o?r:0;g<R;g++){for(n="&#160;",f=k[g],h=0;h<b.summary.length;h++)if(p=b.summary[h],m=$.isArray(p.st)?p.st[i.idx]:p.st,v=$.isArray(f.summaryTpl)?f.summaryTpl[i.idx]:f.summaryTpl||"{0}",p.nm===f.name){"string"==typeof m&&"avg"===m.toLowerCase()&&(p.sd&&p.vd?p.v=p.v/p.vd:p.v&&0<s&&(p.v=p.v/s));try{p.groupCount=b.cnt,p.groupIndex=b.dataIndex,p.groupValue=b.value,c=C.formatter("",p.v,g,p)}catch(e){c=p.v}n=jgrid.format(v,c),f.summaryFormat&&(n=f.summaryFormat.call(C,i,n,c,f,p));break}d=l=!1,void 0!==o&&x&&(f.hidden||(n=o,x=!1,1<r&&(l=!0,w=r-1),d=f.align,f.align="rtl"===_.direction?"right":"left",I.iconColumnName=f.name)),u=!1,0<w&&!f.hidden&&"&#160;"===n?(u=!0,d&&(f.align=d),w--):(y+="<td role='gridcell' "+C.formatCol(g,1,"")+(l?"colspan='"+r+"'":"")+">"+n+"</td>",l=!1,d&&(f.align=d),u&&(f.hidden=!1,w--))}return y}return $.each(k,function(e,t){var i;for(i=0;i<D;i++)if(I.groupField[i]===t.name){j[i]=e;break}}),S.reverse(),$.each(F,function(e,t){var i,r,o,a,s,n,l,d,c=_.id+"ghead_"+t.idx,u=c+"_"+e,h=$.isFunction(I.groupCollapse)?I.groupCollapse.call(C,{group:t,rowid:u}):I.groupCollapse,p=1,f=0,g=D-1===t.idx,m=null!=t.parentGroup&&t.parentGroup.collapsed,v="<span style='cursor:pointer;margin-"+("rtl"===_.direction?"right:":"left:")+12*t.idx+"px;' class='"+I.commonIconClass+" "+(h?I.plusicon:I.minusicon)+" tree-wrap'></span>";if(I._locgr&&!(t.startRow+t.cnt>(O-1)*y&&t.startRow<O*y))return!0;m&&(h=!0),void 0!==h&&(t.collapsed=h),x++;try{$.isArray(I.formatDisplayField)&&$.isFunction(I.formatDisplayField[t.idx])?(t.displayValue=I.formatDisplayField[t.idx].call(C,t.displayValue,t.value,k[j[t.idx]],t.idx,t,e),i=t.displayValue):i=C.formatter(u,t.displayValue,j[t.idx],t.value,t)}catch(e){i=t.displayValue}if(w+="<tr id='"+u+"' data-jqgrouplevel='"+t.idx+"' "+(h&&m?"style='display:none;' ":"")+"role='row' class='"+q+" "+c+"'>","string"!=typeof(d=$.isFunction(I.groupText[t.idx])?I.groupText[t.idx].call(C,i,t.cnt,t.summary):jgrid.template(I.groupText[t.idx],i,t.cnt,t.summary))&&"number"!=typeof d&&(d=i),"header"===I.groupSummaryPos[t.idx]?(p=1,"cb"!==k[0].name&&"cb"!==k[1].name||p++,"subgrid"!==k[0].name&&"subgrid"!==k[1].name||p++,w+=G(e,0,t,p,v+"<span class='cell-wrapper'>"+d+"</span>")):w+="<td role='gridcell' style='padding-left:"+12*t.idx+"px;' colspan='"+R+"'>"+v+d+"</td>",w+="</tr>",g){for(n=F[e+1],s=t.startRow,l=void 0!==n?n.startRow:F[e].startRow+F[e].cnt,I._locgr&&(f=(O-1)*y)>t.startRow&&(s=f),o=s;o<l&&b[o-f];o++)w+=b[o-f].join("");if("header"!==I.groupSummaryPos[t.idx]){if(void 0!==n){for(r=0;r<I.groupField.length&&n.dataIndex!==I.groupField[r];r++);x=I.groupField.length-r}for(a=0;a<x;a++)S[a]&&(w+="<tr data-jqfootlevel='"+(t.idx-a)+(h&&(0<t.idx-a||!I.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+N+"'>",w+=G(e,a,F[t.idx-a],0),w+="</tr>");x=r}}}),this.off(e).on(e,function(){var e,t,i,r,o=_.iColByName[I.iconColumnName];if(0<=$.inArray("header",I.groupSummaryPos)){for(r=0;r<k.length;r++)if(!k[r].hidden){i=r;break}if(void 0===i||o===i)return;for(e=0;e<C.rows.length;e++)t=C.rows[e],$(t).hasClass("jqgroup")&&($(t.cells[i]).html(t.cells[o].innerHTML),$(t.cells[o]).html("&nbsp;"));I.iconColumnName=k[i].name}}),w},groupingGroupBy:function(o,a){return this.each(function(){var e,t,i=this.p,r=i.groupingView;for("string"==typeof o&&(o=[o]),i.grouping=!0,r._locgr=!1,void 0===r.visibiltyOnNextGrouping&&(r.visibiltyOnNextGrouping=[]),e=0;e<r.groupField.length;e++)t=i.colModel[i.iColByName[r.groupField[e]]],!r.groupColumnShow[e]&&r.visibiltyOnNextGrouping[e]&&null!=t&&!0===t.hidden&&base.showCol.call($(this),r.groupField[e]);for(e=0;e<o.length;e++)r.visibiltyOnNextGrouping[e]=$(i.idSel+"_"+jgrid.jqID(o[e])).is(":visible");i.groupingView=$.extend(i.groupingView,a||{}),r.groupField=o,$(this).trigger("reloadGrid")})},groupingRemove:function(o){return this.each(function(){var e,t=this.p,i=this.tBodies[0],r=t.groupingView;if(void 0===o&&(o=!0),!(t.grouping=!1)===o){for(e=0;e<r.groupField.length;e++)!r.groupColumnShow[e]&&r.visibiltyOnNextGrouping[e]&&base.showCol.call($(this),r.groupField);$("tr.jqgroup, tr.jqfoot",i).remove(),$("tr.jqgrow",i).filter(":hidden").show()}else $(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,i,r,o,a){var s,n,l={sum:function(){return parseFloat(t||0)+parseFloat(a[i]||0)},min:function(){return""===t?parseFloat(a[i]||0):Math.min(parseFloat(t),parseFloat(a[i]||0))},max:function(){return""===t?parseFloat(a[i]||0):Math.max(parseFloat(t),parseFloat(a[i]||0))},count:function(){return""===t&&(t=0),a.hasOwnProperty(i)?t+1:0},avg:function(){return l.sum()}};if(!l[e])throw"jqGrid Grouping No such method: "+e;return s=l[e](),null!=r&&("fixed"===o?s=s.toFixed(r):(n=Math.pow(10,r),s=Math.round(s*n)/n)),s}}}),$.jgrid.extend({jqGridImport:function(r){return r=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},r||{}),this.each(function(){var e,l=this,t=function(e,t){var i,r,o,a,s=$(t.xmlGrid.config,e)[0],n=$(t.xmlGrid.data,e)[0];if(xmlJsonClass.xml2json){for(o in i=xmlJsonClass.xml2json(s," "),i=$.parseJSON(i))i.hasOwnProperty(o)&&(r=i[o]);void 0!==r&&(n?(a=i.grid.datatype,i.grid.datatype="xmlstring",i.grid.datastr=e,$(l).jqGrid(r).jqGrid("setGridParam",{datatype:a})):$(l).jqGrid(r))}else(null!=jgrid.defaults&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("xml2json or parse are not present")},i=function(e,t){if(e&&"string"==typeof e){var i,r=$.parseJSON(e),o=r[t.jsonGrid.config],a=r[t.jsonGrid.data];a?(i=o.datatype,o.datatype="jsonstring",o.datastr=a,$(l).jqGrid(o).jqGrid("setGridParam",{datatype:i})):$(l).jqGrid(o)}};switch(r.imptype){case"xml":$.ajax($.extend({url:r.impurl,type:r.mtype,data:r.impData,dataType:"xml",context:r,complete:function(e){!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(t(e.responseXML,this),$(l).triggerHandler("jqGridImportComplete",[e,this]),$.isFunction(this.importComplete)&&this.importComplete(e))}},r.ajaxOptions));break;case"xmlstring":r.impstring&&"string"==typeof r.impstring&&(e=$.parseXML(r.impstring))&&(t(e,r),$(l).triggerHandler("jqGridImportComplete",[e,r]),$.isFunction(r.importComplete)&&r.importComplete(e),r.impstring=null);break;case"json":$.ajax($.extend({url:r.impurl,type:r.mtype,data:r.impData,dataType:"json",context:r,complete:function(e){try{!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(i(e.responseText,this),$(l).triggerHandler("jqGridImportComplete",[e,this]),$.isFunction(this.importComplete)&&this.importComplete(e))}catch(e){}}},r.ajaxOptions));break;case"jsonstring":r.impstring&&"string"==typeof r.impstring&&(i(r.impstring,r),$(l).triggerHandler("jqGridImportComplete",[r.impstring,r]),$.isFunction(r.importComplete)&&r.importComplete(r.impstring),r.impstring=null)}})},jqGridExport:function(i){i=$.extend({exptype:"xmlstring",root:"grid",ident:"\t"},i||{});var r=null;return this.each(function(){if(this.grid){var e,t=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(t.rownumbers&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.multiselect&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.subGrid&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.knv=null,t.treeGrid)for(e in t.treeReader)t.treeReader.hasOwnProperty(e)&&(t.colNames.splice(t.colNames.length-1),t.colModel.splice(t.colModel.length-1));switch(i.exptype){case"xmlstring":r="<"+i.root+">"+xmlJsonClass.json2xml(t,i.ident)+"</"+i.root+">";break;case"jsonstring":r="{"+xmlJsonClass.toJson(t,i.root,i.ident,!1)+"}",void 0!==t.postData.filters&&(r=(r=r.replace(/filters":"/,'filters":')).replace(/\}\]\}"/,"}]}"))}}}),r},excelExport:function(t){return t=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var e;this.grid&&"remote"===t.exptype&&((e=$.extend({},this.p.postData,t.exportOptions))[t.oper]=t.tag,window.location=t.url+(null!=t.url&&0<=t.url.indexOf("?")?"&":"?")+$.param(e))})}});var editFeedback=function(e){var t=$.makeArray(arguments).slice(1);return t.unshift(""),t.unshift("Inline"),t.unshift(e),jgrid.feedback.apply(this,t)};jgrid.inlineEdit=jgrid.inlineEdit||{},jgrid.extend({editRow:function(b,e,t,i,r,o,a,s,n,l){var y={},d=$.makeArray(arguments).slice(1);return"object"===$.type(d[0])?y=d[0]:(void 0!==e&&(y.keys=e),$.isFunction(t)&&(y.oneditfunc=t),$.isFunction(i)&&(y.successfunc=i),void 0!==r&&(y.url=r),null!=o&&(y.extraparam=o),$.isFunction(a)&&(y.aftersavefunc=a),$.isFunction(s)&&(y.errorfunc=s),$.isFunction(n)&&(y.afterrestorefunc=n),$.isFunction(l)&&(y.beforeEditRow=l)),this.each(function(){var u=this,a=$(u),h=u.p,p=0,f=null,g={},m={},e=h.colModel,t=h.prmNames;if(u.grid){var s=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},jgrid.inlineEdit,h.inlineEditing||{},y),n=a.jqGrid("getInd",b,!0),i=s.focusField,r="object"==typeof i&&null!=i?$(i.target||i).closest("tr.jqgrow>td")[0]:null;if(!1!==n&&(s.extraparam[t.oper]===t.addoper||editFeedback.call(u,s,"beforeEditRow",s,b))&&"0"===($(n).attr("editable")||"0")&&!$(n).hasClass("not-editable-row")){var o=jgrid.detectRowEditing.call(u,b);if(null!=o&&"cellEditing"===o.mode){var l=o.savedRow,d=u.rows[l.id],c=getGuiStateStyles.call(u,"select");a.jqGrid("restoreCell",l.id,l.ic),$(d.cells[l.ic]).removeClass("edit-cell "+c),$(d).addClass(c).attr({"aria-selected":"true",tabindex:"0"})}if(jgrid.enumEditableCells.call(u,n,$(n).hasClass("jqgrid-new-row")?"add":"edit",function(e){var t,i,r,o=e.cm,a=$(e.dataElement),s=e.dataWidth,n=o.name,l=o.edittype,d=e.iCol,c=o.editoptions||{};if(m[n]=e.editable,"hidden"!==e.editable){try{t=$.unformat.call(this,e.td,{rowId:b,colModel:o},d)}catch(e){t="textarea"===l?a.text():a.html()}g[n]=t,a.html(""),i=$.extend({},c,{id:b+"_"+n,name:n,rowId:b,mode:e.mode,cm:o,iCol:d}),("&nbsp;"===t||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))&&(t=""),r=jgrid.createEl.call(u,l,i,t,!0,$.extend({},jgrid.ajaxOptions,h.ajaxSelectOptions||{})),$(r).addClass("editable"),a.append(r),s&&$(r).width(e.dataWidth),jgrid.bindEv.call(u,r,i),"select"===l&&!0===c.multiple&&void 0===c.dataUrl&&jgrid.msie&&$(r).width($(r).width()),null===f&&(f=d),p++}}),0<p){if(g.id=b,h.savedRow.push(g),h.editingInfo[b]={mode:"inlineEditing",savedRow:g,editable:m},$(n).attr("editable","1"),i&&("number"==typeof i&&parseInt(i,10)<=e.length?f=i:"string"==typeof i?f=h.iColByName[i]:null!=r&&(f=r.cellIndex),setTimeout(function(){var t=a.jqGrid("getNumberOfFrozenColumns"),e=function(e){return h.frozenColumns&&0<t&&f<t?u.grid.fbRows[n.rowIndex].cells[e]:n.cells[e]},i=function(e){return $(e).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},r=function(){return i(h.frozenColumns&&0<t?u.grid.fbRows[n.rowIndex]:n).first()},o=i(e(f));0<o.length?o.first().focus():"number"==typeof s.defaultFocusField||"string"==typeof s.defaultFocusField?(0===(o=i(e("number"==typeof s.defaultFocusField?s.defaultFocusField:h.iColByName[s.defaultFocusField]))).length&&(o=r()),o.first().focus()):r().focus()},0)),!0===s.keys){var v=$(n);h.frozenColumns&&(v=v.add(u.grid.fbRows[n.rowIndex])),v.on("keydown",function(e){return 27===e.keyCode?(a.jqGrid("restoreRow",b,s.afterrestorefunc),!1):13===e.keyCode?"TEXTAREA"===e.target.tagName||(a.jqGrid("saveRow",b,s),!1):void 0})}fullBoolFeedback.call(u,s.oneditfunc,"jqGridInlineEditRow",b,s)}}}})},saveRow:function(a,e,t,i,r,o,s,n){var l,d=$.makeArray(arguments).slice(1),c={},u=this[0],h=$(u),p=null!=u?u.p:null,f=jgrid.info_dialog,g=$.isFunction,m=null!=jgrid.defaults&&g(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert;if(u.grid&&null!=p){"object"===$.type(d[0])?c=d[0]:(g(e)&&(c.successfunc=e),void 0!==t&&(c.url=t),void 0!==i&&(c.extraparam=i),g(r)&&(c.aftersavefunc=r),g(o)&&(c.errorfunc=o),g(s)&&(c.afterrestorefunc=s),g(n)&&(c.beforeSaveRow=n));var v=function(e){return h.jqGrid("getGridRes",e)};c=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:v("defaults.savetext")||"Saving..."},jgrid.inlineEdit,p.inlineEditing||{},c);var b,y,w,x,C,_,j,I,S={},D={},F={},k=h.jqGrid("getInd",a,!0),R=$(k),O=p.prmNames,q=v("errors.errcap"),N=v("edit.bClose"),G=function(t,e){try{var i=jgrid.getRelativeRect.call(u,e);f.call(u,q,t,N,{top:i.top,left:i.left+$(u).closest(".ui-jqgrid").offset().left})}catch(e){m(t)}};if(!1!==k&&(l=c.extraparam[O.oper]===O.addoper?"add":"edit",editFeedback.call(u,c,"beforeSaveRow",c,a,l)&&(b=R.attr("editable"),c.url=c.url||p.editurl,j="clientArray"!==c.url,"1"===b))){if(_=$.jgrid.detectRowEditing.call(u,a),jgrid.enumEditableCells.call(u,k,R.hasClass("jqgrid-new-row")?"add":"edit",function(e){var t=e.cm,i=t.formatter,r=t.editoptions||{},o=t.formatoptions||{},a={},s=jgrid.getEditedValue.call(u,$(e.dataElement),t,a,e.editable);if("select"===t.edittype&&"select"!==t.formatter&&(D[t.name]=a.text),null!=(C=jgrid.checkValues.call(u,s,e.iCol,void 0,void 0,$.extend(e,{oldValue:null!=_?_.savedRow[t.name]:null,newValue:s,oldRowData:null!=_?_.savedRow:null})))&&!1===C[0])return I=!0,G(C[1],e.td),!1;"date"===i&&!0!==o.sendFormatted&&(s=$.unformat.date.call(u,s,t)),j&&!0===r.NullIfEmpty&&""===s&&(s="null"),S[t.name]=s}),I)return;var T;O=p.prmNames,T=!1===p.keyName?O.id:p.keyName,S&&(S[O.oper]=O.editoper,void 0!==S[T]&&""!==S[T]||(S[T]=jgrid.stripPref(p.idPrefix,a)),S=$.extend({},S,p.inlineData||{},c.extraparam));var E={options:c,rowid:a,tr:k,iRow:k.rowIndex,savedRow:_.savedRow,newData:S,mode:l};if(!editFeedback.call(u,c,"saveRowValidation",E))return void(E.errorText&&G(E.errorText,k));if(j)h.jqGrid("progressBar",{method:"show",loadtype:c.saveui,htmlcontent:c.savetext}),(F=$.extend({},S,F))[T]=jgrid.stripPref(p.idPrefix,F[T]),p.autoEncodeOnEdit&&$.each(F,function(e,t){g(t)||(F[e]=jgrid.oldEncodePostedData(t))}),k.id===p.idPrefix+F[T]||null==O.idold||F.hasOwnProperty(O.idold)||(F[O.idold]=jgrid.stripPref(p.idPrefix,k.id)),$.ajax($.extend({url:g(c.url)?c.url.call(u,F[T],l,F,c):c.url,data:jgrid.serializeFeedback.call(u,g(c.serializeSaveData)?c.serializeSaveData:p.serializeRowData,"jqGridInlineSerializeSaveData",F),type:g(c.mtype)?c.mtype.call(u,l,c,F[T],F):c.mtype,complete:function(e,t){var i,r,o;if(h.jqGrid("progressBar",{method:"hide",loadtype:c.saveui}),(e.status<300||304===e.status)&&(0!==e.status||4!==e.readyState))if(null!=(r=h.triggerHandler("jqGridInlineSuccessSaveRow",[e,a,c,l,F]))&&!0!==r||(r=[!0,S]),r[0]&&g(c.successfunc)&&(r=c.successfunc.call(u,e,a,c,l,F)),$.isArray(r)?(i=r[0],S=r[1]||S):i=r,!0===i){for(p.autoEncodeOnEdit&&$.each(S,function(e,t){S[e]=jgrid.oldDecodePostedData(t)}),S=$.extend({},S,D),h.jqGrid("setRowData",a,S),R.attr("editable","0"),o=0;o<p.savedRow.length;o++)if(String(p.savedRow[o].id)===String(a)){w=o;break}0<=w&&(p.savedRow.splice(w,1),delete p.editingInfo[a]),fullBoolFeedback.call(u,c.aftersavefunc,"jqGridInlineAfterSaveRow",a,e,S,c),null!=r[2]?h.jqGrid("changeRowid",a,p.idPrefix+r[2]):k.id!==p.idPrefix+S[T]&&h.jqGrid("changeRowid",k.id,p.idPrefix+S[T]),R.removeClass("jqgrid-new-row").off("keydown")}else fullBoolFeedback.call(u,c.errorfunc,"jqGridInlineErrorSaveRow",a,e,t,null,c),!0===c.restoreAfterError&&h.jqGrid("restoreRow",a,c.afterrestorefunc)},error:function(e,t,i){if(h.triggerHandler("jqGridInlineErrorSaveRow",[a,e,t,i,c]),g(c.errorfunc))c.errorfunc.call(u,a,e,t,i);else{var r=e.responseText||e.statusText;try{f.call(u,q,'<div class="'+getGuiStateStyles.call(u,"error")+'">'+r+"</div>",N,{buttonalign:"right"})}catch(e){m(r)}}!0===c.restoreAfterError&&h.jqGrid("restoreRow",a,c.afterrestorefunc)}},jgrid.ajaxOptions,p.ajaxRowOptions,c.ajaxSaveOptions||{}));else{for(S=$.extend({},S,D),x=h.jqGrid("setRowData",a,S),R.attr("editable","0"),y=0;y<p.savedRow.length;y++)if(String(p.savedRow[y].id)===String(a)){w=y;break}0<=w&&(p.savedRow.splice(w,1),delete p.editingInfo[a]),fullBoolFeedback.call(u,c.aftersavefunc,"jqGridInlineAfterSaveRow",a,x,S,c),R.removeClass("jqgrid-new-row").off("keydown"),k.id!==p.idPrefix+S[T]&&h.jqGrid("changeRowid",k.id,p.idPrefix+S[T])}}}},restoreRow:function(l,e){var t=$.makeArray(arguments).slice(1),d={};return"object"===$.type(t[0])?d=t[0]:$.isFunction(e)&&(d.afterrestorefunc=e),this.each(function(){var e,t=this,i=$(t),r=t.p,o=-1,a={};if(t.grid){var s=$.extend(!0,{},jgrid.inlineEdit,r.inlineEditing||{},d),n=i.jqGrid("getInd",l,!0);if(!1!==n&&editFeedback.call(t,s,"beforeCancelRow",s,l)){for(e=0;e<r.savedRow.length;e++)if(String(r.savedRow[e].id)===String(l)){o=e;break}if(0<=o){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+jgrid.jqID(n.id)).datepicker("hide")}catch(e){}$.each(r.colModel,function(){var e=this.name;r.savedRow[o].hasOwnProperty(e)&&(a[e]=r.savedRow[o][e],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(a[e]=$.unformat.date.call(t,a[e],this)))}),i.jqGrid("setRowData",l,a),$(n).attr("editable","0").off("keydown"),r.savedRow.splice(o,1),delete r.editingInfo[l],$("#"+jgrid.jqID(l),t).hasClass("jqgrid-new-row")&&setTimeout(function(){i.jqGrid("delRowData",l),i.jqGrid("showAddEditButtons",!1)},0)}fullBoolFeedback.call(t,s.afterrestorefunc,"jqGridInlineAfterRestoreRow",l)}}})},addRow:function(s){return this.each(function(){if(this.grid){var t=this,e=$(t),i=t.p,r=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},jgrid.inlineEdit,i.inlineEditing||{},s||{});if(editFeedback.call(t,r,"beforeAddRow",r.addRowParams))if(r.rowID=$.isFunction(r.rowID)?r.rowID.call(t,r):null!=r.rowID?r.rowID:jgrid.randId(),!0===r.useDefValues&&$(i.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var e=this.editoptions.defaultValue;r.initdata[this.name]=$.isFunction(e)?e.call(t,r):e}}),r.rowID=i.idPrefix+r.rowID,e.jqGrid("addRowData",r.rowID,r.initdata,r.position),$("#"+jgrid.jqID(r.rowID),t).addClass("jqgrid-new-row"),r.useFormatter)$("#"+jgrid.jqID(r.rowID)+" .ui-inline-edit",t).click();else{var o=i.prmNames,a=o.oper;r.addRowParams.extraparam[a]=o.addoper,e.jqGrid("editRow",r.rowID,r.addRowParams),e.jqGrid("setSelection",r.rowID)}}})},inlineNav:function(p,f){return"object"==typeof p&&(f=p,p=void 0),this.each(function(){var o=this,a=$(o),s=o.p;if(this.grid&&null!=s){var e,t=p===s.toppager?s.idSel+"_top":s.idSel,i=p===s.toppager?s.id+"_top":s.id,n=getGuiStateStyles.call(o,"disabled"),l=$.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},a.jqGrid("getGridRes","nav"),jgrid.nav||{},s.navOptions||{},jgrid.inlineNav||{},s.inlineNavOptions||{},f||{}),d=function(){o.modalAlert()};if(void 0===p)if(s.pager){if(a.jqGrid("inlineNav",s.pager,l),!s.toppager)return;p=s.toppager,t=s.idSel+"_top",i=s.id+"_top"}else s.toppager&&(p=s.toppager,t=s.idSel+"_top",i=s.id+"_top");if(void 0!==p&&!((e=$(p)).length<=0)){if(e.find(".navtable").length<=0&&a.jqGrid("navGrid",p,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),(s._inlinenav=!0)===l.addParams.useFormatter){var r,c,u,h=s.colModel;for(r=0;r<h.length;r++)if(h[r].formatter&&"actions"===h[r].formatter){h[r].formatoptions&&(c={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},u=$.extend(c,h[r].formatoptions),l.addParams.addRowParams={keys:u.keys,oneditfunc:u.onEdit,successfunc:u.onSuccess,url:u.url,extraparam:u.extraparam,aftersavefunc:u.afterSave,errorfunc:u.onError,afterrestorefunc:u.afterRestore});break}}l.add&&a.jqGrid("navButtonAdd",p,{caption:l.addtext,title:l.addtitle,commonIconClass:l.commonIconClass,buttonicon:l.addicon,iconsOverText:l.iconsOverText,id:i+"_iladd",onClickButton:function(){hasOneFromClasses(this,n)||a.jqGrid("addRow",l.addParams)}}),l.edit&&a.jqGrid("navButtonAdd",p,{caption:l.edittext,title:l.edittitle,commonIconClass:l.commonIconClass,buttonicon:l.editicon,iconsOverText:l.iconsOverText,id:i+"_iledit",onClickButton:function(){if(!hasOneFromClasses(this,n)){var e=s.selrow;e?a.jqGrid("editRow",e,l.editParams):d()}}}),l.save&&(a.jqGrid("navButtonAdd",p,{caption:l.savetext,title:l.savetitle,commonIconClass:l.commonIconClass,buttonicon:l.saveicon,iconsOverText:l.iconsOverText,id:i+"_ilsave",onClickButton:function(){if(!hasOneFromClasses(this,n)){var e=s.savedRow[0].id;if(e){var t=s.prmNames,i=t.oper,r=l.editParams;$("#"+jgrid.jqID(e),o).hasClass("jqgrid-new-row")?(l.addParams.addRowParams.extraparam[i]=t.addoper,r=l.addParams.addRowParams):(l.editParams.extraparam||(l.editParams.extraparam={}),l.editParams.extraparam[i]=t.editoper),a.jqGrid("saveRow",e,r)}else d()}}}),$(t+"_ilsave").addClass(n)),l.cancel&&(a.jqGrid("navButtonAdd",p,{caption:l.canceltext,title:l.canceltitle,commonIconClass:l.commonIconClass,buttonicon:l.cancelicon,iconsOverText:l.iconsOverText,id:i+"_ilcancel",onClickButton:function(){if(!hasOneFromClasses(this,n)){var e=s.savedRow[0].id,t=l.editParams;e?($("#"+jgrid.jqID(e),o).hasClass("jqgrid-new-row")&&(t=l.addParams.addRowParams),a.jqGrid("restoreRow",e,t)):d()}}}),$(t+"_ilcancel").addClass(n)),!0===l.restoreAfterSelect&&a.on("jqGridSelectRow",function(e,t){if(0<s.savedRow.length&&!0===s._inlinenav){var i=s.savedRow[0].id;t!==i&&"number"!=typeof i&&a.jqGrid("restoreRow",i,l.editParams)}}),a.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){a.jqGrid("showAddEditButtons",!1)}),a.on("jqGridInlineEditRow",function(e,t){a.jqGrid("showAddEditButtons",!0,t)})}}})},showAddEditButtons:function(a){return this.each(function(){if(this.grid){var e=this.p,t=e.idSel,i=getGuiStateStyles.call(this,"disabled"),r=t+"_ilsave,"+t+"_ilcancel"+(e.toppager?","+t+"_top_ilsave,"+t+"_top_ilcancel":""),o=t+"_iladd,"+t+"_iledit"+(e.toppager?","+t+"_top_iladd,"+t+"_top_iledit":"");$(a?o:r).addClass(i),$(a?r:o).removeClass(i)}})}});var $UiMultiselect=null!=$.ui?$.ui.multiselect:null,reorderSelectedColumns=function(i){if(null!=this.grid&&null!=this.grid.p){var r,e,t,o,a,s=this,n=this.grid.p,l=this.gh,d=this.selectedList,c=this.inGroup,u=d.find("li"),h=u.length-1,p=function(e,t,i){var r,o,a=d.find("li");for(void 0===t&&(t=i?a.length-1:0),r=t;i?0<=r:r<a.length;i?r--:r++)if((o=$(a[r]).data("optionLink"))&&e.call(a[r],parseInt(o.val(),10),r))return r},f=function(){0<=(e=$.inArray(n.colModel[i].name,s.newColOrder))&&s.newColOrder.splice(e,1),u=d.find("li"),r=0,p(function(e,t){if(e===i){for(h=t;0<=r&&r<n.colModel.length&&r!==i&&(n.colModel[r].hidden||n.colModel[r].hidedlg)&&(null==c||c[r]===c[i]);)r++;return s.newColOrder.splice(r,0,n.colModel[i].name),!0}(r=$.inArray(n.colModel[e].name,s.newColOrder,r))<0&&(r=$.inArray(n.colModel[e].name,s.newColOrder)),r++})},g=function(e){if(c[e]===c[i])return $(this).after(u[h]),f(),!0},m=function(e){if(c[e]===c[i])return $(this).before(u[h]),f(),!0},v=function(e){if(c[e]===c[i]&&void 0!==c[e])return l[c[e]].startColumnName=n.colModel[e].name,!0};if(f(),l&&void 0!==l[c[i]]){for(o=l[c[i]],e=0;e<o.numberOfColumns;e++)if(r=n.iColByName[o.startColumnName]+e,!n.colModel[r].hidden&&!n.colModel[r].hidedlg){p(g,h-1,!0),p(m,h+1),p(v);break}}else if(l){if(u=d.find("li"),(e=p(function(e){if(e===i)return!0}))+1>=u.length||e<0)return;if((a=$(u[e+1]).data("optionLink"))&&void 0!==(t=c[parseInt(a.val(),10)])&&(a=$(u[e-1]).data("optionLink"))&&c[parseInt(a.val(),10)]===t){var b=p(function(e){if(c[e]!==t)return!0},e+1);$(u[void 0===b||b>=u.length?u.length-1:b-1]).after(u[h]),f()}}}};if(jgrid.msie&&8===jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),jgrid._multiselect=!1,$UiMultiselect){if($UiMultiselect.prototype._setSelected){var setSelected=$UiMultiselect.prototype._setSelected;$UiMultiselect.prototype._setSelected=function(e,t){var i=setSelected.call(this,e,t),r=this.element,o=parseInt(e.data("optionLink").val(),10);return t&&this.selectedList&&(reorderSelectedColumns.call(this,o),this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(r)})),i}}$UiMultiselect.prototype.destroy&&($UiMultiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),jgrid._multiselect=!0}function Aggregation(e,t,i){if(!(this instanceof Aggregation))return new Aggregation(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=i}function ArrayOfFieldsets(e,t,i,r,o){var a,s,n=r.length,l=this,d=function(e,t){var i=e,r=t;if(null==i&&(i=""),null==r&&(r=""),i=String(i),r=String(r),this.caseSensitive||(i=i.toUpperCase(),r=r.toUpperCase()),i===r){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(null===e)return-1;if(null===t)return 1}return i<r?-1:1},c=function(e,t){return(e=Number(e))===(t=Number(t))?0:e<t?-1:1},u=function(e,t){return(e=Math.floor(Number(e)))===(t=Math.floor(Number(t)))?0:e<t?-1:1};for(l.items=[],l.indexesOfSourceData=[],l.trimByCollect=e,l.caseSensitive=t,l.skipSort=i,l.fieldLength=n,l.fieldNames=new Array(n),l.fieldSortDirection=new Array(n),l.fieldCompare=new Array(n),a=0;a<n;a++){switch(s=r[a],l.fieldNames[a]=s[o||"dataName"],s.sorttype){case"integer":case"int":l.fieldCompare[a]=u;break;case"number":case"currency":case"float":l.fieldCompare[a]=c;break;default:l.fieldCompare[a]=$.isFunction(s.compare)?s.compare:d}l.fieldSortDirection[a]="desc"===s.sortorder?-1:1}}jgrid.extend({sortableColumns:function(l){return this.each(function(){var a=this,s=a.p,e=jqID(s.id);if(s&&s.sortable&&$.isFunction($.fn.sortable)){var t={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(e){return $(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},start:function(){a.grid.hDiv.scrollLeft=a.grid.bDiv.scrollLeft},update:function(e,t){var i=$(">th",$(t.item).parent()),r=s.id+"_",o=[];i.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(r,""),t=s.iColByName[e];void 0!==t&&o.push(t)}),$(a).jqGrid("remapColumns",o,!0,!0),$.isFunction(s.sortable.update)&&s.sortable.update(o),setTimeout(function(){s.disableClick=!1},50)}};if(s.sortable.options?$.extend(t,s.sortable.options):$.isFunction(s.sortable)&&(s.sortable={update:s.sortable}),t.start){var i=t.start;t.start=function(e,t){n(),i.call(this,e,t)}}else t.start=n;s.sortable.exclude&&(t.items+=":not("+s.sortable.exclude+")");var r=l.sortable(t),o=r.data("sortable")||r.data("uiSortable")||r.data("ui-sortable");null!=o&&(o.floating=!0)}function n(){s.disableClick=!0}})},columnChooser:function(a){var t,s,e,i,r,n,o,l=this,d=l[0],c=d.p,u=c.colModel,h=u.length,p=c.colNames,f=function(e){return $UiMultiselect&&$UiMultiselect.prototype&&e.data($UiMultiselect.prototype.widgetFullName||$UiMultiselect.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")};if(!$("#colchooser_"+jqID(c.id)).length){if(t=$('<div id="colchooser_'+c.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),s=$("select",t),a=$.extend({width:400,height:240,classname:null,done:function(e){e&&l.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+70,resize:function(){var e=f(s),t=e.container.closest(".ui-dialog-content");0<t.length&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},e.dialog_opts||{})},apply_perm:function(){var e,t,i=new Array(c.colModel.length),r={notSkipFrozen:void 0!==a.notSkipFrozen&&a.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(e=0;e<c.colModel.length;e++)i[e]=c.iColByName[n.newColOrder[e]];if($("option",s).each(function(){$(this).is(":selected")?l.jqGrid("showCol",u[this.value].name,r):l.jqGrid("hideCol",u[this.value].name,r)}),a.done&&a.done.call(l,i),c.groupHeader&&("object"==typeof c.groupHeader||$.isFunction(c.groupHeader)))if(l.jqGrid("destroyGroupHeader",!1),c.groupHeader.groupHeaders=n.gh,null!=c.pivotOptions&&null!=c.pivotOptions.colHeaders&&1<c.pivotOptions.colHeaders.length)for(t=c.pivotOptions.colHeaders,e=0;e<t.length;e++)t[e]&&t[e].groupHeaders.length&&l.jqGrid("setGroupHeaders",t[e]);else l.jqGrid("setGroupHeaders",c.groupHeader);var o=c.autowidth||void 0!==c.widthOrg&&"auto"!==c.widthOrg&&"100%"!==c.widthOrg?c.width:c.tblwidth;o!==c.width&&l.jqGrid("setGridWidth",o,c.shrinkToFit)},cleanup:function(e){_(a.dlog,t,"destroy"),_(a.msel,s,"destroy"),t.remove(),e&&a.done&&a.done.call(l)},msel_opts:{}},l.jqGrid("getGridRes","col"),jgrid.col,a||{}),$.ui&&$UiMultiselect&&$UiMultiselect.defaults){if(!jgrid._multiselect)return void(null!=jgrid.defaults&&$.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");a.msel_opts=$.extend($UiMultiselect.defaults,a.msel_opts)}a.caption&&t.attr("title",a.caption),a.classname&&(t.addClass(a.classname),s.addClass(a.classname)),a.width&&($(">div",t).css({width:a.width,margin:"0 auto"}),s.css("width",a.width)),a.height&&($(">div",t).css("height",a.height),s.css("height",a.height-10)),s.empty();var g,m,v,b,y=null!=c.groupHeader?c.groupHeader.groupHeaders:0,w={};if(y)for(g=0;g<y.length;g++)for(b=y[g],m=0;m<b.numberOfColumns;m++)v=c.iColByName[b.startColumnName]+m,w[v]=$.isFunction(a.buildItemText)?a.buildItemText.call(l[0],{iCol:v,cm:u[v],cmName:u[v].name,colName:p[v],groupTitleText:b.titleText}):$.jgrid.stripHtml(b.titleText)+": "+$.jgrid.stripHtml(""===p[v]?u[v].name:p[v]);for(v=0;v<h;v++)void 0===w[v]&&(w[v]=$.isFunction(a.buildItemText)?a.buildItemText.call(l[0],{iCol:v,cm:u[v],cmName:u[v].name,colName:p[v],groupTitleText:null}):$.jgrid.stripHtml(p[v]));if($.each(u,function(e){this.hidedlg||s.append("<option value='"+e+"'"+(c.headertitles||this.headerTitle?" title='"+jgrid.stripHtml("string"==typeof this.headerTitle?this.headerTitle:w[e])+"'":"")+(this.hidden?"":" selected='selected'")+">"+w[e]+"</option>")}),e=$.isFunction(a.dlog_opts)?a.dlog_opts.call(l,a):a.dlog_opts,_(a.dlog,t,e),i=$.isFunction(a.msel_opts)?a.msel_opts.call(l,a):a.msel_opts,_(a.msel,s,i),(r=$("#colchooser_"+jqID(c.id))).css({margin:"auto"}),r.find(">div").css({width:"100%",height:"100%",margin:"auto"}),n=f(s)){var x,C;if(n.grid=d,y)for(n.gh=$.extend(!0,[],y),n.inGroup=new Array(c.colModel.length),x=0;x<y.length;x++)for(C=y[x],v=0;v<C.numberOfColumns;v++)n.inGroup[c.iColByName[C.startColumnName]+v]=x;n.newColOrder=$.map(u,function(e){return e.name}),n.container.css({width:"100%",height:"100%",margin:"auto"}),n.selectedContainer.css({width:100*n.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),n.availableContainer.css({width:100-100*n.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),n.selectedList.css("height","auto"),n.availableList.css("height","auto"),o=Math.max(n.selectedList.height(),n.availableList.height()),o=Math.min(o,$(window).height()),n.selectedList.css("height",o),n.availableList.css("height",o),null!=n.options&&n.options.sortable&&n.selectedList.on("sortupdate",function(e,t){reorderSelectedColumns.call(n,parseInt(t.item.data("optionLink").val(),10)),t.item.css({width:"",height:""}),$.isFunction(a.sortUpdate)&&a.sortUpdate.call(d,e,t)}),$.isFunction(a.init)&&a.init.call(d,n)}}function _(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}},sortableRows:function(s){return this.each(function(){var r=this,o=r.grid,a=r.p;o&&(a.treeGrid||$.fn.sortable&&((s=$.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},s||{})).start&&$.isFunction(s.start)?(s._start_=s.start,delete s.start):s._start_=!1,s.update&&$.isFunction(s.update)?(s._update_=s.update,delete s.update):s._update_=!1,s.start=function(e,t){if($(t.item).css("border-width","0"),$("td",t.item).each(function(e){this.style.width=o.cols[e].style.width}),a.subGrid){var i=$(t.item).attr("id");try{$(r).jqGrid("collapseSubGridRow",i)}catch(e){}}s._start_&&s._start_.apply(this,[e,t])},s.update=function(e,t){$(t.item).css("border-width",""),!0===a.rownumbers&&$("td.jqgrid-rownum",r.rows).each(function(e){$(this).html(e+1+(parseInt(a.page,10)-1)*parseInt(a.rowNum,10))}),s._update_&&s._update_.apply(this,[e,t])},$(r).sortable(s)))})},gridDnD:function(r){return this.each(function(){var e,t,g=this;if(g.grid&&!g.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(void 0===$("#jqgrid_dnd")[0]&&$("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"!=typeof r||"updateDnD"!==r||!0!==g.p.jqgdnd){if((r=$.extend({drag:function(o){return $.extend({start:function(e,t){var i,r;if(g.p.subGrid){r=$(t.helper).attr("id");try{$(g).jqGrid("collapseSubGridRow",r)}catch(e){}}for(i=0;i<$.data(g,"dnd").connectWith.length;i++)0===$($.data(g,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")&&$($.data(g,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{});t.helper.addClass("ui-state-highlight"),$("td",t.helper).each(function(e){this.style.width=g.grid.headers[e].width+"px"}),o.onstart&&$.isFunction(o.onstart)&&o.onstart.call($(g),e,t)},stop:function(e,t){var i,r;for(t.helper.dropped&&!o.dragcopy&&(void 0===(r=$(t.helper).attr("id"))&&(r=$(this).attr("id")),$(g).jqGrid("delRowData",r)),i=0;i<$.data(g,"dnd").connectWith.length;i++)$($.data(g,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row");o.onstop&&$.isFunction(o.onstop)&&o.onstop.call($(g),e,t)}},o.drag_opts||{})},drop:function(f){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow"))return e;var t=$(e).closest("table.ui-jqgrid-btable");if(0<t.length&&void 0!==$.data(t[0],"dnd")){var i=$.data(t[0],"dnd").connectWith;return-1!==$.inArray("#"+jqID(this.id),i)}return!1},drop:function(e,t){if($(t.draggable).hasClass("jqgrow")){var i,r=$(t.draggable).attr("id"),o=t.draggable.parent().parent(),a=o.jqGrid("getRowData",r);if(!f.dropbyname){var s,n,l,d,c={},u=o.jqGrid("getGridParam","colModel"),h=$("#"+jqID(this.id)).jqGrid("getGridParam","colModel");try{for(n=s=0;s<u.length&&n<h.length;s++)if("cb"!==(l=u[s].name)&&"rn"!==l&&"subgrid"!==l){for(;n<h.length;n++)if("cb"!==(d=h[n].name)&&"rn"!==d&&"subgrid"!==d){c[d]=a[l];break}n++}a=c}catch(e){}}if(t.helper.dropped=!0,f.beforedrop&&$.isFunction(f.beforedrop)){var p=f.beforedrop.call(this,e,t,a,$("#"+jqID(g.p.id)),$(this));null!=p&&"object"==typeof p&&(a=p)}if(t.helper.dropped)f.autoid&&($.isFunction(f.autoid)?i=f.autoid.call(this,a,{rowid:r,ev:e,ui:t}):(i=Math.ceil(1e3*Math.random()),i=f.autoidprefix+i)),$("#"+jqID(this.id)).jqGrid("addRowData",i,a,f.droppos),a[g.p.localReader.id]=i;f.ondrop&&$.isFunction(f.ondrop)&&f.ondrop.call(this,e,t,a)}}},f.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},r||{})).connectWith)for(r.connectWith=r.connectWith.split(","),r.connectWith=$.map(r.connectWith,function(e){return $.trim(e)}),$.data(g,"dnd",r),0===g.p.reccount||g.p.jqgdnd||i(),g.p.jqgdnd=!0,e=0;e<r.connectWith.length;e++)t=r.connectWith[e],$(t).droppable($.isFunction(r.drop)?r.drop.call($(g),r):r.drop)}else i()}function i(){var e=$.data(g,"dnd");$("tr.jqgrow:not(.ui-draggable)",g).draggable($.isFunction(e.drag)?e.drag.call($(g),e):e.drag)}})},gridResize:function(d){return this.each(function(){var i,r=this,o=r.grid,a=r.p,s=a.gView+">.ui-jqgrid-bdiv",n=!1,l=a.height;if(o&&$.fn.resizable){if((d=$.extend({},d||{})).alsoResize?(d._alsoResize_=d.alsoResize,delete d.alsoResize):d._alsoResize_=!1,d.stop&&$.isFunction(d.stop)?(d._stop_=d.stop,delete d.stop):d._stop_=!1,d.stop=function(e,t){$(r).jqGrid("setGridWidth",t.size.width,d.shrinkToFit),$(a.gView+">.ui-jqgrid-titlebar").css("width",""),n?($(i).each(function(){$(this).css("height","")}),"auto"!==l&&"100%"!==l||$(o.bDiv).css("height",l)):$(r).jqGrid("setGridParam",{height:$(s).height()}),r.fixScrollOffsetAndhBoxPadding&&r.fixScrollOffsetAndhBoxPadding(),d._stop_&&d._stop_.call(r,e,t)},i=s,"auto"!==l&&"100%"!==l||void 0!==d.handles||(d.handles="e,w"),d.handles){var e=$.map(String(d.handles).split(","),function(e){return $.trim(e)});2===e.length&&("e"===e[0]&&"w"===e[1]||"e"===e[1]&&"w"===e[1])&&(i=a.gView+">div:not(.frozen-div)",n=!0,a.pager&&(i+=","+a.pager))}d._alsoResize_?d.alsoResize=i+","+d._alsoResize_:d.alsoResize=i,delete d._alsoResize_,$(a.gBox).resizable(d)}})}}),Aggregation.prototype.calc=function(e,t,i,r,o){var a=this;if(void 0!==e)switch(a.result=a.result||0,e=parseFloat(e),a.aggregator){case"sum":a.result+=e;break;case"count":a.result++;break;case"avg":a.finilized?(a.count=a.count||0,a.result=(a.result*a.count+e)/(a.count+1)):(a.result+=e,a.count=a.count||0),a.count++;break;case"min":a.result=Math.min(a.result,e);break;case"max":a.result=Math.max(a.result,e);break;default:$.isFunction(a.aggregator)&&(a.result=a.aggregator.call(a.context,{previousResult:a.result,value:e,fieldName:t,item:i,iItem:r,items:o}))}},Aggregation.prototype.getResult=function(e,t,i){var r=this;(void 0!==r.result||i)&&(i&&void 0!==r.result&&(r.result=0,r.count=0),void 0===r.result||r.finilized||"avg"!==r.aggregator||(r.result=r.result/r.count,r.finilized=!0),e[t]=r.result)},ArrayOfFieldsets.prototype.compareVectorsEx=function(e,t){var i,r,o=this.fieldLength;for(i=0;i<o;i++)if(0!==(r=this.fieldCompare[i](e[i],t[i])))return{index:i,result:r};return{index:-1,result:0}},ArrayOfFieldsets.prototype.getIndexOfDifferences=function(e,t){return null===t||null===e?0:this.compareVectorsEx(e,t).index},ArrayOfFieldsets.prototype.compareVectors=function(e,t){var i=this.compareVectorsEx(e,t);return 0<(0<=i.index?this.fieldSortDirection[i.index]:1)?i.result:-i.result},ArrayOfFieldsets.prototype.getItem=function(e){return this.items[e]},ArrayOfFieldsets.prototype.getIndexLength=function(){return this.items.length},ArrayOfFieldsets.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},ArrayOfFieldsets.prototype.createDataIndex=function(e){var t,i,r,o,a,s,n,l,d,c=e.length,u=this.fieldLength,h=this.fieldNames,p=this.indexesOfSourceData,f=this.items;for(t=0;t<c;t++){for(n=e[t],i=new Array(u),o=0;o<u;o++)void 0!==(r=n[h[o]])&&("string"==typeof r&&this.trimByCollect&&(r=$.trim(r)),i[o]=r);if(l=0,(d=f.length-1)<0)f.push(i),p.push([t]);else if(0!==(a=this.compareVectors(i,f[d])))if(1===a||this.skipSort)f.push(i),p.push([t]);else if(1!==(a=this.compareVectors(f[0],i)))if(0!==a)for(;;){if(d-l<2){f.splice(d,0,i),p.splice(d,0,[t]);break}if(s=Math.floor((l+d)/2),0===(a=this.compareVectors(f[s],i))){p[s].push(t);break}1===a?d=s:l=s}else p[0].push(t);else f.unshift(i),p.unshift([t]);else p[d].push(t)}},jgrid.extend({pivotSetup:function(c,i){var e,t,r,o,n,a,s,l,d,u,h,p,f,g,m,v,b,y,w,x,C,_,j,I,S,D,F,k,R,O=this[0],q=$.isArray,N={},G={groupField:[],groupSummary:[],groupSummaryPos:[]},T={grouping:!0,groupingView:G},E=$.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:c},i||{}),P=c.length,A=E.xDimension,z=E.yDimension,M=E.aggregates,B=E.totalText||E.totals||E.rowTotals||E.totalHeader,H=q(A)?A.length:0,L=q(z)?z.length:0,V=q(M)?M.length:0,W=L-(1===V?1:0),U=[],X=[],Y=[],Q=[],K=["pivotInfos"],J=new Array(V),Z=new Array(L),ee=function(e,t,i){var r=new ArrayOfFieldsets(E.trimByCollect,E.caseSensitive,t,e);return $.isFunction(i)&&(r.compareVectorsEx=i),r.createDataIndex(c),r},te=function(e,t,i,r,o){var a,s,n;switch(e){case 1:a=z[r].totalText||"{0} {1} {2}",s="y"+o+"t"+r;break;case 2:a=E.totalText||"{0}",s="t";break;default:a=1<V?t.label||"{0}":$.isFunction(z[r].label)?z[r].label:k.getItem(o)[r],s="y"+o}return delete(n=$.extend({},t,{name:s+(1<V?"a"+i:""),label:$.isFunction(a)?a.call(O,2===e?{aggregate:t,iAggregate:i,pivotOptions:E}:1===e?{yIndex:k.getItem(o),aggregate:t,iAggregate:i,yLevel:r,pivotOptions:E}:{yData:k.getItem(o)[r],yIndex:k.getItem(o),yLevel:r,pivotOptions:E}):jgrid.template.apply(O,2===e?[String(a),t.aggregator,t.member,i]:[String(a),t.aggregator,t.member,k.getItem(o)[r],r])})).member,delete n.aggregator,n},ie=function(e,t,i){var r,o;for(r=0;r<V;r++)void 0===(o=M[r]).template&&void 0===o.formatter&&E.defaultFormatting&&(o.template="count"===o.aggregator?"integer":"number"),Y.push(te(e,o,r,t,i))},re=function(e,t,i){var r,o,a,s;for(r=W-1;t<=r;r--)if(X[r]){for(o=0;o<=r;o++)(S=U[o].groupHeaders)[S.length-1].numberOfColumns+=V;for(a=(n=z[r]).totalHeader,s=n.headerOnTop,o=r+1;o<=W-1;o++)U[o].groupHeaders.push({titleText:s&&o===r+1||!s&&o===W-1?$.isFunction(a)?a.call(O,i,r):jgrid.template.call(O,String(a||""),i[r],r):"",startColumnName:"y"+(e-1)+"t"+r+(1===V?"":"a0"),numberOfColumns:V})}},oe=function(e){var t=new Aggregation("count"===M[e].aggregator?"sum":M[e].aggregator,O,i);return t.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},t},ae=function(){var e,t;for(e=W-1;0<=e;e--)if(X[e])for(null==Z[e]&&(Z[e]=new Array(V)),t=0;t<V;t++)Z[e][t]=oe(t)},se=function(e,t,i,r){var o,a,s,n=k.getIndexOfDifferences(t,i);if(null!==i)for(n=Math.max(n,0),o=W-1;n<=o;o--)a="y"+e+"t"+o+(1<V?"a"+r:""),X[o]&&void 0===j[a]&&((s=Z[o][r]).getResult(j,a),j.pivotInfos[a]={colType:1,iA:r,a:M[r],level:o,iRows:s.groupInfo.iRows,rows:s.groupInfo.rows,ys:s.groupInfo.ys,iYs:s.groupInfo.iYs},t!==i&&(Z[o][r]=oe(r)))},ne=function(e,t,i,r,o,a,s){var n,l,d;if(e!==t)for(n=W-1;0<=n;n--)X[n]&&((l=Z[n][r]).calc(o[i.member],i.member,o,a,c),d=l.groupInfo,$.inArray(s,d.iYs)<0&&(d.iYs.push(s),d.ys.push(e)),$.inArray(a,d.iRows)<0&&(d.iRows.push(a),d.rows.push(o)))};if(0===H||0===V)throw"xDimension or aggregates options are not set!";for(F=ee(A,E.skipSortByX,E.compareVectorsByX),k=ee(z,E.skipSortByY,E.compareVectorsByY),i.xIndex=F,i.yIndex=k,t=0;t<H;t++)a={name:"x"+t,label:null!=(o=A[t]).label?$.isFunction(o.label)?o.label.call(O,o,t,E):o.label:o.dataName,frozen:E.frozenStaticCols},t<H-1&&!o.skipGrouping&&!o.additionalProperty&&(G.groupField.push(a.name),G.groupSummary.push(E.groupSummary),G.groupSummaryPos.push(E.groupSummaryPos)),delete(a=$.extend(a,o)).dataName,delete a.footerText,o.additionalProperty?K.push(a.name):(Y.push(a),T.sortname=a.name);for(H<2&&(T.grouping=!1),G.hideFirstGroupCol=!0,t=0;t<L;t++)n=z[t],X.push(!!(n.totals||n.rowTotals||n.totalText||n.totalHeader));for(I=k.getItem(0),ie(0,L-1,0),R=k.getIndexLength(),y=1;y<R;y++){for(w=k.getItem(y),t=k.getIndexOfDifferences(w,I),r=W-1;t<=r;r--)X[r]&&ie(1,r,y-1);I=w,ie(0,L-1,y)}for(t=W-1;0<=t;t--)X[t]&&ie(1,t,R-1);for(B&&ie(2),I=k.getItem(0),r=0;r<W;r++)U.push({useColSpanStyle:E.useColSpanStyle,groupHeaders:[{titleText:$.isFunction(z[r].label)?z[r].label.call(O,{yData:I[r],yIndex:I,yLevel:r,pivotOptions:E}):I[r],startColumnName:1===V?"y0":"y0a0",numberOfColumns:V}]});for(y=1;y<R;y++){for(w=k.getItem(y),re(y,t=k.getIndexOfDifferences(w,I),I),r=W-1;t<=r;r--)U[r].groupHeaders.push({titleText:$.isFunction(z[r].label)?z[r].label.call(O,{yData:w[r],yIndex:w,yLevel:r,pivotOptions:E}):w[r],startColumnName:"y"+y+(1===V?"":"a0"),numberOfColumns:V});for(r=0;r<t;r++)(S=U[r].groupHeaders)[S.length-1].numberOfColumns+=V;I=w}if(re(R,0,I),B)for(t=0;t<W;t++)U[t].groupHeaders.push({titleText:t<W-1?"":E.totalHeader||"",startColumnName:"t"+(1===V?"":"a0"),numberOfColumns:V});for(v=F.getIndexLength(),d=0;d<v;d++){for(u=F.getItem(d),j={pivotInfos:h={iX:d,x:u}},t=0;t<H;t++)j["x"+t]=u[t];if(b=F.getIndexesOfSourceData(d),B)for(r=0;r<V;r++)J[r]=oe(r);for(I=null,ae(),y=0;y<R;y++){for(w=k.getItem(y),x=k.getIndexesOfSourceData(y),r=0;r<V;r++){for(null!==I&&se(y-1,w,I,r),C=[],t=0;t<x.length;t++)D=x[t],0<=$.inArray(D,b)&&C.push(D);if(0<C.length){for(p=new Array(C.length),f=new Aggregation((_=M[r]).aggregator,O,i),s=0;s<C.length;s++)t=C[s],e=c[t],p[s]=e,f.calc(e[_.member],_.member,e,t,c),B&&((g=J[r]).calc(e[_.member],_.member,e,t,c),m=g.groupInfo,$.inArray(t,m.iYs)<0&&(m.iYs.push(y),m.ys.push(w)),$.inArray(t,m.iRows)<0&&(m.iRows.push(t),m.rows.push(e))),ne(w,I,_,r,e,t,y);l="y"+y+(1===V?"":"a"+r),f.getResult(j,l),h[l]={colType:0,iY:y,y:w,iA:r,a:_,iRows:C,rows:p}}}I=w}if(null!==I)for(r=0;r<V;r++)se(R-1,I,I,r);if(B)for(r=0;r<V;r++)l="t"+(1===V?"":"a"+r),(g=J[r]).getResult(j,l),m=g.groupInfo,h[l]={colType:2,iA:r,a:M[r],iRows:m.iRows,rows:m.rows,iYs:m.iYs,ys:m.ys};Q.push(j)}if(E.footerTotals||E.colTotals){for(P=Q.length,t=0;t<H;t++)N["x"+t]=A[t].footerText||"";for(t=H;t<Y.length;t++){for(l=Y[t].name,f=new Aggregation(E.footerAggregator||"sum",O,i),s=0;s<P;s++)j=Q[s],f.calc(j[l],l,j,s,Q);f.getResult(N,l)}}return i.colHeaders=U,{colModel:Y,additionalProperties:K,options:i,rows:Q,groupOptions:T,groupHeaders:U,summary:N}},jqPivot:function(d,c,u,i){return this.each(function(){var s=this,n=$(s),l=$.fn.jqGrid;function t(){var e,t=l.pivotSetup.call(n,d,c),i=t.groupHeaders,r=0<function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(t.summary),o=t.groupOptions.groupingView,a=jgrid.from.call(s,t.rows);if(!c.skipSortByX)for(e=0;e<o.groupField.length;e++)a.orderBy(o.groupField[e],null!=u&&u.groupingView&&null!=u.groupingView.groupOrder&&"desc"===u.groupingView.groupOrder[e]?"d":"a","text","");if(c.data=d,l.call(n,$.extend(!0,{datastr:$.extend(a.select(),r?{userdata:t.summary}:{}),datatype:"jsonstring",footerrow:r,userDataOnFooter:r,colModel:t.colModel,additionalProperties:t.additionalProperties,pivotOptions:t.options,viewrecords:!0,sortname:c.xDimension[0].dataName},t.groupOptions,u||{})),i.length)for(e=0;e<i.length;e++)i[e]&&i[e].groupHeaders.length&&l.setGroupHeaders.call(n,i[e]);c.frozenStaticCols&&l.setFrozenColumns.call(n)}"string"==typeof d?$.ajax($.extend({url:d,dataType:"json",success:function(e){d=jgrid.getAccessor(e,i&&i.reader?i.reader:"rows"),t()}},i||{})):t()})}});var subGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="subGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},collapseOrExpand=function(t,i){return this.each(function(){if(this.grid&&null!=t&&!0===this.p.subGrid){var e=$(this).jqGrid("getInd",t,!0);$(e).find(">td."+i).trigger("click")}})};jgrid.extend({setSubGrid:function(){return this.each(function(){var e,t=this.p,i=$(this),r=t.subGridModel[0],o=function(e){return i.jqGrid("getIconRes",e)};if(t.subGridOptions=$.extend({commonIconClass:o("subgrid.common"),plusicon:o("subgrid.plus"),minusicon:o("subgrid.minus"),openicon:"rtl"===t.direction?o("subgrid.openRtl"):o("subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},t.subGridOptions||{}),t.colNames.unshift(""),t.colModel.unshift({name:"subgrid",width:jgrid.cell_width?t.subGridWidth+t.cellLayout:t.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),r)for(r.align=$.extend([],r.align||[]),e=0;e<r.name.length;e++)r.align[e]=r.align[e]||"left"})},addSubGridCell:function(e,t,i,r){var o=this[0],a=o.p.subGridOptions,s=!$.isFunction(a.hasSubgrid)||a.hasSubgrid.call(o,{rowid:i,iRow:t,iCol:e,data:r});return null==o.p?"":"<td role='gridcell' class='"+base.getGuiStyles.call(this,"subgrid.tdStart",s?"ui-sgcollapsed sgcollapsed":"")+"' "+o.formatCol(e,t)+">"+(s?"<div class='"+base.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+jgrid.mergeCssClasses(a.commonIconClass,a.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(w,s){return this.each(function(){var e,t,i,l=this,d=l.p,c=d.subGridModel[0],u=function(e,t){return base.getGuiStyles.call(l,"subgrid."+e,t||"")},h=u("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+d.direction),p=u("rowSubTable","ui-subtblcell"),n=u("row","ui-subgrid ui-row-"+d.direction),f=u("tdWithIcon","subgrid-cell"),g=u("tdData","subgrid-data"),m=function(e,t,i){var r=c.align[i],o=$("<td"+(r?" style='text-align:"+r+";'":"")+"></td>").html(t);e.append(o)},v=function(e,r){var o=d.xmlReader.subgrid;$(o.root+" "+o.row,e).each(function(){var e,t,i=$("<tr class='"+p+"'></tr>");if(!0===o.repeatitems)$(o.cell,this).each(function(e){m(i,$(this).text()||"&#160;",e)});else if(e=c.mapping||c.name)for(t=0;t<e.length;t++)m(i,$(e[t],this).text()||"&#160;",t);r.append(i)})},b=function(e,t){var i,r,o,a,s,n=d.jsonReader.subgrid,l=jgrid.getAccessor(e,n.root);if(null!=l)for(r=0;r<l.length;r++){if(s=l[r],i=$("<tr class='"+p+"'></tr>"),!0===n.repeatitems)for(n.cell&&(s=s[n.cell]),o=0;o<s.length;o++)m(i,s[o]||"&#160;",o);else if((a=c.mapping||c.name).length)for(o=0;o<a.length;o++)m(i,s[a[o]]||"&#160;",o);t.append(i)}},y=function(e,t,i){var r,o,a=u("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===d.altRows&&$(l).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),s=$("<table"+(a?" style='width:1px' role='presentation' class='"+a+"'":"")+"><thead></thead><tbody></tbody></table>"),n=$("<tr></tr>");for(l.grid.endReq.call(l),o=0;o<c.name.length;o++)r=$("<th class='"+h+"'></th>").html(c.name[o]).width(c.width[o]),n.append(r);return n.appendTo(s[0].tHead),i(e,$(s[0].tBodies[0])),$("#"+jqID(d.id+"_"+t)).append(s),!1},r=function(){var e,t=$(this).parent("tr")[0],i=t.nextSibling,r=t.id,o=d.id+"_"+r,a=function(e){return jgrid.mergeCssClasses(d.subGridOptions.commonIconClass,d.subGridOptions[e])},s=1;if($.each(d.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||s++}),$(this).hasClass("sgcollapsed")){if(!0===d.subGridOptions.reloadOnExpand||!1===d.subGridOptions.reloadOnExpand&&!$(i).hasClass("ui-subgrid")){if(e=1<=w?"<td colspan='"+w+"'>&#160;</td>":"",!subGridFeedback.call(l,"beforeExpand",o,r))return;$(t).after("<tr role='row' class='"+n+"'>"+e+"<td class='"+f+"'><span class='"+a("openicon")+"'></span></td><td colspan='"+parseInt(d.colNames.length-s,10)+"' class='"+g+"'><div id='"+o+"' class='tablediv'></div></td></tr>"),$(l).triggerHandler("jqGridSubGridRowExpanded",[o,r]),$.isFunction(d.subGridRowExpanded)?d.subGridRowExpanded.call(l,o,r):function(e){var t,i,r=$(e).attr("id"),o={nd_:(new Date).getTime()};if(o[d.prmNames.subgridid]=r,!c)return;if(c.params)for(i=0;i<c.params.length;i++)void 0!==(t=d.iColByName[c.params[i]])&&(o[d.colModel[t].name]=$(e.cells[t]).text().replace(/\&#160\;/gi,""));if(!l.grid.hDiv.loading)switch(l.grid.beginReq.call(l),d.subgridtype||(d.subgridtype=d.datatype),$.isFunction(d.subgridtype)?d.subgridtype.call(l,o):d.subgridtype=d.subgridtype.toLowerCase(),d.subgridtype){case"xml":case"json":$.ajax($.extend({type:d.mtype,url:$.isFunction(d.subGridUrl)?d.subGridUrl.call(l,o):d.subGridUrl,dataType:d.subgridtype,context:r,data:jgrid.serializeFeedback.call(l,d.serializeSubGridData,"jqGridSerializeSubGridData",o),success:function(e){y(e,this,"xml"===d.subgridtype?v:b)},error:function(e,t,i){var r=void 0===d.loadSubgridError?d.loadError:d.loadSubgridError;l.grid.endReq.call(l),$.isFunction(r)&&r.call(l,e,t,i),d.subGridOptions.noEmptySubgridOnError||y(null,this,"xml"===d.subgridtype?v:b)}},jgrid.ajaxOptions,d.ajaxSubgridOptions||{}))}}(t)}else $(i).show();$(this).html("<div class='"+base.getGuiStyles.call(l,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(l,"subgrid.button","sgbutton")+"'><span class='"+a("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),d.subGridOptions.selectOnExpand&&$(l).jqGrid("setSelection",r)}else if($(this).hasClass("sgexpanded")){if(!subGridFeedback.call(l,"beforeCollapse",o,r))return;!0===d.subGridOptions.reloadOnExpand?$(i).remove(".ui-subgrid"):$(i).hasClass("ui-subgrid")&&$(i).hide(),$(this).html("<div class='"+base.getGuiStyles.call(l,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(l,"subgrid.button","sgbutton")+"'><span class='"+a("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),d.subGridOptions.selectOnCollapse&&$(l).jqGrid("setSelection",r)}return!1},o=1;if(l.grid){for(e=l.rows.length,void 0!==s&&0<s&&(e=(o=s)+1);o<e;)t=l.rows[o],$(t).hasClass("jqgrow")&&(i=$(t.cells[w])).hasClass("ui-sgcollapsed")&&(d.scroll&&i.off("click"),i.on("click",r)),o++;if(!0===d.subGridOptions.expandOnLoad){var a=d.iColByName.subgrid;$(l.rows).filter(".jqgrow").each(function(e,t){$(t.cells[a]).filter(".sgcollapsed").children(".sgbutton-div").children(".sgbutton").click()})}l.subGridXml=function(e,t){return y(e,t,v)},l.subGridJson=function(e,t){return y(e,t,b)}}})},expandSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return collapseOrExpand.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(e,f){$(e).each(function(){var e,t,i,r,o,a,s,n,l=$(this),d=[],c=[],u=[],h=[],p=[];if(!this.grid){for(l.width("99%"),e=l.width(),t=$("tr td:first-child input[type=checkbox]:first",l),i=$("tr td:first-child input[type=radio]:first",l),o=!(r=0<t.length)&&0<i.length,a=r||o,$("th",l).each(function(){0===d.length&&a?(d.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),c.push("__selection__")):(d.push({name:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),index:$(this).attr("id")||$.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),width:$(this).width()||150}),c.push($(this).html()))}),$("tbody > tr",l).each(function(){var i={},r=0;$("td",$(this)).each(function(){if(0===r&&a){var e=$("input",$(this)),t=e.attr("value");h.push(t||u.length),e.is(":checked")&&p.push(t),i[d[r].name]=e.attr("value")}else i[d[r].name]=$(this).html();r++}),0<r&&u.push(i)}),l.empty(),l.jqGrid($.extend({datatype:"local",width:e,colNames:c,colModel:d,multiselect:r},f||{})),s=0;s<u.length;s++)n=null,0<h.length&&(n=h[s])&&n.replace&&(n=encodeURIComponent(n).replace(/[.\-%]/g,"_")),null===n&&(n=$.jgrid.randId()),l.jqGrid("addRowData",n,u[s]);for(s=0;s<p.length;s++)l.jqGrid("setSelection",p[s])}})};var treeGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="treeGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},getNodeIcons=function(e,t){var i=t[e.treeReader.icon_field],r=e.treeIcons,o=r.plus+" tree-plus",a=r.minus+" tree-minus";return i&&"string"==typeof i&&2===(i=i.split(",")).length&&(a=i[0],o=i[1]),{expanded:a,collapsed:o,common:r.commonIconClass}};jgrid.extend({setTreeNode:function(){return this.each(function(){var n=$(this),l=this.p;if(this.grid&&l.treeGrid){var d=l.treeReader.expanded_field,c=l.treeReader.leaf_field;n.off("jqGridBeforeSelectRow.setTreeNode"),n.on("jqGridBeforeSelectRow.setTreeNode",function(e,i,t){if(null!=t){var r=$(t.target),o=r.closest("tr.jqgrow>td"),a=o.parent(),s=function(){var e=l.data[l._index[stripPref(l.idPrefix,i)]],t=e[d]?"collapse":"expand";e[c]||(base[t+"Row"].call(n,e,a),base[t+"Node"].call(n,e,a))};return r.is("div.treeclick")?s():l.ExpandColClick&&0<o.length&&0<r.closest("span.cell-wrapper",o).length&&s(),!0}})}})},setTreeGrid:function(){return this.each(function(){var e,t,i,r=this.p,o=[],a=["leaf_field","expanded_field","loaded"];if(r.treeGrid){for(t in r.treedatatype||$.extend(this.p,{treedatatype:r.datatype}),r.subGrid=!1,r.altRows=!1,r.pgbuttons=!1,r.pginput=!1,r.gridview=!0,null===r.rowTotal&&(r.rowNum=r.maxRowNum),r.rowList=[],r.treeIcons.plus="rtl"===r.direction?r.treeIcons.plusRtl:r.treeIcons.plusLtr,"nested"===r.treeGridModel?r.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},r.treeReader):"adjacency"===r.treeGridModel&&(r.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},r.treeReader)),r.colModel)if(r.colModel.hasOwnProperty(t))for(i in e=r.colModel[t].name,r.treeReader)r.treeReader.hasOwnProperty(i)&&r.treeReader[i]===e&&o.push(e);$.each(r.treeReader,function(e){var t=String(this);t&&-1===$.inArray(t,o)&&(0<=$.inArray(e,a)?r.additionalProperties.push({name:t,search:!1,convert:function(e){return!0===e||"true"===String(e).toLowerCase()||"1"===String(e)||e}}):r.additionalProperties.push(t))})}})},expandRow:function(a){this.each(function(){var t=$(this),i=this.p;if(this.grid&&i.treeGrid){var r=i.treeReader.expanded_field,e=a[i.localReader.id];if(treeGridFeedback.call(this,"beforeExpandRow",{rowid:e,item:a})){var o=base.getNodeChildren.call(t,a);$(o).each(function(){var e=i.idPrefix+getAccessor(this,i.localReader.id);$(base.getGridRowById.call(t,e)).css("display",""),this[r]&&base.expandRow.call(t,this)}),treeGridFeedback.call(this,"afterExpandRow",{rowid:e,item:a})}}})},collapseRow:function(a){this.each(function(){var t=$(this),i=this.p;if(this.grid&&i.treeGrid){var r=i.treeReader.expanded_field,e=a[i.localReader.id];if(treeGridFeedback.call(this,"beforeCollapseRow",{rowid:e,item:a})){var o=base.getNodeChildren.call(t,a);$(o).each(function(){var e=i.idPrefix+getAccessor(this,i.localReader.id);$(base.getGridRowById.call(t,e)).css("display","none"),this[r]&&base.collapseRow.call(t,this)}),treeGridFeedback.call(this,"afterCollapseRow",{rowid:e,item:a})}}})},getRootNodes:function(){var r=[];return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.level_field;$(e.data).each(function(){parseInt(this[t],10)===parseInt(e.tree_root_level,10)&&r.push(this)});break;case"adjacency":var i=e.treeReader.parent_id_field;$(e.data).each(function(){null!==this[i]&&"null"!==String(this[i]).toLowerCase()||r.push(this)})}}),r},getNodeDepth:function(i){var r=null;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.level_field;r=parseInt(i[t],10)-parseInt(e.tree_root_level,10);break;case"adjacency":r=base.getNodeAncestors.call($(this),i).length}}),r},getNodeParent:function(e){var t=this[0];if(!t||!t.grid||null==t.p||!t.p.treeGrid||null==e)return null;var i=t.p,r=i.treeReader,o=e[r.parent_id_field];if("nested"===i.treeGridModel){var a=null,s=r.left_field,n=r.right_field,l=r.level_field,d=parseInt(e[s],10),c=parseInt(e[n],10),u=parseInt(e[l],10);return $(i.data).each(function(){if(parseInt(this[l],10)===u-1&&parseInt(this[s],10)<d&&parseInt(this[n],10)>c)return a=this,!1}),a}if(null===o||"null"===o)return null;var h=i._index[o];return void 0!==h?i.data[h]:null},getNodeChildren:function(d){var c=[];return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.left_field,i=e.treeReader.right_field,r=e.treeReader.level_field,o=parseInt(d[t],10),a=parseInt(d[i],10),s=parseInt(d[r],10);$(e.data).each(function(){parseInt(this[r],10)===s+1&&parseInt(this[t],10)>o&&parseInt(this[i],10)<a&&c.push(this)});break;case"adjacency":var n=e.treeReader.parent_id_field,l=e.localReader.id;$(e.data).each(function(){String(this[n])===String(d[l])&&c.push(this)})}}),c},getFullTreeNode:function(c){var u=[];return this.each(function(){var t,e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var i=e.treeReader.left_field,r=e.treeReader.right_field,o=e.treeReader.level_field,a=parseInt(c[i],10),s=parseInt(c[r],10),n=parseInt(c[o],10);$(e.data).each(function(){parseInt(this[o],10)>=n&&parseInt(this[i],10)>=a&&parseInt(this[i],10)<=s&&u.push(this)});break;case"adjacency":if(c){u.push(c);var l=e.treeReader.parent_id_field,d=e.localReader.id;$(e.data).each(function(){var e;for(t=u.length,e=0;e<t;e++)if(String(u[e][d])===String(this[l])){u.push(this);break}})}}}),u},getNodeAncestors:function(r){var o=[];return this.each(function(){var e=$(this),t=base.getNodeParent;if(this.grid&&this.p.treeGrid)for(var i=t.call(e,r);i;)o.push(i),i=t.call(e,i)}),o},isVisibleNode:function(r){var o=!0;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid){var t=base.getNodeAncestors.call($(this),r),i=e.treeReader.expanded_field;$(t).each(function(){if(!(o=o&&this[i]))return!1})}}),o},isNodeLoaded:function(r){var o;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid){var t=e.treeReader.leaf_field,i=e.treeReader.loaded;o=void 0!==r&&(void 0!==r[i]?r[i]:!!(r[t]||0<base.getNodeChildren.call($(this),r).length))}}),o},expandNode:function(s){return this.each(function(){var e,t,i,r=this,o=r.p;if(r.grid&&o.treeGrid){var a=o.treeReader;if(!s[a.expanded_field]){if(e=getAccessor(s,o.localReader.id),!treeGridFeedback.call(r,"beforeExpandNode",{rowid:e,item:s}))return;t=$("#"+o.idPrefix+jqID(e),r.grid.bDiv)[0],s[a.expanded_field]=!0,i=getNodeIcons(o,s),$("div.treeclick",t).removeClass(i.collapsed).addClass(i.common).addClass(i.expanded),"local"===o.treedatatype||base.isNodeLoaded.call($(r),o.data[o._index[e]])||r.grid.hDiv.loading||(o.treeANode=t.rowIndex,o.datatype=o.treedatatype,base.setGridParam.call($(r),{postData:"nested"===o.treeGridModel?{nodeid:e,n_level:s[a.level_field],n_left:s[a.left_field],n_right:s[a.right_field]}:{nodeid:e,n_level:s[a.level_field],parentid:s[a.parent_id_field]}}),$(r).trigger("reloadGrid"),s[a.loaded]=!0,base.setGridParam.call($(r),{postData:"nested"===o.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),treeGridFeedback.call(r,"afterExpandNode",{rowid:e,item:s})}}})},collapseNode:function(o){return this.each(function(){var e,t=this.p;if(this.grid&&t.treeGrid){var i=t.treeReader.expanded_field;if(o[i]){var r=getAccessor(o,t.localReader.id);if(!treeGridFeedback.call(this,"beforeCollapseNode",{rowid:r,item:o}))return;o[i]=!1,e=getNodeIcons(t,o),$("#"+t.idPrefix+jqID(r),this.grid.bDiv).find("div.treeclick").removeClass(e.expanded).addClass(e.common).addClass(e.collapsed),(!0===t.unloadNodeOnCollapse||$.isFunction(t.unloadNodeOnCollapse)&&t.unloadNodeOnCollapse.call(this,o))&&(o[t.treeReader.loaded]=!1,$(this).jqGrid("delTreeNode",r,!0)),treeGridFeedback.call(this,"afterCollapseNode",{rowid:r,item:o})}}})},SortTree:function(c,u,h,p){return this.each(function(){var i=this,r=i.p,o=$(i);if(i.grid&&r.treeGrid){var e,t,a,s=[],n=base.getRootNodes.call(o),l=jgrid.from.call(i,n);l.orderBy(c,u,h,p);var d=l.select();for(e=0,t=d.length;e<t;e++)a=d[e],s.push(a),base.collectChildrenSortTree.call(o,s,a,c,u,h,p);$.each(s,function(e){var t=getAccessor(this,r.localReader.id);$(i.rows[e]).after(o.find(">tbody>tr#"+jqID(t)))})}})},collectChildrenSortTree:function(n,l,d,c,u,h){return this.each(function(){var e=$(this);if(this.grid&&this.p.treeGrid){var t,i,r,o=base.getNodeChildren.call(e,l),a=jgrid.from.call(this,o);a.orderBy(d,c,u,h);var s=a.select();for(t=0,i=s.length;t<i;t++)r=s[t],n.push(r),base.collectChildrenSortTree.call(e,n,r,d,c,u,h)}})},setTreeRow:function(e,t){var i=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(i=base.setRowData.call($(this),e,t))}),i},delTreeNode:function(h,p){return this.each(function(){var e,t,i,r,o,a=this.p,s=a.localReader.id,n=$(this),l=a.treeReader.left_field,d=a.treeReader.right_field;if(this.grid&&a.treeGrid){var c=a._index[h];if(void 0!==c){t=(e=parseInt(a.data[c][d],10))-parseInt(a.data[c][l],10)+1;var u=base.getFullTreeNode.call(n,a.data[c]);if(0<u.length)for(o=0;o<u.length;o++)p&&h===u[o][s]||base.delRowData.call(n,u[o][s]);if("nested"===a.treeGridModel){if((i=jgrid.from.call(this,a.data).greater(l,e,{stype:"integer"}).select()).length)for(r in i)i.hasOwnProperty(r)&&(i[r][l]=parseInt(i[r][l],10)-t);if((i=jgrid.from.call(this,a.data).greater(d,e,{stype:"integer"}).select()).length)for(r in i)i.hasOwnProperty(r)&&(i[r][d]=parseInt(i[r][d],10)-t)}}}})},addChildNode:function(S,D,F,k){return this.each(function(){if(F){var e,t,i,r,o,a,s,n=this.p,l=$(this),d=base.getInd,c=n.treeIcons.minus+" tree-minus",u=D,h=n.treeReader.expanded_field,p=n.treeReader.leaf_field,f=n.treeReader.level_field,g=n.treeReader.parent_id_field,m=n.treeReader.left_field,v=n.treeReader.right_field,b=n.treeReader.loaded;void 0===k&&(k=!1),null==S&&(S=jgrid.randId());var y,w,x=d.call(l,D);if(a=!1,null==D||""===D)u=D=null,e="last",r=n.tree_root_level;else{e="after",t=n._index[D],i=n.data[t],D=i[n.localReader.id],o=d.call(l,D),r=parseInt(i[f],10)+1;var C,_,j,I=base.getFullTreeNode.call(l,i);if(I.length)for(C=0;C<I.length;C++)j=I[C][n.localReader.id],o<(_=d.call(l,j))&&(o=_,u=j);i[p]&&(a=!0,i[h]=!0,$(this.rows[x]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(n.treeIcons.leaf+" tree-leaf").addClass(n.treeIcons.commonIconClass).addClass(c),n.data[t][p]=!1,i[b]=!0)}if(void 0===F[h]&&(F[h]=!1),void 0===F[b]&&(F[b]=!1),F[f]=r,void 0===F[p]&&(F[p]=!0),"adjacency"===n.treeGridModel&&(F[g]=D),"nested"===n.treeGridModel)if(null!==D){if(s=parseInt(i[v],10),(y=jgrid.from.call(this,n.data).greaterOrEquals(v,s,{stype:"integer"}).select()).length)for(w in y)y.hasOwnProperty(w)&&(y[w][m]=y[w][m]>s?parseInt(y[w][m],10)+2:y[w][m],y[w][v]=y[w][v]>=s?parseInt(y[w][v],10)+2:y[w][v]);F[m]=s,F[v]=s+1}else{if(s=parseInt(base.getCol.call(l,v,!1,"max"),10),(y=jgrid.from.call(this,n.data).greater(m,s,{stype:"integer"}).select()).length)for(w in y)y.hasOwnProperty(w)&&(y[w][m]=parseInt(y[w][m],10)+2);if((y=jgrid.from.call(this,n.data).greater(v,s,{stype:"integer"}).select()).length)for(w in y)y.hasOwnProperty(w)&&(y[w][v]=parseInt(y[w][v],10)+2);F[m]=s+1,F[v]=s+2}(null===D||base.isNodeLoaded.call(l,i)||a)&&base.addRowData.call(l,S,F,e,u),i&&!i[h]&&k&&$(this.rows[x]).find("div.treeclick").click()}})}});var namespace=".jqGrid",mouseDown="mousedown",mouseMove="mousemove",mouseUp="mouseup",getMouseCoordinates=function(e){var t=e.originalEvent.targetTouches;return t?{x:(t=t[0]).pageX,y:t.pageY}:{x:e.pageX,y:e.pageY}},jqDnR={drag:function(e){var t=e.data,i=t.e,r=t.dnr,o=t.ar,a=t.dnrAr,s=getMouseCoordinates(e);return"move"===r.k?i.css({left:r.X+s.x-r.pX,top:r.Y+s.y-r.pY}):(i.css({width:Math.max(s.x-r.pX+r.W,0),height:Math.max(s.y-r.pY+r.H,0)}),a&&o.css({width:Math.max(s.x-a.pX+a.W,0),height:Math.max(s.y-a.pY+a.H,0)})),!1},stop:function(){$(document).off(mouseMove,jqDnR.drag).off(mouseUp,jqDnR.stop)}},init=function(e,t,i,p){return e.each(function(){(t=t?$(t,e):e).on(mouseDown,{e:e,k:i},function(e){var t,i,r,o,a,s,n=e.data,l={},d=function(e,t){return parseInt(e.css(t),10)||!1},c=function(e){return d(i,e)},u=function(e){return d(o,e)},h=getMouseCoordinates(e);if(!$(e.target).hasClass("ui-jqdialog-titlebar-close")&&!$(e.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(i=n.e,o=!!p&&$(p),"relative"!==i.css("position"))try{i.position(l)}catch(e){}if(r={X:l.left||c("left")||0,Y:l.top||c("top")||0,W:c("width")||i[0].scrollWidth||0,H:c("height")||i[0].scrollHeight||0,pX:h.x,pY:h.y,k:n.k},a=!(!o||"move"===n.k)&&{X:l.left||u("left")||0,Y:l.top||u("top")||0,W:o[0].offsetWidth||u("width")||0,H:o[0].offsetHeight||u("height")||0,pX:h.x,pY:h.y,k:n.k},0<(t=i.find("input.hasDatepicker")).length)try{t.datepicker("hide")}catch(e){}return s={e:i,dnr:r,ar:o,dnrAr:a},$(document).on(mouseMove,s,jqDnR.drag),$(document).on(mouseUp,s,jqDnR.stop),!1}})})};window.PointerEvent?(mouseDown+=namespace+" pointerdown"+namespace,mouseMove+=namespace+" pointermove"+namespace,mouseUp+=namespace+" pointerup"+namespace):window.MSPointerEvent?(mouseDown+=namespace+" mspointerdown"+namespace,mouseMove+=namespace+" mspointermove"+namespace,mouseUp+=namespace+" mspointerup"):(mouseDown+=namespace+" touchstart"+namespace,mouseMove+=namespace+" touchmove"+namespace,mouseUp+=namespace+" touchend"+namespace),$.jqDnR=jqDnR,$.fn.jqDrag=function(e){return init(this,e,"move")},$.fn.jqResize=function(e,t){return init(this,e,"resize",t)};var jqmHashLength=0,jqmHash,createdModals=[],setFocusOnFirstVisibleInput=function(e){try{$(":input:visible",e.w).first().focus()}catch(e){}},setFocus=function(e){setFocusOnFirstVisibleInput(e)},keyOrMouseEventHandler=function(e){var t=jqmHash[createdModals[createdModals.length-1]],i=!$(e.target).parents(".jqmID"+t.s)[0],r=$(e.target).offset(),o=void 0!==e.pageX?e.pageX:r.left,a=void 0!==e.pageY?e.pageY:r.top,s=function(){var i=!1;return $(".jqmID"+t.s).each(function(){var e=$(this),t=e.offset();if(t.top<=a&&a<=t.top+e.height()&&t.left<=o&&o<=t.left+e.width())return!(i=!0)}),i};return!("mousedown"===e.type||!s())||("mousedown"===e.type&&i&&(s()&&(i=!1),i&&!$(e.target).is(":input")&&setFocusOnFirstVisibleInput(t)),!i)},bindOrUnbindEvents=function(e){$(document)[e]("keypress keydown mousedown",keyOrMouseEventHandler)},registerHideOrShow=function(e,t,i){return e.each(function(){var e=this._jqm;$(t).each(function(){this[i]||(this[i]=[],$(this).click(function(){var e,t,i,r=["jqmShow","jqmHide"];for(e=0;e<r.length;e++)for(i in this[t=r[e]])this[t].hasOwnProperty(i)&&jqmHash[this[t][i]]&&jqmHash[this[t][i]].w[t](this);return!1})),this[i].push(e)})})};$.fn.jqm=function(e){var t={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return jqmHash[this._jqm].c=$.extend({},jqmHash[this._jqm].c,e),jqmHash[this._jqm].c;jqmHashLength++,this._jqm=jqmHashLength,jqmHash[jqmHashLength]={c:$.extend(t,$.jqm.params,e),a:!1,w:$(this).addClass("jqmID"+jqmHashLength),s:jqmHashLength},t.trigger&&$(this).jqmAddTrigger(t.trigger)})},$.fn.jqmAddClose=function(e){return registerHideOrShow(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return registerHideOrShow(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function(e,t){var i,r,o,a,s,n=jqmHash[e],l=n.c,d=n.w.parent().offset(),c="."+l.closeClass,u=parseInt(n.w.css("z-index"),10);return u=0<u?u:3e3,i=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":u-1,opacity:l.overlay/100}),n.a||(n.t=t,n.a=!0,n.w.css("z-index",u),$(n.w[0].ownerDocument).data("ui-dialog-overlays")&&n.w.addClass("ui-dialog"),l.modal?(createdModals[0]||setTimeout(function(){bindOrUnbindEvents("bind")},1),createdModals.push(e)):0<l.overlay?l.closeoverlay&&n.w.jqmAddClose(i):i=!1,n.o=!!i&&i.addClass(l.overlayClass).prependTo("body"),l.ajax?(r=l.target||n.w,o=l.ajax,r="string"==typeof r?$(r,n.w):$(r),o="@"===o.substr(0,1)?$(t).attr(o.substring(1)):o,r.html(l.ajaxText).load(o,function(){l.onLoad&&l.onLoad.call(this,n),c&&n.w.jqmAddClose($(c,n.w)),setFocus(n)})):c&&n.w.jqmAddClose($(c,n.w)),l.toTop&&n.o&&(d=n.w.parent().offset(),a=parseFloat(n.w.css("left")||0),s=parseFloat(n.w.css("top")||0),n.w.before('<span id="jqmP'+n.w[0]._jqm+'"></span>').insertAfter(n.o),n.w.css({top:d.top+s,left:d.left+a})),l.onShow?l.onShow(n):n.w.show(),setFocus(n)),!1},close:function(e){var t=jqmHash[e];return t.a&&(t.a=!1,createdModals[0]&&(createdModals.pop(),createdModals[0]||bindOrUnbindEvents("unbind")),t.c.toTop&&t.o&&$("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove())),!1},params:{}},jqmHash=$.jqm.hash,$.fmatter=$.fmatter||{};var fmatter=$.fmatter,getOptionByName=function(e,t){var i=e.formatoptions||{};return i.hasOwnProperty(t)?i[t]:(e.editoptions||{})[t]},encodeAttr=function(e){return String(e).replace(/\'/g,"&#39;")},parseCheckboxOptions=function(e){var t,i,r=e.colModel||e.cm,o=!1!==r.title?" title='"+encodeAttr(e.colName||r.name)+"'":"",a=function(e){return getOptionByName(r,e)},s=a("checkedClass"),n=a("uncheckedClass"),l=a("value"),d="string"==typeof l&&l.split(":")[0]||"Yes",c="string"==typeof l&&l.split(":")[1]||"No",u=function(e){return"<i class='"+encodeAttr(e)+"'"+o+"></i>"},h=a("disabled");return void 0===h&&(h=jgrid.formatter.checkbox.disabled),!0===h&&base.isInCommonIconClass.call(this,"fa")?(t=u(s=s||"fa fa-check-square-o fa-lg"),i=u(n||"fa fa-square-o fa-lg")):!0===h&&base.isInCommonIconClass.call(this,"glyphicon")?(t=u(s=s||"glyphicon glyphicon-check"),i=u(n||"glyphicon glyphicon-unchecked")):(t="<input type='checkbox' checked='checked'"+(o+=!(s="")===h?" disabled='disabled'":"")+" />",i="<input type='checkbox'"+o+" />"),{checkedClasses:s,checked:t,unchecked:i,yes:d,no:c}},yesObject={1:1,x:1,true:1,yes:1,y:1,on:1},noObject={0:1,false:1,no:1,n:1,off:1};$.extend(!0,jgrid,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseInt(t,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseFloat(t)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue,i=parseCheckboxOptions.call(this,e),r=String(t).toLowerCase();return yesObject[r]||r===i.yes.toLowerCase()?t=!0:(noObject[r]||r===i.no.toLowerCase())&&(t=!1),t},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){return{formatter:"actions",width:(null!=this.p&&(base.isInCommonIconClass.call(this,"fa")||base.isInCommonIconClass.call(this,"glyphicon"))?$(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(jgrid.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),jgrid.cmTemplate.booleanCheckboxFa=jgrid.cmTemplate.booleanCheckbox,$.extend(fmatter,{isObject:function(e){return e&&("object"==typeof e||$.isFunction(e))||!1},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||"string"==typeof e||this.isNumber(e)||"boolean"==typeof e},isEmpty:function(e){return("string"==typeof e||!this.isValue(e))&&(!this.isValue(e)||""===(e=$.trim(e).replace(/&nbsp;/gi,"").replace(/&#160;/gi,"")))},NumberFormat:function(e,t){var i=fmatter.isNumber;if(i(e)||(e*=1),i(e)){var r,o=e<0,a=String(e),s=t.decimalSeparator||".";if(i(t.decimalPlaces)){var n=t.decimalPlaces;if(r=(a=String(Number(Math.round(e+"e"+n)+"e-"+n))).lastIndexOf("."),0<n)for(r<0?r=(a+=s).length-1:"."!==s&&(a=a.replace(".",s));a.length-1-r<n;)a+="0"}if(t.thousandsSeparator){var l=t.thousandsSeparator;r=-1<(r=a.lastIndexOf(s))?r:a.length;var d,c=void 0===t.decimalSeparator?"":a.substring(r),u=-1;for(d=r;0<d;d--)++u%3==0&&d!==r&&(!o||1<d)&&(c=l+c),c=a.charAt(d-1)+c;a=c}return a}return e}});var $FnFmatter=function(e,t,i,r,o){var a=t;i=$.extend({},getGridRes.call($(this),"formatter"),i);try{a=$.fn.fmatter[e].call(this,t,i,r,o)}catch(e){}return a};$.fn.fmatter=$FnFmatter,$FnFmatter.getCellBuilder=function(e,t,i){var r=null!=$.fn.fmatter[e]?$.fn.fmatter[e].getCellBuilder:null;return $.isFunction(r)?r.call(this,$.extend({},getGridRes.call($(this),"formatter"),t),i):null},$FnFmatter.defaultFormat=function(e,t){return fmatter.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"};var defaultFormat=$FnFmatter.defaultFormat,formatCheckboxValue=function(e,t,i){if(void 0===e||fmatter.isEmpty(e)){var r=getOptionByName(i,"defaultValue");void 0===r&&(r=t.no),e=r}return e=String(e).toLowerCase(),yesObject[e]||e===t.yes.toLowerCase()?t.checked:t.unchecked};$FnFmatter.email=function(e,t){return fmatter.isEmpty(e)?defaultFormat(e,t):"<a href='mailto:"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.checkbox=function(e,t){var i=parseCheckboxOptions.call(this,t);return formatCheckboxValue(e,i,t.colModel)},$FnFmatter.checkbox.getCellBuilder=function(e){var t,i=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=parseCheckboxOptions.call(this,e),function(e){return formatCheckboxValue(e,t,i)}},$FnFmatter.checkbox.unformat=function(e,t,i){var r=parseCheckboxOptions.call(this,t),o=$(i);return(r.checkedClasses?jgrid.hasAllClasses(o.children("i"),r.checkedClasses):o.children("input").is(":checked"))?r.yes:r.no},$FnFmatter.checkboxFontAwesome4=$FnFmatter.checkbox,$FnFmatter.checkboxFontAwesome4.getCellBuilder=$FnFmatter.checkbox.getCellBuilder,$FnFmatter.checkboxFontAwesome4.unformat=$FnFmatter.checkbox.unformat,$FnFmatter.link=function(e,t){var i=t.colModel,r="",o={target:t.target};return null!=i&&(o=$.extend({},o,i.formatoptions||{})),o.target&&(r="target="+o.target),fmatter.isEmpty(e)?defaultFormat(e,o):"<a "+r+" href='"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.showlink=function(t,i,r){var e,o,a,s=this,n=i.colModel,l={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName,hrefDefaultValue:"#"},d="",c=function(e){return $.isFunction(e)?e.call(s,{cellValue:t,rowid:i.rowId,rowData:r,options:l}):e||""};return null!=n&&(l=$.extend({},l,n.formatoptions||{})),l.target&&(d="target="+c(l.target)),e=c(l.baseLinkUrl)+c(l.showAction),o=l.idName?encodeURIComponent(c(l.idName))+"="+encodeURIComponent(c(l.rowId)||i.rowId):"","object"==typeof(a=c(l.addParam))&&null!==a&&(a=(""!==o?"&":"")+$.param(a)),""===(e+=o||a?"?"+o+a:"")&&(e=c(l.hrefDefaultValue)),"string"==typeof t||fmatter.isNumber(t)||$.isFunction(l.cellValue)?"<a "+d+" href='"+encodeAttr(e)+"'>"+($.isFunction(l.cellValue)?c(l.cellValue):t)+"</a>":defaultFormat(t,l)},$FnFmatter.showlink.getCellBuilder=function(e){var c={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName,hrefDefaultValue:"#"},t=e.colModel;return null!=t&&(c=$.extend({},c,t.formatoptions||{})),function(t,e,i){var r,o,a,s=this,n=e.rowId,l="",d=function(e){return $.isFunction(e)?e.call(s,{cellValue:t,rowid:n,rowData:i,options:c}):e||""};return c.target&&(l="target="+d(c.target)),r=d(c.baseLinkUrl)+d(c.showAction),o=c.idName?encodeURIComponent(d(c.idName))+"="+encodeURIComponent(d(n)||e.rowId):"","object"==typeof(a=d(c.addParam))&&null!==a&&(a=(""!==o?"&":"")+$.param(a)),""===(r+=o||a?"?"+o+a:"")&&(r=d(c.hrefDefaultValue)),"string"==typeof t||fmatter.isNumber(t)||$.isFunction(c.cellValue)?"<a "+l+" href='"+encodeAttr(r)+"'>"+($.isFunction(c.cellValue)?d(c.cellValue):t)+"</a>":defaultFormat(t,c)}},$FnFmatter.showlink.pageFinalization=function(e){var t,i,r,a=$(this),s=this.p,o=s.colModel[e],n=s.autoResizing.wrapperClassName,l=this.rows,d=l.length,c=function(e){var t=$(this).closest("tr.jqgrow>td"),i=t.parent(),r=t[0].cellIndex,o=s.colModel[r];if(0<i.length)return o.formatoptions.onClick.call(a[0],{iCol:r,iRow:i[0].rowIndex,rowid:i.attr("id"),cm:o,cmName:o.name,cellValue:$(this).text(),a:this,event:e})};if(null!=o.formatoptions&&$.isFunction(o.formatoptions.onClick))for(t=0;t<d;t++)i=l[t],$(i).hasClass("jqgrow")&&(r=i.cells[e],o.autoResizable&&null!=r&&$(r.firstChild).hasClass(n)&&(r=r.firstChild),null!=r&&$(r.firstChild).on("click",c))};var insertPrefixAndSuffix=function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e},numberHelper=function(e,t,i){var r=t.colModel,o=$.extend({},t[i]);return null!=r&&(o=$.extend({},o,r.formatoptions||{})),fmatter.isEmpty(e)?insertPrefixAndSuffix(o.defaultValue,o):insertPrefixAndSuffix(fmatter.NumberFormat(e,o),o)};$FnFmatter.integer=function(e,t){return numberHelper(e,t,"integer")},$FnFmatter.number=function(e,t){return numberHelper(e,t,"number")},$FnFmatter.currency=function(e,t){return numberHelper(e,t,"currency")};var numberCellBuilder=function(e,t){var i=e.colModel,r=$.extend({},e[t]);null!=i&&(r=$.extend({},r,i.formatoptions||{}));var o=fmatter.NumberFormat,a=r.defaultValue?insertPrefixAndSuffix(r.defaultValue,r):"";return function(e){return fmatter.isEmpty(e)?a:insertPrefixAndSuffix(o(e,r),r)}};$FnFmatter.integer.getCellBuilder=function(e){return numberCellBuilder(e,"integer")},$FnFmatter.number.getCellBuilder=function(e){return numberCellBuilder(e,"number")},$FnFmatter.currency.getCellBuilder=function(e){return numberCellBuilder(e,"currency")},$FnFmatter.date=function(e,t,i,r){var o=t.colModel,a=$.extend({},t.date);return null!=o&&(a=$.extend({},a,o.formatoptions||{})),a.reformatAfterEdit||"edit"!==r?fmatter.isEmpty(e)?defaultFormat(e,a):jgrid.parseDate.call(this,a.srcformat,e,a.newformat,a):defaultFormat(e,a)},$FnFmatter.date.getCellBuilder=function(e,t){var i=$.extend({},e.date);null!=e.colModel&&(i=$.extend({},i,e.colModel.formatoptions||{}));var r=jgrid.parseDate,o=i.srcformat,a=i.newformat;return i.reformatAfterEdit||"edit"!==t?function(e){return fmatter.isEmpty(e)?defaultFormat(e,i):r.call(this,o,e,a,i)}:function(e){return defaultFormat(e,i)}},$FnFmatter.select=function(e,t){var i,r=[],o=t.colModel,a=$.extend({},o.editoptions||{},o.formatoptions||{}),s="function"==typeof a.value?a.value():a.value,n=a.separator||":",l=a.delimiter||";";if(s){var d,c=!0===a.multiple,u=[],h=function(e,t){if(0<t)return e};if(c&&(u=$.map(String(e).split(","),function(e){return $.trim(e)})),"string"==typeof s){var p,f,g=s.split(l);for(p=0;p<g.length;p++)if(2<(d=g[p].split(n)).length&&(d[1]=$.map(d,h).join(n)),f=$.trim(d[0]),a.defaultValue===f&&(i=d[1]),c)-1<$.inArray(f,u)&&r.push(d[1]);else if(f===$.trim(e)){r=[d[1]];break}}else fmatter.isObject(s)&&(i=s[a.defaultValue],r=c?$.map(u,function(e){return s[e]}):[void 0===s[e]?"":s[e]])}return""!==(e=r.join(", "))?e:void 0!==a.defaultValue?i:defaultFormat(e,a)},$FnFmatter.select.getCellBuilder=function(e){var o,t,i,r,a=e.colModel,s=$FnFmatter.defaultFormat,n=$.extend({},a.editoptions||{},a.formatoptions||{}),l="function"==typeof n.value?n.value():n.value,d=n.separator||":",c=n.delimiter||";",u=void 0!==n.defaultValue,h=!0===n.multiple,p={},f=function(e,t){if(0<t)return e};if("string"==typeof l)for(r=(i=l.split(c)).length-1;0<=r;r--)2<(t=i[r].split(d)).length&&(t[1]=$.map(t,f).join(d)),p[$.trim(t[0])]=t[1];else{if(!fmatter.isObject(l))return function(e){return e?String(e):s(e,n)};p=l}return u&&(o=p[n.defaultValue]),h?function(e){var t,i=[],r=$.map(String(e).split(","),function(e){return $.trim(e)});for(t=0;t<r.length;t++)e=r[t],p.hasOwnProperty(e)&&i.push(p[e]);return""!==(e=i.join(", "))?e:u?o:s(e,n)}:function(e){var t=p[String(e)];return""!==t&&void 0!==t?t:u?o:s(e,n)}},$FnFmatter.rowactions=function(e,t){var i,r,o,a,s=$(this).closest("tr.jqgrow>td"),n=s.parent(),l=n.attr("id"),d=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),c=$("#"+jgrid.jqID(d)),u=c[0],h=u.p,p=jgrid.getRelativeRect.call(u,n).top,f=h.colModel[s[0].cellIndex],g=$.extend(!0,{extraparam:{}},jgrid.actionsNav||{},h.actionsNavOptions||{},f.formatoptions||{});switch(void 0!==h.editOptions&&(g.editOptions=$.extend(!0,g.editOptions||{},h.editOptions)),void 0!==h.delOptions&&(g.delOptions=h.delOptions),n.hasClass("jqgrid-new-row")&&(g.extraparam[h.prmNames.oper]=h.prmNames.addoper),a={keys:g.keys,oneditfunc:g.onEdit,successfunc:g.onSuccess,url:g.url,extraparam:g.extraparam,aftersavefunc:g.afterSave,errorfunc:g.onError,afterrestorefunc:g.afterRestore,restoreAfterError:g.restoreAfterError,mtype:g.mtype},!h.multiselect&&l!==h.selrow||h.multiselect&&$.inArray(l,h.selarrrow)<0?c.jqGrid("setSelection",l,!0,e):jgrid.fullBoolFeedback.call(u,"onSelectRow","jqGridSelectRow",l,!0,e),t){case"edit":c.jqGrid("editRow",l,a);break;case"save":c.jqGrid("saveRow",l,a);break;case"cancel":c.jqGrid("restoreRow",l,g.afterRestore);break;case"del":g.delOptions=g.delOptions||{},void 0===g.delOptions.top&&(g.delOptions.top=p),c.jqGrid("delGridRow",l,g.delOptions);break;case"formedit":g.editOptions=g.editOptions||{},void 0===g.editOptions.top&&(g.editOptions.top=p,g.editOptions.recreateForm=!0),c.jqGrid("editGridRow",l,g.editOptions);break;default:if(null!=g.custom&&0<g.custom.length)for(r=g.custom.length,i=0;i<r;i++)(o=g.custom[i]).action===t&&$.isFunction(o.onClick)&&o.onClick.call(u,{rowid:l,event:e,action:t,options:o})}return e.stopPropagation&&e.stopPropagation(),!1},$FnFmatter.actions=function(e,t,i,r){var o,a,s,n=t.rowId,l="",d=$(this),c={},u=getGridRes.call(d,"edit")||{},h=$.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:u.bSubmit||"",canceltitle:u.bCancel||""},getGridRes.call(d,"nav")||{},jgrid.nav||{},this.p.navOptions||{},getGridRes.call(d,"actionsNav")||{},jgrid.actionsNav||{},this.p.actionsNavOptions||{},(t.colModel||{}).formatoptions||{}),p=[{action:"edit",actionName:"formedit",display:h.editformbutton},{action:"edit",display:!h.editformbutton&&h.editbutton},{action:"del",idPrefix:"Delete",display:h.delbutton},{action:"save",display:h.editformbutton||h.editbutton,hidden:!0},{action:"cancel",display:h.editformbutton||h.editbutton,hidden:!0}],f=function(e){var t,i=e.action,r=e.actionName||i,o=void 0!==e.idPrefix?e.idPrefix:i.charAt(0).toUpperCase()+i.substring(1);return"<div title='"+encodeAttr(h[i+"title"])+(e.hidden?"' style='display:none;":"")+"' class='"+encodeAttr(d.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+i))+"' "+(null!==o?"id='j"+encodeAttr(o+"Button_"+n):"")+"' data-jqactionname=\""+r+'" '+(e.noHovering?"":'\' data-jqhovering="1" ')+"><span class='"+encodeAttr((t=i,jgrid.mergeCssClasses(h.commonIconClass,h[t+"icon"])))+"'></span></div>"},g=null!=h.custom?h.custom.length-1:-1;if(void 0===n||fmatter.isEmpty(n))return"";if($.isFunction(h.isDisplayButtons))try{c=h.isDisplayButtons.call(this,h,i,r)||{}}catch(e){}for(;0<=g;)p["first"===(s=h.custom[g--]).position?"unshift":"push"](s);for(o=0,g=p.length;o<g;o++)!1!==(a=$.extend({},p[o],c[p[o].action]||{})).display&&(l+=f(a));return"<div class='"+encodeAttr(d.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+l+"</div>"},$FnFmatter.actions.pageFinalization=function(e){var t,i,r,l,d=$(this),c=this.p,o=c.colModel[e],a=c.autoResizing.wrapperClassName,s=d.jqGrid("getGuiStyles","states.hover"),n=this.rows,u=n.length,h=(l=o.name,function(e,t){var i,r,o=0,a=c.colModel,s=a.length,n=c.iColByName[l];for(r=0;r<s&&!0===a[r].frozen;r++)o=r;null!=t&&null!=t.cells&&(i=$(t.cells[n]).children(".ui-jqgrid-actions"),a[n].frozen&&c.frozenColumns&&n<=o&&(i=i.add($(d[0].grid.fbRows[t.rowIndex].cells[n]).children(".ui-jqgrid-actions"))),e?(i.find(">.ui-inline-edit,>.ui-inline-del").show(),i.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(i.find(">.ui-inline-edit,>.ui-inline-del").hide(),i.find(">.ui-inline-save,>.ui-inline-cancel").show()))}),p=function(e,t){var i=d.jqGrid("getGridRowById",t);return h(!0,i),!1},f=function(e,t){var i=d.jqGrid("getGridRowById",t);return h(!1,i),!1},g=function(e){1===$(e.target).closest("div.ui-pg-div").data("jqhovering")&&$(this).addClass(s)},m=function(e){1===$(e.target).closest("div.ui-pg-div").data("jqhovering")&&$(this).removeClass(s)},v=function(e){return $FnFmatter.rowactions.call(this,e,$(e.target).closest("div.ui-pg-div").data("jqactionname"))},b=function(e,t){t&&null!=e&&$(e.firstChild).hasClass(a)&&(e=e.firstChild),null!=e&&($(e.firstChild).on("click",v),$(e.firstChild).children("div.ui-pg-div").on("mouseover",g).on("mouseout",m))},y=(r=o.name,function(e,t){var i=c.iColByName[r];b(t.tr.cells[i],c.colModel[i].autoResizable)});for(null!=o.formatoptions&&o.formatoptions.editformbutton||(d.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",p),d.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",p),d.off("jqGridInlineEditRow.jqGridFormatter",f),d.on("jqGridInlineEditRow.jqGridFormatter",f),d.off("jqGridAfterAddRow.jqGridFormatter",y),d.on("jqGridAfterAddRow.jqGridFormatter",y)),t=0;t<u;t++)i=n[t],$(i).hasClass("jqgrow")&&b(i.cells[e],o.autoResizable)},$.unformat=function(e,t,i,r){var o,a=t.colModel,s=a.formatter,n=this.p,l=a.formatoptions||{},d=a.unformat||$FnFmatter[s]&&$FnFmatter[s].unformat;if(e instanceof jQuery&&0<e.length&&(e=e[0]),n.treeGrid&&null!=e&&$(e.firstChild).hasClass("tree-wrap")&&($(e.lastChild).hasClass("cell-wrapper")||$(e.lastChild).hasClass("cell-wrapperleaf"))&&(e=e.lastChild),a.autoResizable&&null!=e&&$(e.firstChild).hasClass(n.autoResizing.wrapperClassName)&&(e=e.firstChild),void 0!==d&&$.isFunction(d))o=d.call(this,$(e).text(),t,e);else if(void 0!==s&&"string"==typeof s){var c=$(this),u=function(e,t){return void 0!==l[t]?l[t]:getGridRes.call(c,"formatter."+e+"."+t)},h=function(e,t){var i=u(e,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return t.replace(new RegExp(i,"g"),"")};switch(s){case"integer":o=h("integer",$(e).text());break;case"number":o=h("number",$(e).text()).replace(u("number","decimalSeparator"),".");break;case"currency":o=$(e).text();var p=u("currency","prefix"),f=u("currency","suffix");p&&p.length&&(o=o.substr(p.length)),f&&f.length&&(o=o.substr(0,o.length-f.length)),o=h("number",o).replace(u("number","decimalSeparator"),".");break;case"checkbox":o=$FnFmatter.checkbox.unformat(e,t,e);break;case"select":o=$.unformat.select(e,t,i,r);break;case"actions":return"";default:o=$(e).text()}}return o=void 0!==o?o:!0===r?$(e).text():jgrid.htmlDecode($(e).html())},$.unformat.select=function(e,t,i,r){var o=[],a=$(e).text(),s=t.colModel;if(!0===r)return a;var n=$.extend({},s.editoptions||{},s.formatoptions||{}),l=void 0===n.separator?":":n.separator,d=void 0===n.delimiter?";":n.delimiter;if(n.value){var c,u="function"==typeof n.value?n.value():n.value,h=!0===n.multiple,p=[],f=function(e,t){if(0<t)return e};if(h&&(p=a.split(","),p=$.map(p,function(e){return $.trim(e)})),"string"==typeof u){var g,m=u.split(d),v=0;for(g=0;g<m.length;g++)if(2<(c=m[g].split(l)).length&&(c[1]=$.map(c,f).join(l)),h)-1<$.inArray($.trim(c[1]),p)&&(o[v]=c[0],v++);else if($.trim(c[1])===$.trim(a)){o[0]=c[0];break}}else(fmatter.isObject(u)||$.isArray(u))&&(h||(p[0]=a),o=$.map(p,function(i){var r;if($.each(u,function(e,t){if(t===i)return r=e,!1}),void 0!==r)return r}));return o.join(", ")}return a||""},$.unformat.date=function(e,t){var i=$.extend(!0,{},getGridRes.call($(this),"formatter.date"),jgrid.formatter.date||{},t.formatoptions||{});return fmatter.isEmpty(e)?"":jgrid.parseDate.call(this,i.newformat,e,i.srcformat,i)},$.extend($.jgrid,{stringify:function(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})},parseFunc:function(str){return JSON.parse(str,function(key,value){if("string"==typeof value&&-1!==value.indexOf("function")){var sv=value.split(" ");return"function"===sv[0].trim()&&"}"===value.trim().slice(-1)?eval("("+value+")"):value}return value})},encode:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,t){var l=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),d=this,c=function(e,t){return"#text"===e?l.encode?d.encode(t):t:"function"==typeof t?"<"+e+"><![CDATA["+t+"]]></"+e+">\n":""===t?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(l.encode?d.encode(t):t)+"</"+e+">\n"},u=function(e,t){for(var i=[],r=0;r<t.length;r++){var o=t[r];void 0===o||null==o?i[i.length]="<"+e+" />":"object"==typeof o&&o.constructor==Array?i[i.length]=u(e,o):i[i.length]="object"==typeof o?h(e,o):c(e,o)}return i.length||(i[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),i.join("")},h=function(e,t){var i=[],r=[];for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];o.charAt(0)!==l.attr_prefix?null==a?i[i.length]="<"+o+" />":"object"==typeof a&&a.constructor===Array?i[i.length]=u(o,a):i[i.length]="object"==typeof a?h(o,a):c(o,a):r[r.length]=" "+o.substring(1)+'="'+(l.encode?d.encode(a):a)+'"'}var s=r.join(""),n=i.join("");return null==e||(n=0<i.length?n.match(/\n/)?"<"+e+s+">\n"+n+"</"+e+">\n":"<"+e+s+">"+n+"</"+e+">\n":"<"+e+s+" />\n"),n},i=h(null,e);return l.xmlDecl+i},xmlToJSON:function(root,options){var o=$.extend({force_array:[],attr_prefix:"-"},options||{});if(root){var __force_array={};if(o.force_array)for(var i=0;i<o.force_array.length;i++)__force_array[o.force_array[i]]=1;"string"==typeof root&&(root=$.parseXML(root)),root.documentElement&&(root=root.documentElement);var addNode=function(hash,key,cnts,val){if("string"==typeof val)if(-1!==val.indexOf("function"))val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(1===cnts&&(hash[key]=[]),hash[key][hash[key].length]=val):1===cnts?hash[key]=val:2===cnts?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},parseElement=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType){if(null==e.nodeValue.match(/[^\x00-\x20]/))return;return e.nodeValue}var t,i,r,a,s={};if(e.attributes&&e.attributes.length)for(t={},i=0;i<e.attributes.length;i++)"string"==typeof(r=e.attributes[i].nodeName)&&(a=e.attributes[i].nodeValue)&&(void 0===s[r=o.attr_prefix+r]&&(s[r]=0),s[r]++,addNode(t,r,s[r],a));if(e.childNodes&&e.childNodes.length){var n=!0;for(t&&(n=!1),i=0;i<e.childNodes.length&&n;i++){var l=e.childNodes[i].nodeType;3!==l&&4!==l&&(n=!1)}if(n)for(t||(t=""),i=0;i<e.childNodes.length;i++)t+=e.childNodes[i].nodeValue;else for(t||(t={}),i=0;i<e.childNodes.length;i++)"string"==typeof(r=e.childNodes[i].nodeName)&&(a=parseElement(e.childNodes[i]))&&(void 0===s[r]&&(s[r]=0),s[r]++,addNode(t,r,s[r],a))}return t}},json=parseElement(root);if(__force_array[root.nodeName]&&(json=[json]),11!==root.nodeType){var tmp={};tmp[root.nodeName]=json,json=tmp}return json}},saveAs:function(e,t,i){i=$.extend(!0,{type:"plain/text;charset=utf-8"},i||{});var r,o,a=[];t=null==t||""===t?"jqGridFile.txt":t,$.isArray(e)?a=e:a[0]=e;try{r=new File(a,t,i)}catch(e){r=new Blob(a,i)}if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,t);else{o=URL.createObjectURL(r);var s=document.createElement("a");s.href=o,s.download=t,document.body.appendChild(s),s.click(),setTimeout(function(){document.body.removeChild(s),window.URL.revokeObjectURL(o)},0)}}}),$.jgrid=$.jgrid||{},$.extend($.jgrid,{formatCell:function(e,t,i,r,o){var a;if(void 0!==r.formatter){var s={rowId:"",colModel:r,gid:o.p.id,pos:t,styleUI:""};a=$.isFunction(r.formatter)?r.formatter.call(o,e,s,i):$.fmatter?$.fn.fmatter.call(o,r.formatter,e,s,i):e}else a=e;return a},formatCellCsv:function(t,e){t=null==t?"":String(t);try{t=t.replace(e._regexsep,e.separatorReplace).replace(/\r\n/g,e.replaceNewLine).replace(/\n/g,e.replaceNewLine)}catch(e){t=""}return e.escquote&&(t=t.replace(e._regexquot,e.escquote+e.quote)),-1!==t.indexOf(e.separator)&&-1!==t.indexOf(e.qoute)||(t=e.quote+t+e.quote),t},excelCellPos:function(e){for(var t="A".charCodeAt(0),i="Z".charCodeAt(0)-t+1,r="";0<=e;)r=String.fromCharCode(e%i+t)+r,e=Math.floor(e/i)-1;return r},makeNode:function(e,t,i){var r=e.createElement(t);return i&&(i.attr&&$(r).attr(i.attr),i.children&&$.each(i.children,function(e,t){r.appendChild(t)}),i.text&&r.appendChild(e.createTextNode(i.text))),r},xmlToZip:function(o,e){var a,s,n,l,d,c,u=this,h=new XMLSerializer,p=-1===h.serializeToString($.parseXML($.jgrid.excelStrings["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r"),f=[];$.each(e,function(e,t){if($.isPlainObject(t))a=o.folder(e),u.xmlToZip(a,t);else{if(p){for(s=t.childNodes[0],n=s.attributes.length-1;0<=n;n--){var i=s.attributes[n].nodeName,r=s.attributes[n].nodeValue;-1!==i.indexOf(":")&&(f.push({name:i,value:r}),s.removeAttribute(i))}for(n=0,l=f.length;n<l;n++)(d=t.createAttribute(f[n].name.replace(":","_dt_b_namespace_token_"))).value=f[n].value,s.setAttributeNode(d)}c=h.serializeToString(t),p&&(-1===c.indexOf("<?xml")&&(c='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+c),c=c.replace(/_dt_b_namespace_token_/g,":")),c=c.replace(/<row xmlns="" /g,"<row ").replace(/<cols xmlns="">/g,"<cols>").replace(/<mergeCells xmlns="" /g,"<mergeCells "),o.file(e,c)}})},excelStrings:{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="Sheet1" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="2"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"><alignment horizontal="center" /></xf><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'}}),$.jgrid=$.jgrid||{},$.jgrid.extend({exportToCsv:function(D){D=$.extend(!0,{separator:",",separatorReplace:" ",quote:'"',escquote:'"',newLine:"\r\n",replaceNewLine:" ",includeCaption:!0,includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.csv",mimetype:"text/csv;charset=utf-8",returnAsString:!1},D||{});var F="";if(this.each(function(){D._regexsep=new RegExp(D.separator,"g"),D._regexquot=new RegExp(D.quote,"g");var e,t,i,r,j=this,o=this.addLocalData(!0),a=o.length,s=j.p.colModel,n=s.length,l=j.p.colNames,d=0,c="",u="",h="",p="",f="",g=[],m=[];var v,b=[],y=[];if($.each(s,function(e,t){void 0===t.exportcol&&(t.exportcol=!0),"cb"!==t.name&&"rn"!==t.name||t.hidden||(m.push(e),t.hidden=!0),t.exportcol||t.hidden||(y.push(e),t.hidden=!0),t.hidden&&!t.exportcol||(g.push($.jgrid.formatCellCsv(l[e],D)),b.push(t.name))}),D.includeLabels&&(f=g.join(D.separator)+D.newLine),D.collen=g.length,j.p.grouping)c+=function(u,h){var p="",f=j.p.groupingView,g=[],m=f.groupField.length,v=j.p.colModel,b=v.length,y=0;function w(e,t,i,r){var o,a,s=function(e,t,i){var r,o=!1;if(0===t)o=i[e];else{var a=i[e].idx;if(0===a)o=i[e];else for(r=e;0<=r;r--)if(i[r].idx===a-t){o=i[r];break}}return o}(e,t,i),n=s.cnt,l=new Array(h.collen),d=0;for(a=r;a<b;a++)if(!v[a].hidden){var c="{0}";$.each(s.summary,function(){if(this.nm===v[a].name){v[a].summaryTpl&&(c=v[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<n&&(this.v=this.v/n));try{this.groupCount=s.cnt,this.groupIndex=s.dataIndex,this.groupValue=s.value,o=j.formatter("",this.v,a,this)}catch(e){o=this.v}return l[d]=$.jgrid.formatCellCsv($.jgrid.stripHtml($.jgrid.template(c,o)),h),!1}}),d++}return l}$.each(v,function(e,t){var i;for(i=0;i<m;i++)if(f.groupField[i]===t.name){g[i]=e;break}});var x,C,_=$.makeArray(f.groupSummary);return _.reverse(),$.each(f.groups,function(e,t){y++;try{x=$.isArray(f.formatDisplayField)&&$.isFunction(f.formatDisplayField[t.idx])?f.formatDisplayField[t.idx].call(j,t.displayValue,t.value,j.p.colModel[g[t.idx]],t.idx,f):j.formatter("",t.displayValue,g[t.idx],t.value)}catch(e){x=t.displayValue}var i,r="";if("string"!=typeof(r=$.isFunction(f.groupText[t.idx])?f.groupText[t.idx].call(j,x,t.cnt,t.summary):$.jgrid.template(f.groupText[t.idx],x,t.cnt,t.summary))&&"number"!=typeof r&&(r=x),(i="header"===f.groupSummaryPos[t.idx]?w(e,0,f.groups,0):new Array(h.collen))[0]=$.jgrid.formatCellCsv($.jgrid.stripHtml(r),h),p+=i.join(h.separator)+h.newLine,m-1===t.idx){var o,a,s,n=f.groups[e+1],l=t.startRow,d=void 0!==n?n.startRow:f.groups[e].startRow+f.groups[e].cnt;for(o=l;o<d&&u[o-0];o++){for(s=u[o-0],a=C=0;a<v.length;a++)v[a].hidden||(i[C]=$.jgrid.formatCellCsv($.jgrid.formatCell(s[v[a].name],a,s,v[a],j),h),C++);p+=i.join(h.separator)+h.newLine}if("header"!==f.groupSummaryPos[t.idx]){var c;if(void 0!==n){for(c=0;c<f.groupField.length&&n.dataIndex!==f.groupField[c];c++);y=f.groupField.length-c}for(a=0;a<y;a++)_[a]&&(i=w(e,a,f.groups,0),p+=i.join(h.separator)+h.newLine);y=c}}}),p}(o,D);else for(;d<a;){for(t=o[d],i=[],e=r=0;e<n;e++)s[e].hidden||(i[r]=$.jgrid.formatCellCsv($.jgrid.formatCell(t[s[e].name],e,t,s[e],j),D),r++);c+=i.join(D.separator)+D.newLine,d++}if(o=null,i=new Array(D.collen),D.includeCaption&&j.p.caption){for(d=D.collen;--d;)i[d]="";i[0]=$.jgrid.formatCellCsv(j.p.caption,D),u+=i.join(D.separator)+D.newLine}if(D.includeGroupHeader&&j.p.groupHeader&&j.p.groupHeader.length){var w=j.p.groupHeader;for(e=0;e<w.length;e++){var x=w[e].groupHeaders;for(i=[],v=d=0;v<b.length;v++){for(i[d]="",r=0;r<x.length;r++)x[r].startColumnName===b[v]&&(i[d]=$.jgrid.formatCellCsv(x[r].titleText,D));d++}h+=i.join(D.separator)+D.newLine}}if(D.includeFooter&&j.p.footerrow){var C=$(".ui-jqgrid-ftable",this.sDiv);if(C.length){var _=C[0].rows[0];for(d=e=0,i=[];e<_.cells.length;){var I=_.cells[e],S=$(I).attr("aria-describedby").slice(-3);I.hidden||"_cb"===S||"_rn"===S||(i[d]=$.jgrid.formatCellCsv($(I).text(),D),d++),e++}p+=i.join(D.separator)+D.newLine}}for(F=u+h+f+c+p,e=0;e<m.length;e++)s[m[e]].hidden=!1;for(e=0;e<y.length;e++)s[y[e]].hidden=!1}),D.returnAsString)return F;$.jgrid.saveAs(F,D.fileName,{type:D.mimetype})},exportToExcel:function(O){O=$.extend(!0,{includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.xlsx",mimetype:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",maxlength:40,onBeforeExport:null,replaceStr:null,zipEngine:null},O||{}),this.each(function(){var e,t,w=this,i=$.jgrid.excelStrings,n=0,l=$.parseXML(i["xl/worksheets/sheet1.xml"]),d=l.getElementsByTagName("sheetData")[0],r={_rels:{".rels":$.parseXML(i["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":$.parseXML(i["xl/_rels/workbook.xml.rels"])},"workbook.xml":$.parseXML(i["xl/workbook.xml"]),"styles.xml":$.parseXML(i["xl/styles.xml"]),worksheets:{"sheet1.xml":l}},"[Content_Types].xml":$.parseXML(i["[Content_Types].xml"])},x=w.p.colModel,o=0,C={body:$("#grid").jqGrid("getGridParam","data"),header:[],footer:[],width:[],map:[]};for(e=0,t=x.length;e<t;e++)void 0===x[e].exportcol&&(x[e].exportcol=!0),(!x[e].hidden&&"cb"!==x[e].name&&"rn"!==x[e].name&&x[e].exportcol||x[e].hidden&&x[e].exportcol)&&(C.header[o]=x[e].name,C.width[o]=5,C.map[o]=e,o++);var c,u,h=$.isFunction(O.replaceStr)?O.replaceStr:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,"")},_=function(e,t){c=n+1,u=$.jgrid.makeNode(l,"row",{attr:{r:c}});for(var i=0;i<C.header.length;i++){var r,o=$.jgrid.excelCellPos(i)+""+c,a=$.isArray(e)&&t?w.p.colNames[C.map[i]]:e[C.header[i]];if(null==a&&(a=""),t||(a=""!==a?$.jgrid.formatCell(a,C.map[i],e,x[C.map[i]],w):a),C.width[i]=Math.max(C.width[i],Math.min(parseInt(a.length,10),O.maxlength)),"number"==typeof a||a.match&&$.trim(a).match(/^-?\d+(\.\d+)?$/)&&!$.trim(a).match(/^0\d+/))r=$.jgrid.makeNode(l,"c",{attr:{t:"n",r:o},children:[$.jgrid.makeNode(l,"v",{text:a})]});else{var s=a.replace?h(a):a;r=$.jgrid.makeNode(l,"c",{attr:{t:"inlineStr",r:o},children:{row:$.jgrid.makeNode(l,"is",{children:{row:$.jgrid.makeNode(l,"t",{text:s})}})}})}u.appendChild(r)}d.appendChild(u),n++};if($("sheets sheet",r.xl["workbook.xml"]).attr("name",O.sheetName),O.includeGroupHeader&&w.p.groupHeader&&w.p.groupHeader.length){var a,s,p=w.p.groupHeader,f=[],g=0;for(s=0;s<p.length;s++){var m=p[s].groupHeaders,v={};for(g++,e=e=0;e<C.header.length;e++){v[a=C.header[e]]="";for(var b=0;b<m.length;b++)if(m[b].startColumnName===a){v[a]=m[b].titleText;var y=$.jgrid.excelCellPos(e)+g,j=$.jgrid.excelCellPos(e+m[b].numberOfColumns-1)+g;f.push({ref:y+":"+j})}}_(v,!0)}$("row c",l).attr("s","2");var I=$.jgrid.makeNode(l,"mergeCells",{attr:{count:f.length}});for($("worksheet",l).append(I),o=0;o<f.length;o++)I.appendChild($.jgrid.makeNode(l,"mergeCell",{attr:f[o]}))}if(O.includeLabels&&(_(C.header,!0),$("row:last c",l).attr("s","2")),w.p.grouping)!function(u){var h=w.p.groupingView,p=[],f=h.groupField.length,c=x.length,g=0;function m(e,t,i,r){var o,a,s=function(e,t,i){var r,o=!1;if(0===t)o=i[e];else{var a=i[e].idx;if(0===a)o=i[e];else for(r=e;0<=r;r--)if(i[r].idx===a-t){o=i[r];break}}return o}(e,t,i),n=s.cnt,l=v(C.header);for(a=r;a<c;a++)if(!x[a].hidden&&!x[a].exportcol||x[a].hidden&&x[a].exportcol){var d="{0}";$.each(s.summary,function(){if(this.nm===x[a].name){x[a].summaryTpl&&(d=x[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<n&&(this.v=this.v/n));try{this.groupCount=s.cnt,this.groupIndex=s.dataIndex,this.groupValue=s.value,o=w.formatter("",this.v,a,this)}catch(e){o=this.v}return l[this.nm]=$.jgrid.stripHtml($.jgrid.template(d,o)),!1}})}return l}function v(e){for(var t={},i=0;i<e.length;i++)t[e[i]]="";return t}$.each(x,function(e,t){var i;for(i=0;i<f;i++)if(h.groupField[i]===t.name){p[i]=e;break}});var b,y=$.makeArray(h.groupSummary);y.reverse(),$.each(h.groups,function(e,t){g++;try{b=$.isArray(h.formatDisplayField)&&$.isFunction(h.formatDisplayField[t.idx])?h.formatDisplayField[t.idx].call(w,t.displayValue,t.value,w.p.colModel[p[t.idx]],t.idx,h):w.formatter("",t.displayValue,p[t.idx],t.value)}catch(e){b=t.displayValue}var i,r="";if("string"!=typeof(r=$.isFunction(h.groupText[t.idx])?h.groupText[t.idx].call(w,b,t.cnt,t.summary):$.jgrid.template(h.groupText[t.idx],b,t.cnt,t.summary))&&"number"!=typeof r&&(r=b),(i="header"===h.groupSummaryPos[t.idx]?m(e,0,h.groups,0):v(C.header))[Object.keys(i)[0]]=$.jgrid.stripHtml(new Array(5*t.idx).join(" ")+r),_(i,!0),f-1===t.idx){var o,a,s=h.groups[e+1],n=t.startRow,l=void 0!==s?s.startRow:h.groups[e].startRow+h.groups[e].cnt;for(o=n;o<l&&u[o-0];o++){var d=u[o-0];_(d,!1)}if("header"!==h.groupSummaryPos[t.idx]){var c;if(void 0!==s){for(c=0;c<h.groupField.length&&s.dataIndex!==h.groupField[c];c++);g=h.groupField.length-c}for(a=0;a<g;a++)y[a]&&(i=m(e,a,h.groups,0),_(i,!0));g=c}}})}(C.body);else for(var S=0,D=C.body.length;S<D;S++)_(C.body[S],!1);if(O.includeFooter||w.p.footerrow){for(o in C.footer=$(w).jqGrid("footerData","get"),C.footer)C.footer.hasOwnProperty(o)&&(C.footer[o]=$.jgrid.stripHtml(C.footer[o]));_(C.footer,!0),$("row:last c",l).attr("s","2")}var F=$.jgrid.makeNode(l,"cols");for($("worksheet",l).prepend(F),o=0,t=C.width.length;o<t;o++)F.appendChild($.jgrid.makeNode(l,"col",{attr:{min:o+1,max:o+1,width:C.width[o],customWidth:1}}));$.isFunction(O.onBeforeExport)&&O.onBeforeExport(r),C=null;try{if(null!=O.zipEngine)var k=O.zipEngine;else k=new JSZip;var R={type:"blob",mimeType:O.mimetype};$.jgrid.xmlToZip(k,r),k.generateAsync?k.generateAsync(R).then(function(e){$.jgrid.saveAs(e,O.fileName,{type:O.mimetype})}):$.jgrid.saveAs(k.generate(R),O.fileName,{type:O.mimetype})}catch(e){throw e}})},exportToPdf:function(v){return v=$.extend(!0,{title:null,orientation:"portrait",pageSize:"A4",description:null,onBeforeExport:null,download:"download",includeLabels:!0,includeGroupHeader:!0,includeFooter:!0,fileName:"jqGridExport.pdf",mimetype:"application/pdf"},v||{}),this.each(function(){var e,t,i,r,o,a,C=this,_=[],s=C.p.colModel,n={},l=$("#grid").jqGrid("getGridParam","data"),j=[],d=0,I=[],c=[],u=[],S={};for(e=0,t=s.length;e<t;e++)void 0===s[e].exportcol&&(s[e].exportcol=!0),(!s[e].hidden&&"cb"!==s[e].name&&"rn"!==s[e].name&&s[e].exportcol||s[e].hidden&&s[e].exportcol)&&(n={text:C.p.colNames[e],style:"tableHeader"},c.push(n),j[d]=s[e].name,I[d]=e,u.push(s[e].width),S[s[e].name]=s[e].align||"left",d++);if(v.includeGroupHeader&&C.p.groupHeader&&C.p.groupHeader.length)for(o=C.p.groupHeader,d=0;d<o.length;d++){var h=[],p=o[d].groupHeaders;for(i=0;i<j.length;i++){for(n={text:"",style:"tableHeader"},r=0;r<p.length;r++)p[r].startColumnName===j[i]&&(n={text:p[r].titleText,colSpan:p[r].numberOfColumns,style:"tableHeader"});h.push(n),e++}_.push(h)}if(v.includeLabels&&_.push(c),C.p.grouping)!function(u){var h=C.p.groupingView,p=[],f=h.groupField.length,c=C.p.colModel,g=c.length,m=0;function v(e,t){for(var i=0,r=[],o=0;o<j.length;o++)n={text:null==e[j[o]]?"":t?$.jgrid.formatCell(e[j[o]]+"",I[i],l[d],c[I[i]],C):e[j[o]],alignment:S[o],style:"tableBody"},r.push(n),i++;return r}function b(e,t,i,r){var o,a,s=function(e,t,i){var r,o=!1;if(0===t)o=i[e];else{var a=i[e].idx;if(0===a)o=i[e];else for(r=e;0<=r;r--)if(i[r].idx===a-t){o=i[r];break}}return o}(e,t,i),n=s.cnt,l=y(j);for(a=r;a<g;a++)if(!c[a].hidden&&c[a].exportcol){var d="{0}";$.each(s.summary,function(){if(this.nm===c[a].name){c[a].summaryTpl&&(d=c[a].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&0<n&&(this.v=this.v/n));try{this.groupCount=s.cnt,this.groupIndex=s.dataIndex,this.groupValue=s.value,o=C.formatter("",this.v,a,this)}catch(e){o=this.v}return l[this.nm]=$.jgrid.stripHtml($.jgrid.template(d,o)),!1}})}return l}function y(e){for(var t={},i=0;i<e.length;i++)t[e[i]]="";return t}$.each(c,function(e,t){var i;for(i=0;i<f;i++)if(h.groupField[i]===t.name){p[i]=e;break}});var w,x=$.makeArray(h.groupSummary);x.reverse(),$.each(h.groups,function(e,t){m++;try{w=$.isArray(h.formatDisplayField)&&$.isFunction(h.formatDisplayField[t.idx])?h.formatDisplayField[t.idx].call(C,t.displayValue,t.value,C.p.colModel[p[t.idx]],t.idx,h):C.formatter("",t.displayValue,p[t.idx],t.value)}catch(e){w=t.displayValue}var i,r="";if("string"!=typeof(r=$.isFunction(h.groupText[t.idx])?h.groupText[t.idx].call(C,w,t.cnt,t.summary):$.jgrid.template(h.groupText[t.idx],w,t.cnt,t.summary))&&"number"!=typeof r&&(r=w),(i="header"===h.groupSummaryPos[t.idx]?b(e,0,h.groups,0):y(j))[Object.keys(i)[0]]=$.jgrid.stripHtml(new Array(5*t.idx).join(" ")+r),_.push(v(i,!1)),f-1===t.idx){var o,a,s=h.groups[e+1],n=t.startRow,l=void 0!==s?s.startRow:h.groups[e].startRow+h.groups[e].cnt;for(o=n;o<l&&u[o-0];o++){var d=u[o-0];_.push(v(d,!0))}if("header"!==h.groupSummaryPos[t.idx]){var c;if(void 0!==s){for(c=0;c<h.groupField.length&&s.dataIndex!==h.groupField[c];c++);m=h.groupField.length-c}for(a=0;a<m;a++)x[a]&&(i=b(e,a,h.groups,0),_.push(v(i,!1)));m=c}}})}(l);else for(d=0,t=l.length;d<t;d++){for(r=0,c=[],a=l[d],i=0;i<j.length;i++)n={text:null==a[j[i]]?"":$.jgrid.formatCell(a[j[i]]+"",I[r],l[d],s[I[r]],C),alignment:S[j[i]],style:"tableBody"},c.push(n),r++;_.push(c)}if(v.includeFooter&&C.p.footerrow){var f=$(C).jqGrid("footerData","get");for(c=[],i=0;i<j.length;i++)n={text:$.jgrid.stripHtml(f[j[i]]),style:"tableFooter",alignment:S[j[i]]},c.push(n);_.push(c)}var g={pageSize:v.pageSize,pageOrientation:v.orientation,content:[{style:"tableExample",widths:u,table:{headerRows:null!=o?0:1,body:_}}],styles:{tableHeader:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc",alignment:"center"},tableBody:{fontSize:10},tableFooter:{bold:!0,fontSize:11,color:"#2e6e9e",fillColor:"#dfeffc"},title:{alignment:"center",fontSize:15},description:{}},defaultStyle:{fontSize:10}};v.description&&g.content.unshift({text:v.description,style:"description",margin:[0,0,0,12]}),v.title&&g.content.unshift({text:v.title,style:"title",margin:[0,0,0,12]}),$.isFunction(v.onBeforeExport)&&v.onBeforeExport.call(C,g);try{var m=pdfMake.createPdf(g);"open"===v.download?m.open():m.getBuffer(function(e){$.jgrid.saveAs(e,v.fileName,{type:v.mimetype})})}catch(e){throw e}})}})});